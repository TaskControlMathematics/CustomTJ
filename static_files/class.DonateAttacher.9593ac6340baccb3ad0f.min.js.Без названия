(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1043:function(t,e,n){var a=n(1582);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(31).default)("64de1eb2",a,!1,{})},1044:function(t,e,n){var a=n(1584);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(31).default)("292e71d2",a,!1,{})},1581:function(t,e,n){"use strict";n(1043)},1582:function(t,e,n){(e=n(30)(!1)).push([t.i,".v-form-range {\n  display: block;\n}\n.v-form-range .vue-slider {\n  position: relative;\n  height: 4px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.v-form-range .vue-slider-rail {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: #f5f5f5;\n  -webkit-box-shadow: inset 0 0.5px 1.5px rgba(0,0,0,0.25);\n  box-shadow: inset 0 0.5px 1.5px rgba(0,0,0,0.25);\n  border-radius: 2px;\n}\n.v-form-range .vue-slider-process {\n  background: #4683d9;\n  z-index: 2;\n}\n.v-form-range .vue-slider-mark {\n  background-color: rgba(0,0,0,0.1);\n}\n.v-form-range .vue-slider-mark:first-child,\n.v-form-range .vue-slider-mark:last-child {\n  opacity: 0;\n}\n.v-form-range .vue-slider-dot {\n  position: absolute;\n}\n.v-form-range .vue-slider-dot-handle {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #fff;\n  -webkit-box-shadow: 0px 2px 1px rgba(0,0,0,0.02), 0px 2.5px 0.5px rgba(0,0,0,0.02), 0px 2px 0.5px rgba(27,27,28,0.03), 0px 1px 0.5px rgba(28,26,26,0.03), 0px 0.5px 1px rgba(28,26,26,0.04), 0px 3px 8px rgba(22,18,18,0.15);\n  box-shadow: 0px 2px 1px rgba(0,0,0,0.02), 0px 2.5px 0.5px rgba(0,0,0,0.02), 0px 2px 0.5px rgba(27,27,28,0.03), 0px 1px 0.5px rgba(28,26,26,0.03), 0px 0.5px 1px rgba(28,26,26,0.04), 0px 3px 8px rgba(22,18,18,0.15);\n}\n.v-form-range .vue-slider-disabled .vue-slider-process {\n  background: #595959;\n}\n",""]),t.exports=e},1583:function(t,e,n){"use strict";n(1044)},1584:function(t,e,n){(e=n(30)(!1)).push([t.i,".attacher[data-v-0ceda837] {\n  position: relative;\n}\n.attacher--active .attacher__button[data-v-0ceda837] {\n  background-color: #f2f2f2;\n  color: #fff;\n}\n.attacher--active .attacher__form[data-v-0ceda837] {\n  visibility: visible;\n}\n.attacher--disabled[data-v-0ceda837] {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.attacher__button[data-v-0ceda837] {\n  color: #447;\n}\n@media (hover: hover) {\n.attacher__button[data-v-0ceda837]:hover {\n    background-color: #f2f2f2;\n}\n}\n.attacher__form[data-v-0ceda837] {\n  width: 210px;\n  background-color: #fff;\n  border: 1px solid rgba(0,0,0,0.07);\n  -webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.06), inset 0 -1px 0 #fff;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.06), inset 0 -1px 0 #fff;\n  border-radius: 4px;\n  padding: 12px 16px;\n  position: absolute;\n  bottom: 100%;\n  margin-bottom: 12px;\n  left: -7px;\n  visibility: hidden;\n  z-index: 10;\n}\n.attacher__form[data-v-0ceda837]:before {\n  content: '';\n  width: 10px;\n  height: 10px;\n  background-color: #fff;\n  border: solid rgba(0,0,0,0.07);\n  border-width: 0 1px 1px 0;\n  position: absolute;\n  bottom: -6px;\n  left: 17px;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n  pointer-events: none;\n}\n.attacher__input[data-v-0ceda837],\n.attacher__range[data-v-0ceda837] {\n  margin-bottom: 10px;\n}\n.attacher__input[data-v-0ceda837] input {\n  height: 48px;\n  font-size: 24px;\n  text-align: center;\n}\n.attacher__input[data-v-0ceda837] .v-form-input__error {\n  display: none;\n}\n.attacher[data-v-0ceda837] .ui-button {\n  width: 100%;\n}\n",""]),t.exports=e},1645:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var a=n(35),i=n.n(a),o=n(42);i.a.use(o.a);const r={value:0},s={IS_ATTACHED:t=>t.value>0},l="SET_VALUE",u={[l](t,e){t.value=e}},p={ATTACH_DONATE({commit:t},e){t(l,e)},DETACH_DONATE({commit:t}){t(l,0)}};var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDisabled,expression:"!isDisabled"},{name:"click-outside",rawName:"v-click-outside",value:t.hideForm,expression:"hideForm"}],class:["attacher",{"attacher--active":t.isActive&&!t.isAttached,"attacher--disabled":t.isAttached}]},[n("div",{staticClass:"thesis__attach_something attacher__button",on:{click:t.toggleForm}},[n("icon",{attrs:{name:"v_rouble",width:"20",height:"20"}})],1),t._v(" "),t.isActive&&!t.isAttached?n("div",{staticClass:"attacher__form"},[n("form-input",{ref:"input",staticClass:"attacher__input",attrs:{placeholder:"0 ₽",type:"number",pattern:"[0-9\\s₽]{0,}",error:t.inputError,autofocus:!0,mask:{numeral:!0,numeralPositiveOnly:!0,numeralIntegerScale:4,prefix:" ₽",tailPrefix:!0,noImmediatePrefix:!0,rawValueTrimPrefix:!0,delimiter:"",delimiterLazyShow:!0}},on:{blur:t.onInputBlur,input:t.onTextInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("form-range",{ref:"range",staticClass:"attacher__range",attrs:{min:"100",max:"5000",list:t.rangeValuesList},on:{drag:t.onRangeDrag},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}}),t._v(" "),n("ui-button",{attrs:{size:"small",disabled:!t.isValidValue},on:{click:t.confirmValue}},[n("translate",[t._v("\n        Attach\n      ")])],1)],1):t._e()])};c._withStripped=!0;var d=n(26),h=n(543),m=n(535),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"v-form-range"},[n("vue-slider",{ref:"slider",attrs:{tooltip:"none","dot-size":"20",min:t.min,max:t.max,adsorb:!0,marks:!!t.list.length&&t.list,"hide-label":!0,included:!0,clickable:!1,data:t.list},on:{dragging:t.onDrag,change:t.onInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)};f._withStripped=!0;var v=n(854),b={name:"form-range",components:{VueSlider:n.n(v).a},props:{value:{type:[String,Number],default:0},min:{type:Number,default:0},max:{type:Number,default:100},list:{type:Array,default:()=>[]}},computed:{},methods:{onInput(t){this.$emit("input",t)},onDrag(t){this.$emit("drag",t)},setValue(t){this.$refs.slider.setValue(t)}}},g=(n(1581),n(10)),x=Object(g.a)(b,f,[],!1,null,null,null);x.options.__file="src/Components/Ui/vue/form/form-range.vue";var _=x.exports,y=n(24),w=n(5),k=n(11);var A={name:"donate-attacher",components:{Icon:d.a,UiButton:h.a,FormInput:m.a,FormRange:_},data:()=>({value:150,rangeValue:150,isActive:!1,rangeValuesList:[100,150,300,500,1e3,5e3],inputError:"",isDisabled:!1}),computed:{isAttached(){return this.$store.getters.IS_ATTACHED},numericValue(){return parseInt(this.value,10)},isValidValue(){return this.numericValue&&this.numericValue<=5e3&&this.numericValue>=100}},created(){this.$root.$on("enable",()=>{this.isDisabled=!1}),this.$root.$on("disable",()=>{this.isDisabled=!0})},beforeDestroy(){this.$root.$off()},methods:{toggleForm(){this.isActive=!this.isActive,this.isActive&&Object(k.sendDefaultEvent)("Donation widget — Show")},hideForm(){this.isActive=!1},confirmValue(){this.isValidValue&&!this.isDisabled&&(this.$store.dispatch("ATTACH_DONATE",this.numericValue),this.$root.attach(this.numericValue),this.hideForm(),Object(k.sendDefaultEvent)("Donation widget — Add — Click"))},onTextInput(t){const e=Object(y.b)(t,this.rangeValuesList);this.$refs.range.setValue(e)},onInputBlur(){if(this.isValidValue)this.inputError="";else{const t=this.$gettext("Input the amount between %{ min } and %{ max } roubles");this.inputError=this.$gettextInterpolate(t,{min:100,max:5e3}),this.$refs.input.realignCursor(),Object(w.error)(this.inputError)}},onRangeDrag(t){this.$refs.input.setValue(t)}}},$=(n(1583),Object(g.a)(A,c,[],!1,null,"0ceda837",null));$.options.__file="src/Components/Donates/vue/attacher/donate-attacher.vue";var C=$.exports,V=n(805),D=n(566),S=n(123),E=n(0),P=n(1),I=n(44),F=n.n(I),T=n(55);class O{constructor({parent:t,attachmentParent:e,onChange:n}){this.parent=t,this.attachmentParent=e,this.onChange=n,this.attachmentPreview=null,this.container=null,this.app=null,this.store=function(t={}){const e={...r,...t};return new o.a.Store({state:e,getters:s,mutations:u,actions:p})}(),this.value=0,this.moduleHawk=null,this.prepareContainer(),this.init()}prepareContainer(){this.container=document.createElement("div"),this.parent.appendChild(this.container)}init(){i.a.use(F.a,{translations:T,defaultLanguage:window.__i18nLocale}),i.a.use(D.a),i.a.directive("click-outside",S.a),this.app=new i.a({el:this.container,store:this.store,methods:{attach:t=>{this.value=t,this.addAttachmentPreview(),this.onChange()}},render:t=>t(C)}),this.moduleHawk=window.Air&&window.Air.get("module.hawk"),this.moduleHawk&&this.moduleHawk.connectVue(i.a)}destroy(){this.app.$popup&&this.app.$popup.close(),this.app&&(this.app.$destroy(),this.app=null),this.store=null}addAttachmentPreview(){const t=Object(P.c)("Donation"),e=Object(E.parseHTML)(`<div class="andropov_preview"><div class="donate-attachment">${t}<div class="donate-attachment__sum">${this.value} ₽</div></div></div>`),n=Object(E.make)("div","andropov_uploader__preview_item__remove");n.addEventListener("click",()=>{this.clear(),this.onChange()}),this.attachmentPreview=Object(E.make)("div","andropov_uploader__preview_item"),this.attachmentPreviewInner=Object(E.make)("div","andropov_uploader__preview_item__inner"),this.attachmentPreviewInner.appendChild(e),this.attachmentPreviewInner.appendChild(n),this.attachmentPreview.appendChild(this.attachmentPreviewInner),this.attachmentParent.insertBefore(this.attachmentPreview,this.attachmentParent.firstChild)}detachDonate(){this.store.dispatch("DETACH_DONATE")}clear(){this.value=0,Object(E.remove)(this.attachmentPreview),this.detachDonate()}setDisabled(t){this.app.$emit(t?"disable":"enable")}processPayment(t){return new Promise((e,n)=>{console.log("[Donate] 2. Processing payment with details",t);this.app.$popup.open(V.a,{maxWidth:765,cover:!0,props:{store:this.$store,details:t,onSuccess:e,onError:t=>{this.moduleHawk&&this.moduleHawk.catch(t)}}}),this.app.$popup.on("close",()=>{n(new Error("Payment canceled by user"))})})}}},530:function(t,e,n){var a=n(539);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(31).default)("f5febf7e",a,!1,{})},535:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",class:["v-form-input",{"v-form-input--icon":t.icon,"v-form-input--valid":t.isValid,"v-form-input--invalid":!t.isValid,"v-form-input--error":t.error,"v-form-input--disabled":t.disabled,"ui--shake":t.isDrawAttention}]},[t.label?n("div",{staticClass:"v-form-input__label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._v(" "),n("input",t._b({ref:"input",attrs:{type:"number"===t.type?"text":t.type,inputmode:"number"===t.type&&"numeric",pattern:t.pattern||t.computedPattern,name:t.name,placeholder:t.placeholder,autocomplete:t.autocomplete,disabled:t.disabled,minlength:t.minlength,maxlength:t.maxlength,"data-disable-chars-left":t.isDisableCharsLeft},domProps:{value:t.displayValue},on:{input:function(e){return e.stopPropagation(),e.preventDefault(),t.onInput.apply(null,arguments)},focus:function(e){return e.stopPropagation(),e.preventDefault(),t.onFocus.apply(null,arguments)},blur:function(e){return e.stopPropagation(),e.preventDefault(),t.onBlur.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)},animationstart:t.checkAutofillAnimation}},"input",t.attributes,!1)),t._v(" "),t.icon?n("icon",{attrs:{name:t.icon,height:"13"}}):t._e(),t._v(" "),t.error?n("div",{staticClass:"v-form-input__error"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),t.note?n("div",{staticClass:"v-form-input__note",domProps:{innerHTML:t._s(t.note)}}):t._e()],1)};a._withStripped=!0;var i=n(157),o=n(26);var r={name:"form-input",components:{Icon:o.a},props:{value:{type:[String,Number],default:""},id:{type:[String,Boolean],default:!1},name:{type:[String,Boolean],default:!1},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:[String,Boolean],default:!1},autofocus:{type:Boolean,default:!1},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},minlength:{type:Number,default:0},maxlength:{type:Number,default:2048},pattern:{type:[String,Boolean],default:!1},autocomplete:{type:[String,Boolean],default:!1},mask:{type:Object,default:()=>({})},error:{type:String,default:""},attributes:{type:Object,default:()=>({})},icon:{type:String,default:null},note:{type:String,default:null},isDisableCharsLeft:{type:Boolean,default:!1}},data(){return{displayValue:this.value,isDrawAttention:!1,isValid:!this.required,cleave:null,moduleInputs:null}},computed:{computedPattern(){const t=`{${this.minlength},${this.maxlength}}`;return("number"===this.type?"[0-9\\s]":".")+t}},activated(){this.onComponentMounted()},created(){this.moduleInputs=Air.import("module.inputs")},mounted(){this.onComponentMounted()},beforeDestroy(){this.moduleInputs.destroyVisibleIn(this.$refs.label)},methods:{onComponentMounted(){const{input:t}=this.$refs;this.autofocus&&t.focus(),Object.keys(this.mask).length&&!this.cleave&&(this.cleave=new i.default(t,this.mask),this.realignCursor()),this.isValid=!this.required||""!==t.value.trim()&&t.validity.valid,this.moduleInputs.processVisibleIn(this.$refs.label)},onBlur(){const{input:t}=this.$refs;setTimeout(()=>{this.required&&t&&""!==t.value.trim()&&!t.validity.valid&&(this.isDrawAttention=!0,setTimeout(()=>{this.isDrawAttention=!1},820)),this.$emit("blur",this.isDrawAttention)},0)},onFocus(){this.$emit("focus")},onInput(){const{input:t}=this.$refs;setTimeout(()=>{const e=this.cleave?this.cleave.getRawValue():t.value.trim();this.required?this.isValid=""!==e&&t.validity.valid:this.isValid=!0,this.displayValue=this.cleave?this.cleave.properties.result:t.value,this.realignCursor(),this.$emit("input",e)},10)},onEnter(){this.$emit("submit")},realignCursor(){if(this.cleave&&this.cleave.properties.prefix&&this.cleave.properties.tailPrefix){const{input:t}=this.$refs;t.selectionStart>=t.value.length&&this.setCursor(t.value.length-this.cleave.properties.prefix.length)}},setCursor(t){const{input:e}=this.$refs;setTimeout(()=>{e.focus(),e.setSelectionRange(t,t)},0)},setValue(t,e=!0){const{input:n}=this.$refs;this.cleave?this.cleave.setRawValue(t):n.value=t,setTimeout(()=>{this.required?this.isValid=""!==t&&n.validity.valid:this.isValid=!0,this.displayValue=this.cleave?this.cleave.properties.result:n.value,e&&this.$emit("input",t)},10)},checkAutofillAnimation(t){["onAutoFillStart","onAutoFillEnd"].includes(t.animationName)&&this.onInput()}}},s=(n(538),n(10)),l=Object(s.a)(r,a,[],!1,null,null,null);l.options.__file="src/Components/Ui/vue/form/form-input.vue";e.a=l.exports},538:function(t,e,n){"use strict";n(530)},539:function(t,e,n){(e=n(30)(!1)).push([t.i,".v-form-input {\n  display: block;\n}\n.v-form-input__label {\n  margin-bottom: 8px;\n  color: #595959;\n}\n.v-form-input__error {\n  margin-top: 15px;\n  color: #e52e3a;\n}\n.v-form-input__note {\n  margin-top: 8px;\n  font-size: 12px;\n  line-height: 1.33em;\n  color: #595959;\n}\n.v-form-input input {\n  height: 34px;\n  background-color: #fff;\n  border: 1px solid rgba(0,0,0,0.13);\n  border-top-color: rgba(0,0,0,0.29);\n  padding: 0 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  font-size: 15px;\n  line-height: 1.5em;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  outline: 0;\n}\n.v-form-input input::-webkit-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::-moz-placeholder {\n  color: #595959;\n}\n.v-form-input input:-ms-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::-ms-input-placeholder {\n  color: #595959;\n}\n.v-form-input input::placeholder {\n  color: #595959;\n}\n.v-form-input input:focus {\n  border-color: #4683d9;\n}\n.v-form-input--icon {\n  position: relative;\n}\n.v-form-input--icon input {\n  padding-right: 30px;\n}\n.v-form-input--icon .icon {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  color: #595959;\n}\n.v-form-input--error input {\n  border-color: #e52e3a;\n}\n.v-form-input--disabled input {\n  background-color: #f6f6f6;\n  border: 1px solid rgba(0,0,0,0.09);\n}\n.v-form-input-money {\n  margin-top: -8px;\n}\n.v-form-input-money input {\n  height: 48px;\n  font-size: 24px;\n}\n/** Chrome autofill hack  */\n.v-form-input input:-webkit-autofill {\n  -webkit-animation-name: onAutoFillStart;\n  animation-name: onAutoFillStart;\n}\n.v-form-input input:not(:-webkit-autofill) {\n  -webkit-animation-name: onAutoFillEnd;\n  animation-name: onAutoFillEnd;\n}\n@-moz-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-webkit-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-o-keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@keyframes onAutoFillStart {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-moz-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-webkit-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@-o-keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n@keyframes onAutoFillEnd {\nfrom {\n    opacity: 1;\n}\nto {\n    opacity: 1;\n}\n}\n",""]),t.exports=e},675:function(t,e,n){var a=n(793);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(31).default)("becd2cee",a,!1,{})},792:function(t,e,n){"use strict";n(675)},793:function(t,e,n){(e=n(30)(!1)).push([t.i,".v-form-card[data-v-0b6901de] {\n  margin-top: 24px;\n}\n.legal[data-v-0b6901de] {\n  display: -ms-flexbox;\n  display: flex;\n}\n.legal[data-v-0b6901de] .icon {\n  margin-left: 30px;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin-top: 3px;\n}\n",""]),t.exports=e},805:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"donate-payment"},[n("layout-form",{attrs:{title:t.formTitle,"is-loading":t.isLoading},scopedSlots:t._u([{key:"footer",fn:function(){return[n("ui-button",{attrs:{type:"5"},on:{click:function(e){return t.$emit("close")}}},[n("translate",[t._v("\n          Cancel\n        ")])],1),t._v(" "),n("ui-button",{attrs:{loading:t.isLoading,disabled:t.value<=0||!t.cardData},on:{click:t.confirmCard}},[n("translate",[t._v("\n          Submit\n        ")])],1)]},proxy:!0},{key:"legal",fn:function(){return[n("div",{staticClass:"legal"},[n("p",[n("translate",[t._v("\n            By attaching money to a comment, you agree to all\n          ")]),t._v(" "),n("a",{attrs:{href:"/terms",target:"_blank"}},[n("translate",{attrs:{"translate-context":"To agree to"}},[t._v("\n              terms\n            ")])],1),t._v(" "),n("translate",[t._v("\n            and\n          ")]),t._v(" "),n("a",{attrs:{href:"/agreement",target:"_blank"}},[n("translate",{attrs:{"translate-context":"To agree to"}},[t._v("\n              conditions\n            ")])],1),t._v(" "),n("translate",[t._v("\n            of use of the site.\n          ")])],1),t._v(" "),n("icon",{attrs:{name:"ui_pci",width:"48",height:"30"}})],1)]},proxy:!0}])},[n("layout-receipt",{attrs:{items:t.receiptItems}}),t._v(" "),n("form-card",{ref:"cardForm",attrs:{"public-key":t.details.cp_public},model:{value:t.cardData,callback:function(e){t.cardData=e},expression:"cardData"}})],1)],1)};a._withStripped=!0;var i=n(543),o=n(620),r=n(529),s=n(621),l=n(557),u=n(26),p=n(568),c={name:"donate-payment",components:{UiButton:i.a,FormCard:o.a,LayoutForm:r.a,LayoutReceipt:s.a,Icon:u.a},props:{store:{type:Object,default(){return this.$store||{}}},details:{type:Object,required:!0},onSuccess:{type:Function,default:()=>!1},onError:{type:Function,default:()=>!1}},data(){return{cardData:null,isLoading:!1,formTitle:this.$gettext("Payment by card")}},computed:{receiptItems(){return[{label:this.$gettext("Money attachment"),value:this.details.donate}]}},methods:{async confirmCard(){if(!this.isLoading){this.isLoading=!0;try{const t=await this.$refs.cardForm.getCryptogramPacket(),e=await Object(p.e)({cryptogram:t,paymentUrl:this.details.payment_url,data:{amount:this.details.donate,email:this.details.email,jwt:this.details.jwt}});this.$popup.open(l.a,{maxWidth:460,props:{title:this.$gettext("Payment succeeded"),text:this.$gettext("It's all good, your payment has been attached. You can go back to the comment now and continue the conversation."),type:"success"}}),this.onSuccess(e)}catch(t){console.error(t),this.$popup.open(l.a,{maxWidth:460,props:{title:this.$gettext("An error has occurred"),text:this.$gettext("Something went wrong, but don't worry. You can go back and try again. As a reminder, transfers from foreign banks cards are not supported at the moment."),errorText:t,type:"error"}}),this.onError(t)}this.isLoading=!1}}}},d=(n(792),n(10)),h=Object(d.a)(c,a,[],!1,null,"0b6901de",null);h.options.__file="src/Components/Donates/vue/attacher/donate-payment.vue";e.a=h.exports}}]);