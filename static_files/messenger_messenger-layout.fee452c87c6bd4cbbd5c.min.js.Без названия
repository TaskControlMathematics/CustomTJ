(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1086:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout",{on:{dragover:e.dragover,drop:e.drop,close:function(t){return e.$emit("close")}},scopedSlots:e._u([e.$store.state.ui.isMiniMessenger?null:{key:"header",fn:function(){return[n("header-channel",{attrs:{channel:e.currentChannel}})]},proxy:!0},{key:"header-right",fn:function(){return[n("etc",{attrs:{items:e.etcItems}})]},proxy:!0},{key:"content",fn:function(){return[n("messages",{attrs:{"messages-loading-blocked":e.messagesLoadingBlocked},on:{retrySendMessage:e.retrySendMessage}})]},proxy:!0},{key:"footer",fn:function(){return[n("chat-bottom",{ref:"bottom",attrs:{channel:e.currentChannel}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropzonePointerShowed,expression:"dropzonePointerShowed"}],staticClass:"chat-dropdown-pointer",on:{dragleave:e.dragleave}},[n("icon-base",{attrs:{"icon-name":"attach",height:20,width:18}},[n("icon-attach")],1),e._v(" "),n("translate",[e._v("\n        Drag a file to upload\n      ")])],1)]},proxy:!0}],null,!0)})};a._withStripped=!0;var s=n(830),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"messagesWrapper",staticClass:"chat-messages",class:{"chat-messages--compact":e.$store.state.ui.isMiniMessenger},on:{"&scroll":function(t){return e.scrolled.apply(null,arguments)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"chat-messages__loader"}),e._v(" "),n("div",{ref:"messagesList",staticClass:"chat-messages__list"},[e._l(e.messages,(function(t,a){return[e.isNeedToAddNewMessagesLabel(a)?n("div",{key:"new-label-"+a,staticClass:"chat-messages__unread-label"},[n("translate",{attrs:{tag:"span"}},[e._v("\n          New\n        ")])],1):e._e(),e._v(" "),e.isNeedToAddDayBreaker(a)?n("div",{key:"day-label-"+a,ref:"dayLabel",refInFor:!0,staticClass:"chat-messages__day"},[n("span",[e._v("\n          "+e._s(e._f("day")(t.dtCreated))+"\n        ")])]):e._e(),e._v(" "),e.isSystemMessage(t)?n("system-message",{key:t.id,attrs:{message:t}}):n("message",e._b({key:t.id,ref:"m-"+t.id,refInFor:!0,on:{retrySendMessage:e.retrySendMessage}},"message",t,!1))]}))],2)])};i._withStripped=!0;var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message",class:{"message--same-author":e.sameAuthor,"message--selected":e.selected,"message--compact":e.$store.state.ui.isMiniMessenger},attrs:{"data-tmp-id":e.idTmp},on:{click:e.messageClicked}},[e.sameAuthor?e._e():n("img",{staticClass:"message__picture",attrs:{src:e._f("fromLeonardo")(e.author.pictureData||e.author.picture,36)}}),e._v(" "),n("div",{staticClass:"message__content"},[e.sameAuthor?e._e():n("div",{staticClass:"message__content-name"},[e._v("\n      "+e._s(e.author.title)+"\n    ")]),e._v(" "),e.replyTo?n("div",{staticClass:"message__content-reply"},[n("div",{staticClass:"message__content-reply-name"},[e._v("\n        "+e._s(e.replyTo.author.title)+"\n      ")]),e._v(" "),e.replyTo.removed?n("span",{staticClass:"message__content-reply-removed"},[n("translate",[e._v("Message is removed")])],1):e._e(),e._v(" "),e.replyTo.text?n("div",{staticClass:"message__content-reply-text"},[e._v("\n        "+e._s(e._f("truncate")(e.replyTo.text,100))+"\n      ")]):[n("span",{staticStyle:{opacity:"0.5"}},[n("icon-base",{attrs:{"icon-name":"attach",height:20,width:18}},[n("icon-attach")],1),e._v(" "),n("translate",[e._v("Picture")])],1)]],2):e._e(),e._v(" "),n("div",{directives:[{name:"linkified",rawName:"v-linkified:options",value:{attributes:{rel:"nofollow noreferrer noindex noopener"}},expression:"{attributes: { rel: 'nofollow noreferrer noindex noopener'}}",arg:"options"}],staticClass:"message__content-text",domProps:{innerHTML:e._s(e.messageText)}}),e._v(" "),e.media&&e.media.length>0?n("message-attaches",{staticClass:"message__content-media",attrs:{media:e.media}}):e._e()],1),e._v(" "),n("div",{staticClass:"message__right"},[e.isMe?n("div",{staticClass:"message__status",class:"message__status--"+e.state},["loading"===e.state?n("span",{staticClass:"message__status-loader"}):"error"===e.state?[n("icon-base",{staticClass:"icon",attrs:{"icon-name":"error",width:16,height:16}},[n("icon-error")],1),e._v(" "),n("span",{staticClass:"message__status-label"},[n("translate",[e._v("Not sent")])],1)]:"read"===e.state?n("icon-base",{staticClass:"icon",attrs:{"icon-name":"read",width:16,height:16}},[n("icon-read")],1):n("icon-base",{staticClass:"icon",attrs:{"icon-name":"delivered",width:16,height:16}},[n("icon-delivered")],1)],2):e._e(),e._v(" "),n("time",{directives:[{name:"show",rawName:"v-show",value:"error"!==e.state,expression:"state !== 'error'"}],staticClass:"message__time",attrs:{title:new Date(1e3*e.dtCreated).toUTCString()}},[e._v("\n      "+e._s(e._f("time")(e.dtCreated))+"\n    ")]),e._v(" "),n("div",{staticClass:"message__actions"},["error"===e.state?n("span",{staticClass:"message__actions-retry",on:{click:function(t){return t.stopPropagation(),e.retrySendMessage.apply(null,arguments)}}},[n("icon-base",{staticClass:"icon",attrs:{"icon-name":"reload",width:16,height:16}},[n("icon-reload")],1),e._v(" "),n("translate",[e._v("Try again")])],1):e._e(),e._v(" "),n("span",{staticClass:"message__actions-select"})])])])};o._withStripped=!0;var r=n(845),c=n(569),l=n(846),d=n(847),p=n(712),m=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M12.767 6.33a.402.402 0 1 1 .66.46l-.994 1.425a.403.403 0 0 1-.553.127l-1.548-.914a.403.403 0 0 1 .41-.693l.87.514a3.7 3.7 0 0 0-3.615-2.943A3.698 3.698 0 0 0 4.305 8a3.697 3.697 0 0 0 3.692 3.694 3.711 3.711 0 0 0 3.184-1.823.403.403 0 1 1 .695.41A4.518 4.518 0 0 1 7.998 12.5 4.504 4.504 0 0 1 3.5 8c0-2.482 2.017-4.5 4.498-4.5a4.506 4.506 0 0 1 4.364 3.41l.405-.58z"}})};m._withStripped=!0;var h=n(10),u=Object(h.a)({},m,[],!1,null,null,null);u.options.__file="src/Components/Messenger/vue/components/icons/icon-reload.vue";var g=u.exports,f=n(598),_=n(587),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-attaches"},e._l(e.media,(function(t,a){return n("div",{key:a,staticClass:"message-attaches__item"},[e.isVideo(t)?n("video",{staticClass:"message-attaches__item-video",style:e.getMediaStyle(t),attrs:{autoplay:"",loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[n("source",{attrs:{src:e.getVideoSrc(t),type:"video/mp4"}})]):n("img",{staticClass:"message-attaches__item-image",style:e.getMediaStyle(t),attrs:{src:e.getImageSrc(t)},on:{click:function(n){return n.stopPropagation(),e.imageClicked(t,n)}}})])})),0)};v._withStripped=!0;var b={name:"message-attaches",props:{media:{type:Array,required:!0}},methods:{isVideo:({type:e,data:t})=>"gif"===t.type,getVideoSrc({type:e,data:t}){let n;return n=t.external_service.mp4_url?t.external_service.mp4_url:`https://leonardo.osnova.io/${t.uuid}/-/format/mp4/`,n},getImageSrc:({type:e,data:t})=>`https://leonardo.osnova.io/${t.uuid}/-/resize/1000`,getMediaStyle({type:e,data:t}){const n=t.height>t.width,a=window.innerWidth<840;let s=a?300:500,i=a?150:300;this.$store.state.ui.isMiniMessenger&&(s=200,i=120);const o=t.width>s,r=t.height>i;let c,l,d;return n?(l=r?i:t.height,d=t.height/l,c=t.width/d):(c=o?s:t.width,d=t.width/c,l=t.height/d),`width: ${c}px; height: ${l}px`},imageClicked(e,t){this.$root.zoomImage(e,t.target)}}},x=(n(1335),Object(h.a)(b,v,[],!1,null,null,null));x.options.__file="src/Components/Messenger/vue/components/chat/message-attaches.vue";var y=x.exports,w=n(570),k={name:"message",components:{IconBase:c.a,IconDelivered:r.a,IconRead:l.a,IconError:d.a,IconAttach:p.a,IconReload:g,MessageAttaches:y},props:{id:{type:String,default:""},idTmp:{type:Number,default:void 0},text:{type:String,default:""},author:{type:Object,default:function(){return{title:"Anonymous",picture:"https://capella.pics/394f1eee-73f2-4522-b3cf-0920ebda9951/crop/80",id:0}}},sameAuthor:{type:Boolean,default:!1},dtCreated:{type:Number,required:!0},status:{type:Number,default:0},replyTo:{type:Object,default:void 0},media:{type:Array,default:()=>[]}},data:()=>({}),computed:{isMe(){return this.$store.state.user.id.toString()===this.author.id.toString()},selected(){return this.$store.state.chat.selectedMessagesIds.includes(this.id||this.idTmp)},state(){if(this.idTmp&&this.status!==_.c.Error)return"loading";switch(this.status){case _.c.Error:return"error";case _.c.Sent:return"sent";case _.c.Delivered:return"delivered";case _.c.Read:return"read"}return""},messageText(){return Object(w.a)(this.text)}},methods:{messageClicked(){if(!1===window.getSelection().isCollapsed)return!0;"loading"!==this.status&&(event.target.nodeType===Node.ELEMENT_NODE&&"A"===event.target.tagName||this.$store.dispatch(f.f,{messageId:this.id||this.idTmp,status:!this.selected}))},retrySendMessage(){this.$emit("retrySendMessage",{idTmp:this.idTmp,text:this.text,replyTo:this.replyTo,media:this.media,status:this.status})}}},C=(n(1337),Object(h.a)(k,o,[],!1,null,null,null));C.options.__file="src/Components/Messenger/vue/components/chat/message.vue";var M=C.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"system-message",class:{"system-message--compact":e.$store.state.ui.isMiniMessenger}},[e.message.type===e.MessageType.CreateChannel?n("create-channel",{attrs:{message:e.message}}):e.message.type===e.MessageType.AddMembers?n("add-members",{attrs:{message:e.message}}):e.message.type===e.MessageType.KickMember?n("kick-member",{attrs:{message:e.message}}):e.message.type===e.MessageType.EditChannel?n("edit-channel",{attrs:{message:e.message}}):e.message.type===e.MessageType.LeaveChannel?n("leave-channel",{attrs:{message:e.message}}):e.message.type===e.MessageType.JoinChannel?n("join-channel",{attrs:{message:e.message}}):n("div",{staticClass:"system-message__unsupported",attrs:{"data-type":e.message.type}},[n("translate",[e._v("\n      Message contains data that cannot be displayed in the current version of messenger\n    ")])],1),e._v(" "),n("pre",{staticStyle:{"text-align":"left","font-size":"11px"},attrs:{hidden:""}},[e._v("    "+e._s(e.message)+"\n  ")])],1)};$._withStripped=!0;var T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.message.params.channel.pictureData?n("ui-photo",{staticClass:"sm-photo",attrs:{id:e.message.params.channel.id,src:e._f("fromLeonardo")(e.message.params.channel.pictureData,72),title:e.message.params.channel.title,size:36}}):e._e(),e._v(" "),n("a",{attrs:{href:"/u/"+e.message.params.user.id,target:"_blank"}},[e._v("\n    "+e._s(e.message.params.user.title)+"\n  ")]),e._v(" "),n("translate",{attrs:{"translate-comment":"Jerom ->created a chat<- along with ..."}},[e._v("\n    created a chat\n  ")]),e._v(" "),n("a",{attrs:{href:"/m/"+e.message.params.channel.id,target:"_blank"}},[e._v("\n    "+e._s(e.message.params.channel.title)+"\n  ")]),e._v(" "),e.message.params.members.length>1?n("div",[n("translate",{attrs:{"translate-comment":"Jerom created a chat ->along with<- ..."}},[e._v("\n      along with\n    ")]),e._v(" "),e._l(e.membersShowed,(function(t,a){return n("a",{key:t.id,attrs:{href:"/u/"+t.id,target:"_blank"}},[e._v("\n      "+e._s(t.title)),a!==e.membersShowed.length-1?[e._v(",")]:e._e()],2)})),e._v(" "),e.membersHidden.length?[n("translate",{attrs:{"translate-n":e.hiddenMembersCount,"translate-plural":"and %{ hiddenMembersCount } more members"}},[e._v("\n        and %{ hiddenMembersCount } more member\n      ")])]:e._e()],2):e._e()],1)};T._withStripped=!0;var S=n(616);var z={name:"message-system-create-channel",components:{UiPhoto:S.a},props:{message:{type:Object,required:!0}},computed:{membersShowed(){return this.message.params.members.filter(e=>e.id!==this.message.params.user.id).slice(0,2)},membersHidden(){return this.message.params.members.filter(e=>e.id!==this.$store.state.user.id.toString()).slice(2)},hiddenMembersCount(){return this.membersHidden.length}}},j=(n(1339),Object(h.a)(z,T,[],!1,null,"efc2e372",null));j.options.__file="src/Components/Messenger/vue/components/chat/message-system-create-channel.vue";var I=j.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{attrs:{href:"/u/"+e.message.params.user.id,target:"_blank"}},[e._v("\n    "+e._s(e.message.params.user.title)+"\n  ")]),e._v(" "),n("translate",[e._v("\n    added\n  ")]),e._v(" "),1===e.members.length?n("a",{attrs:{href:"/m/"+e.members[0].id,target:"_blank"}},[e._v("\n    "+e._s(e.members[0].title)+"\n  ")]):[e._l(e.membersShowed,(function(t,a){return n("a",{key:t.id,attrs:{href:"/u/"+t.id,target:"_blank"}},[e._v("\n      "+e._s(t.title)),a!==e.membersShowed.length-1?[e._v(",")]:e._e()],2)})),e._v(" "),e.membersHidden.length?[n("translate",{attrs:{"translate-n":e.hiddenLen,"translate-plural":"and %{ hiddenLen } more members"}},[e._v("\n        and %{ hiddenLen } more member\n      ")])]:e._e()]],2)};E._withStripped=!0;var O={props:{message:{type:Object,required:!0}},computed:{members(){return this.message.params.members},membersShowed(){return this.message.params.members.slice(0,2)},membersHidden(){return this.message.params.members.filter(e=>e.id!==this.$store.state.user.id.toString()).slice(2)},hiddenLen(){return this.membersHidden.length}}},L=Object(h.a)(O,E,[],!1,null,null,null);L.options.__file="src/Components/Messenger/vue/components/chat/message-system-add-members.vue";var A=L.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{attrs:{href:"/u/"+e.message.params.user.id,target:"_blank"}},[e._v("\n    "+e._s(e.message.params.user.title)+"\n  ")]),e._v(" "),n("translate",{attrs:{"translate-context":"Messenger system message about member removing","translate-comment":"Jerom removed Anya"}},[e._v("\n    removed\n  ")]),e._v(" "),n("a",{attrs:{href:"/m/"+e.member.id,target:"_blank"}},[e._v("\n    "+e._s(e.member.title)+"\n  ")])],1)};R._withStripped=!0;var B={props:{message:{type:Object,required:!0}},computed:{member(){return this.message.params.member}}},P=Object(h.a)(B,R,[],!1,null,null,null);P.options.__file="src/Components/Messenger/vue/components/chat/message-system-kick-member.vue";var D=P.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.picture?n("ui-photo",{staticClass:"sm-photo",attrs:{src:e._f("fromLeonardo")(e.picture,72),color:e.picture.data.color,size:36}}):e._e(),e._v(" "),n("a",{attrs:{href:"/u/"+e.message.params.user.id,target:"_blank"}},[e._v("\n    "+e._s(e.message.params.user.title)+"\n  ")]),e._v("\n  "+e._s(e.text)+"\n  "),e.title?n("span",{staticClass:"bold"},[e._v("\n    "+e._s(e.title)+"\n  ")]):e._e()],1)};U._withStripped=!0;var H={name:"message-system-create-channel",components:{UiPhoto:S.a},props:{message:{type:Object,required:!0}},computed:{title(){return this.message.params.title},picture(){return this.message.params.picture},text(){return this.title&&this.picture?this.$gettext("changed chat picture and title for"):this.title&&!this.picture?this.$gettext("changed chat title for"):this.picture&&!this.title?this.$gettext("changed chat picture"):""}}},N=(n(1341),Object(h.a)(H,U,[],!1,null,"932a1cd6",null));N.options.__file="src/Components/Messenger/vue/components/chat/message-system-edit-channel.vue";var V=N.exports,q=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("a",{attrs:{href:"/u/"+this.message.params.user.id,target:"_blank"}},[this._v("\n    "+this._s(this.message.params.user.title)+"\n  ")]),this._v(" "),t("translate",[this._v("left chat")])],1)};q._withStripped=!0;var F={props:{message:{type:Object,required:!0}},computed:{member(){return this.message.params.member}}},G=Object(h.a)(F,q,[],!1,null,null,null);G.options.__file="src/Components/Messenger/vue/components/chat/message-system-leave-channel.vue";var W=G.exports,Y=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("a",{attrs:{href:"/u/"+this.message.params.user.id,target:"_blank"}},[this._v("\n    "+this._s(this.message.params.user.title)+"\n  ")]),this._v(" "),t("translate",[this._v("joined chat")])],1)};Y._withStripped=!0;var Z={props:{message:{type:Object,required:!0}},computed:{member(){return this.message.params.user}}},J=Object(h.a)(Z,Y,[],!1,null,null,null);J.options.__file="src/Components/Messenger/vue/components/chat/message-system-join-channel.vue";var K={name:"message-system",components:{CreateChannel:I,AddMembers:A,KickMember:D,EditChannel:V,LeaveChannel:W,JoinChannel:J.exports},props:{message:{type:Object,required:!0}},created(){this.MessageType=_.d}},X=(n(1343),Object(h.a)(K,$,[],!1,null,"265357f0",null));X.options.__file="src/Components/Messenger/vue/components/chat/message-system.vue";var Q=X.exports,ee=n(575);class te{constructor({stickyElement:e,position:t,callback:n}){this.elements=Array.isArray(e)?e:[e],this.position=t||te.Position.Top,this.originalStyle=[],this.elements.forEach(e=>this.trickStyle(e)),this.observer=new IntersectionObserver(e=>{for(const t of e){const e=t.boundingClientRect.bottom===t.intersectionRect.bottom,a=t.boundingClientRect.top===t.intersectionRect.top;let s=!1;s=this.position===te.Position.Top?t.intersectionRatio<1&&e:t.intersectionRatio<1&&a,n(t.target,s)}},{threshold:[1]}),this.elements.forEach(e=>this.observer.observe(e))}trickStyle(e){const t={};this.position===te.Position.Top?(t.top="-1px",t.paddingTop="1px"):(t.bottom="-1px",t.paddingBottom="1px");const n={element:e,styles:{}};Object.entries(t).forEach(([t,a])=>{n.styles[t]=e.style[t],e.style[t]=a}),this.originalStyle.push(n)}trickStyleBack(e){const t=this.originalStyle.findIndex(({element:t})=>t===e);if(-1===t)return;const n=this.originalStyle[t];Object.entries(n.styles).forEach(([t,n])=>{e.style[t]=n}),this.originalStyle.splice(t,1)}static get Position(){return{Top:0,Bottom:1}}destroy(){this.observer.disconnect(),this.observer=null,this.elements.forEach(e=>this.trickStyleBack(e)),this.elements=null,this.position=null}}let ne=null,ae=null;var se={name:"messages",components:{Message:M,SystemMessage:Q},props:{messagesLoadingBlocked:Boolean},data:()=>({isLoading:!1,prevMessagesCount:0,prevUpperMessage:null,resizeDebounce:null,selectedIds:[],userReplied:!1}),computed:{currentChannelId(){return this.$store.state.chat.currentChannelId},currentChannel(){return this.$store.getters.currentChannel},messages(){return this.$store.getters.messages},minimized(){return this.$store.state.global.minimized},isScrollAtEnd:{cache:!1,get(){const{scrollHeight:e,scrollTop:t,clientHeight:n}=this.$refs.messagesWrapper;return e-(t+n)<=5}}},watch:{minimized(e,t){!0===t&&this.onPageVisibilityChange()},messages(){const e=this.messages.length,t=e-this.prevMessagesCount,n=1===t,a=0!==this.prevMessagesCount&&t>0,s=!this.prevMessagesCount&&e>0,i=a&&this.isScrollAtEnd,o=s||i;if(n&&this.isScrollAtEnd){const e=this.messages[this.messages.length-1];setTimeout(()=>{this.scrollToBottom()},20),e&&e.author&&e.author.id.toString()===this.$store.state.user.id.toString()&&(this.userReplied=!0)}else o?setTimeout(()=>{this.scrollToBottom()},80):a&&setTimeout(()=>{this.keepScrollOnPagination()},5);this.prevMessagesCount=e,setTimeout(()=>{this.refreshDatesStickinessObserver()},80)},currentChannelId(){this.recalculateMessagesCount(),this.userReplied=!1}},updated(){this.onPageVisibilityChange()},created(){this.recalculateMessagesCount(),this.userReplied=!1},mounted(){ne=this.windowResize.bind(this),ae=this.onPageVisibilityChange.bind(this),window.addEventListener("resize",ne),document.addEventListener("visibilitychange",ae),this.scrollToBottom()},beforeDestroy(){window.removeEventListener("resize",ne),document.removeEventListener("visibilitychange",ae),ne=null,ae=null,this.sickyObserver&&this.sickyObserver.destroy()},methods:{recalculateMessagesCount(){this.prevMessagesCount=this.messages.length},isSystemMessage:e=>e.type!==_.d.Default,retrySendMessage(e){this.$emit("retrySendMessage",e)},scrolled(e){if(!(this.messages.length<10)){if(this.messagesLoadingBlocked)return console.warn("Prepend locked 💊"),void(this.prevUpperMessage=null);if(0===e.target.scrollTop&&!this.isLoading){if(0===this.messages.length)return;this.isLoading=!0,this.prevUpperMessage=this.messages[0],this.$store.dispatch(f.d,{channelId:this.$store.getters.currentChannel.id,beforeTime:this.messages[0].dtCreated}).then(()=>{setTimeout(()=>{this.isLoading=!1},2e3)})}}},shiftFirstMessages(){const e=this.$refs.messagesWrapper,t=this.$refs.messagesList;e.offsetHeight<=e.scrollHeight?t.style.marginTop=Math.max(e.offsetHeight-t.offsetHeight,0)+"px":t.style.marginTop&&(t.style.marginTop="0")},scrollToBottom(){const e=this.$refs.messagesWrapper;e.scrollTo(0,e.scrollHeight)},keepScrollOnPagination(){if(!this.prevUpperMessage)return;const e=this.$refs.messagesWrapper,t=this.$refs.messagesList,n=this.$refs["m-"+this.prevUpperMessage.id];if(!n||!n[0])return;const a=n[0].$el,s=parseInt(window.getComputedStyle(t).paddingTop),i=a.offsetTop-s-28;e.scrollTo(0,i)},isNeedToAddDayBreaker(e){const t=e>0?this.messages[e-1]:null,n=this.messages[e];if(!t)return!0;return Math.ceil(1e3*t.dtCreated/864e5)!==Math.ceil(1e3*n.dtCreated/864e5)},isNeedToAddNewMessagesLabel(e){const t=e>0?this.messages[e-1]:null,n=this.messages[e],a=this.messages[this.messages.length-1];return!!(a&&a.author&&n.author)&&(a.status!==_.c.Read&&a.author.id!==this.$store.state.user.id&&(n.author.id!==this.$store.state.user.id.toString()&&(!this.userReplied&&(t?n.status===_.c.Delivered&&t.status===_.c.Read:n.status===_.c.Delivered))))},windowResize(){this.resizeDebounce&&clearTimeout(this.resizeDebounce);this.resizeDebounce=setTimeout(()=>{this.scrollToBottom()},100)},onPageVisibilityChange(){if(!this.currentChannel)return;const e=document.hidden,{id:t,unreadCount:n}=this.currentChannel;!e&&!this.minimized&&t&&n>0&&(this.$store.dispatch(ee.g,{channelId:t}),this.$store.dispatch(ee.o,{channelId:t}))},refreshDatesStickinessObserver(){this.sickyObserver&&this.sickyObserver.destroy();const e=this.$refs.dayLabel;e&&(this.sickyObserver=new te({stickyElement:e,position:te.Position.Top,callback:(e,t)=>{t||e.classList.remove("stuckBelow"),e.classList.toggle("stuck",t);const n=this.$refs.dayLabel.filter(e=>e.classList.contains("stuck"));n&&n.forEach((e,t)=>{const a=t===n.length-1;e.classList.toggle("stuckBelow",!a)})}}))}}},ie=(n(1345),Object(h.a)(se,i,[],!1,null,"25fd3942",null));ie.options.__file="src/Components/Messenger/vue/components/chat/messages.vue";var oe=ie.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-header-info",on:{click:e.chatTitleClicked}},[n("ui-photo",{staticClass:"chat-header-info__photo",attrs:{id:e.channel.id,src:e._f("fromLeonardo")(e.channel.pictureData,36),color:e.channel.pictureData&&e.channel.pictureData.data?e.channel.pictureData.data.color:"",title:e.channel.title,size:36}}),e._v(" "),n("div",{staticClass:"chat-header-info__title-wrapper"},[n("span",{staticClass:"chat-header-info__title"},[e._v("\n      "+e._s(e.channel.title)+"\n\n      "),e.channel.isVerified?n("icon-base",{attrs:{"icon-name":"verified",height:14,width:14}},[n("icon-verified")],1):e._e(),e._v(" "),e.channel.isMuted?n("icon-base",{attrs:{"icon-name":"mute",height:16,width:16}},[n("icon-mute")],1):e._e()],1),e._v(" "),e.isGroupChat?n("span",{staticClass:"chat-header-info__subline"},[e.channel.typing?n("typing",{attrs:{user:e.channel.typing}}):[e._v("\n        "+e._s(e.channel.membersCount)+"\n        "),n("translate",{attrs:{"translate-n":e.channel.membersCount,"translate-plural":"members"}},[e._v("\n          member\n        ")])]],2):e.isChatWithSelf?e._e():n("span",{staticClass:"chat-header-info__subline"},[e.channel.typing?n("typing"):e.participant?n("span",[e.isOnline?[n("span",{staticClass:"online"},[e._v("\n            Онлайн\n          ")])]:[e._v("\n          "+e._s(e.participant.lastSeen)+"\n        ")]],2):e._e()],1)])],1)};re._withStripped=!0;var ce=n(713),le=n(842),de=n(728),pe=n(603),me={components:{UiPhoto:S.a,IconBase:c.a,IconMute:ce.a,Typing:le.a,IconVerified:de.a},props:{channel:{type:Object,required:!0}},computed:{participant(){return parseInt(this.channel.id)===this.$store.state.user.id?this.channel.members[0]:this.channel.members.find(e=>e.id!==this.$store.state.user.id.toString())},isGroupChat(){return this.channel.type===_.a.Group},isOnline(){return!!this.participant&&this.$store.getters.isUserOnline(this.participant.id)},isChatWithSelf(){return this.$store.state.user.id.toString()===this.channel.id}},methods:{chatTitleClicked(){if(this.isGroupChat)this.$store.dispatch(pe.b,!0);else{window.open("/u/"+this.participant.id,"_blank").focus()}}}},he=(n(1349),Object(h.a)(me,re,[],!1,null,"f637e9d6",null));he.options.__file="src/Components/Messenger/vue/components/chat/chat-header-channel.vue";var ue=he.exports,ge=n(615),fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.channel.hasBeenKicked?n("bottom-actions",{attrs:{"has-been-kicked":""}}):e.channel.isIgnored?n("bottom-actions",{attrs:{"ignored-type":e.channel.ignoredType,"ignored-user":""}}):e.channel.isBanned?n("bottom-actions",{attrs:{"to-banned-user":""}}):e.$store.state.user.is_banned?n("bottom-actions",{attrs:{"iam-banned-user":""}}):e.channel.pendingAcceptance&&!e.incomingRequestAccepted?n("bottom-actions",{attrs:{"incoming-reply":"","incoming-spam":""},on:{showReply:e.acceptIncomingRequest}}):e.selectedMessages.all.length>0&&!e.messageToReplyId?n("bottom-actions",{attrs:{"selected-messages":e.selectedMessages,"message-to-reply":1===e.selectedMessages.ids.length&&0===e.selectedMessages.tmp.length?e.selectedMessages.ids[0]:null,"remove-messages":e.showRemoveMessageButton,"clear-selection":""},on:{replyToMessage:e.replyToMessage}}):n("chat-form",{key:e.channel.id,ref:"form",attrs:{"message-to-reply-id":e.messageToReplyId},on:{submit:e.beforeSendMessage,clearReply:function(t){e.messageToReplyId=null}}})],1)};fe._withStripped=!0;var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-form",class:{"chat-form--empty":e.isEmpty,"chat-form--compact":e.$store.state.ui.isMiniMessenger}},[e.replyTo?n("div",{staticClass:"chat-form__reply"},[n("div",{staticClass:"chat-form__reply-cancel",on:{click:e.clearReply}},[n("icon-base",{attrs:{"icon-name":"cross",height:12,width:12}},[n("icon-cross")],1)],1),e._v(" "),n("div",{staticClass:"chat-form__reply-body"},[n("div",{staticClass:"chat-form__reply-name"},[e._v("\n        "+e._s(e.replyTo.author.title)+"\n      ")]),e._v(" "),n("div",{staticClass:"chat-form__reply-text"},[e.replyTo.text?[e._v("\n          "+e._s(e.replyTo.text)+"\n        ")]:[n("span",{staticStyle:{opacity:"0.5"}},[n("icon-base",{attrs:{"icon-name":"attach",height:20,width:18}},[n("icon-attach")],1),e._v(" "),n("translate",[e._v("\n              Picture\n            ")])],1)]],2)])]):e._e(),e._v(" "),n("div",{staticClass:"chat-form__form-wrapper"},[n("file-uploader",{staticClass:"chat-form__attach",attrs:{accept:"image/*, video/mp4"},on:{change:e.attachFiles}},[n("icon-base",{attrs:{"icon-name":"attach",height:20,width:20}},[n("icon-attach")],1)],1),e._v(" "),n("div",{staticClass:"chat-form__content"},[n("textarea",{ref:"textarea",staticClass:"chat-form__textarea",attrs:{placeholder:e.textareaPlaceholder,rows:"1",maxlength:"3000"},on:{keydown:[e.keydown,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterPressed.apply(null,arguments)}],input:e.valueChanged,paste:e.onPaste}},[e._v(e._s(e.messageDraft))]),e._v(" "),e.attachesUploading.length>0||e.attaches.length>0?n("form-attaches",{attrs:{uploading:e.attachesUploading,items:e.attaches},on:{remove:e.removeAttach,removeUploading:e.removeAttachUploading}}):e._e()],1),e._v(" "),n("form-emoji",{ref:"emoji",on:{emojiSelected:e.insertEmoji}}),e._v(" "),e.$store.state.ui.isMiniMessenger?e._e():n("span",{class:{"chat-form__send":!0,"chat-form__send--disabled":e.isEmpty||e.attachesUploading.length>0},on:{click:e.sendClicked}},[n("icon-base",{attrs:{"icon-name":"send",width:28,height:28}},[n("icon-send")],1)],1)],1)])};_e._withStripped=!0;var ve=n(626),be=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{"fill-rule":"evenodd",d:"M14 0C6.268 0 0 6.268 0 14s6.268 14 14 14 14-6.268 14-14S21.732 0 14 0zm.633 7.292l6.152 6.026a.716.716 0 0 1 .01 1.014.719.719 0 0 1-1.016.01l-5.053-4.95v10.85c0 .418-.322.758-.718.758-.397 0-.718-.34-.718-.758V9.474l-5.06 4.883c-.688.664-1.687-.367-.998-1.032l6.262-6.043a.687.687 0 0 1 .031-.036l.017-.018a.72.72 0 0 1 .163-.124c.34-.212.718-.077.928.188z","clip-rule":"evenodd"}})};be._withStripped=!0;var xe=Object(h.a)({},be,[],!1,null,null,null);xe.options.__file="src/Components/Messenger/vue/components/icons/icon-send.vue";var ye=xe.exports,we=n(1088),ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-attaches"},[e._l(e.items,(function(t,a){return n("div",{key:a,staticClass:"form-attaches__item",style:e.getAttachPreviewStyle(t)},[n("remover",{on:{click:function(t){return e.$emit("remove",a)}}})],1)})),e._v(" "),e._l(e.uploading,(function(t,a){return n("div",{key:a,staticClass:"form-attaches__item form-attaches__item--loading",style:e.getUploadingPreviewStyle(t)},[n("remover",{on:{click:function(t){return e.$emit("removeUploading",a)}}})],1)}))],2)};ke._withStripped=!0;var Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"remover",on:{click:function(t){return e.$emit("click")}}},[n("icon-base",{attrs:{"icon-name":"cross",width:12,height:12}},[n("icon-cross")],1)],1)};Ce._withStripped=!0;var Me={name:"remover",components:{IconBase:c.a,IconCross:ve.a}},$e=(n(1351),Object(h.a)(Me,Ce,[],!1,null,null,null));$e.options.__file="src/Components/Messenger/vue/components/common/remover.vue";var Te={name:"form-attaches",components:{Remover:$e.exports},props:{items:{type:Array,required:!0},uploading:{type:Array,default:()=>[]}},methods:{getAttachPreviewStyle:({type:e,data:t})=>`background-color: #${t.color}; background-image: url(https://leonardo.osnova.io/${t.uuid}/-/scale_crop/120/)`,getUploadingPreviewStyle:e=>`background-image: linear-gradient(45deg, rgba(0,0,0,.7), rgba(0,0,0,.7)), url(${e})`}},Se=(n(1353),Object(h.a)(Te,ke,[],!1,null,null,null));Se.options.__file="src/Components/Messenger/vue/components/chat/form-attaches.vue";var ze=Se.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePanel,expression:"closePanel"}],staticClass:"emoji-picker no-tap"},[n("div",{staticClass:"emoji-picker__invoker no-tap",on:{click:e.togglePanel}},[n("icon-base",{attrs:{"icon-name":"smile",width:20,height:20}},[n("icon-smile")],1)],1),e._v(" "),e.panelOpened?n("div",{staticClass:"emoji-picker__panel",class:{"emoji-picker__panel--loading":!e.emojiList,"emoji-picker__panel--safari":e.isSafari()}},[e.emojiList?[n("div",{staticClass:"emoji-picker__tabs"},e._l(e.tabs,(function(t){return n("span",{key:t.name,staticClass:"no-tap",class:{active:t.name===e.currentSection},on:{click:function(n){return e.scrollToSection(t.scrollTo)}}},[n("icon-base",{attrs:{"icon-name":t.icon,width:22,height:22}},[n("icon-"+t.icon,{tag:"component"})],1)],1)})),0),e._v(" "),n("div",{staticClass:"emoji-picker__panel-list",on:{"&scroll":function(t){return e.panelScrolled.apply(null,arguments)}}},e._l(e.sections,(function(t){return n("section",{key:t,ref:t,refInFor:!0,staticClass:"emoji-picker__panel-list-section"},[n("div",{staticClass:"emoji-picker__panel-list-section-name"},[e._v("\n            "+e._s(t)+"\n          ")]),e._v(" "),n("div",{staticClass:"emoji-picker__panel-list-section-grid"},e._l(e.getSection(t),(function(t){var a=t[0],s=t[1];return n("span",{key:a,staticClass:"no-tap",on:{click:function(t){return t.preventDefault(),e.emojiClicked(s,t)}}},[e._v(e._s(s))])})),0)])})),0)]:e._e()],2):e._e()])};je._withStripped=!0;var Ie=function(){var e=this.$createElement,t=this._self._c||e;return t("g",[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5a10 10 0 100-20 10 10 0 000 20z"}}),this._v(" "),t("circle",{attrs:{cx:"7.22",cy:"8.44",r:"1.67"}}),this._v(" "),t("circle",{attrs:{cx:"12.78",cy:"8.44",r:"1.67"}}),this._v(" "),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.75 13.5c0-.41.34-.75.75-.75h7a.75.75 0 010 1.5h-7a.75.75 0 01-.75-.75z"}})])};Ie._withStripped=!0;var Ee=Object(h.a)({},Ie,[],!1,null,null,null);Ee.options.__file="src/Components/Messenger/vue/components/icons/icon-smile.vue";var Oe=Ee.exports,Le=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M11 0a11 11 0 110 22 11 11 0 010-22zm0 2a9 9 0 100 18 9 9 0 000-18zm0 10h4a1 1 0 010 2h-5a1 1 0 01-1-1V7a1 1 0 112 0v5z","fill-rule":"nonzero"}})};Le._withStripped=!0;var Ae=Object(h.a)({},Le,[],!1,null,null,null);Ae.options.__file="src/Components/Messenger/vue/components/icons/icon-recent.vue";var Re=Ae.exports,Be=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M11 22a11 11 0 110-22 11 11 0 010 22zm0-2a9 9 0 100-18 9 9 0 000 18zm-4.97-6h9.94c-.28 2.25-2.4 4-4.97 4s-4.7-1.75-4.97-4zm2.47-2a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z","fill-rule":"nonzero"}})};Be._withStripped=!0;var Pe=Object(h.a)({},Be,[],!1,null,null,null);Pe.options.__file="src/Components/Messenger/vue/components/icons/icon-people.vue";var De=Pe.exports,Ue=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M21.36 12.22c0 5.17-3.29 8.43-9.86 9.78-6.57-1.35-9.86-4.6-9.86-9.78 0-1.07.09-2.02.24-2.89A5.27 5.27 0 010 5.3 5.35 5.35 0 019.88 2.5a18.92 18.92 0 013.24 0A5.35 5.35 0 0123 5.3c0 1.61-.73 3.06-1.88 4.03.15.87.24 1.82.24 2.9zm-2 0a14 14 0 00-.21-2.52l-.21-1.15.89-.74A3.27 3.27 0 0021 5.3a3.34 3.34 0 00-6.18-1.73l-.65 1.04-1.22-.1a16.92 16.92 0 00-2.9 0l-1.22.1-.65-1.04A3.34 3.34 0 005.34 2 3.32 3.32 0 002 5.3c0 .97.43 1.88 1.17 2.5l.9.75-.22 1.15a14 14 0 00-.2 2.52c0 4.03 2.42 6.53 7.85 7.74 5.43-1.21 7.86-3.71 7.86-7.74zM8.5 13a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm6 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm-3 6a2.5 2.5 0 110-5 2.5 2.5 0 010 5z","fill-rule":"nonzero"}})};Ue._withStripped=!0;var He=Object(h.a)({},Ue,[],!1,null,null,null);He.options.__file="src/Components/Messenger/vue/components/icons/icon-animal.vue";var Ne=He.exports,Ve=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M11 22a11 11 0 110-22 11 11 0 010 22zM2.42 8.27A11 11 0 0110.96 20H11a9 9 0 008.23-5.35A11 11 0 0111.18 2H11a9 9 0 00-8.58 6.27zm-.39 1.96a9 9 0 006.94 9.54 9 9 0 00-6.94-9.54zm11.14-7.97a9 9 0 006.66 10.47 9 9 0 00-6.66-10.47z","fill-rule":"evenodd"}})};Ve._withStripped=!0;var qe=Object(h.a)({},Ve,[],!1,null,null,null);qe.options.__file="src/Components/Messenger/vue/components/icons/icon-objects.vue";var Fe=qe.exports,Ge=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M8.94 17.89a1 1 0 001.04-.1l.2-.16a3 3 0 01.82-.44V8h2v9.19a3 3 0 01.82.44l.2.15a1 1 0 001.04.1L18 12h2l-2.51 5.02a3 3 0 011.58.6l.2.16a1 1 0 001.21 0l2.2-1.68 1.22 1.59-2.2 1.68a3 3 0 01-3.64 0l-.2-.15a1 1 0 00-1.22 0l-.2.15a3 3 0 01-3.63 0l-.2-.15a1 1 0 00-1.22 0l-.2.15a3 3 0 01-3.63 0l-.2-.15a1 1 0 00-1.22 0l-.2.15a3 3 0 01-3.63 0L.1 17.7l1.21-1.6 2.2 1.7a1 1 0 001.22 0l.2-.16a3 3 0 011.58-.6L4 12h.01L7 10.29V5a1 1 0 011-1h1V1a1 1 0 011-1h4a1 1 0 011 1v3h1a1 1 0 011 1v5.3l3 1.73-2.32.62L13 9.9l-1-.95-1 .95-4.75 2.58h-.01l2.7 5.4zM15 9.15V6H9v3.14L11 8l1-.5 1 .5 2 1.15zM11 4h2V2h-2v2z","fill-rule":"nonzero"}})};Ge._withStripped=!0;var We=Object(h.a)({},Ge,[],!1,null,null,null);We.options.__file="src/Components/Messenger/vue/components/icons/icon-boat.vue";var Ye=We.exports,Ze=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M8.97 0h4.06c3.12 0 4.25.32 5.39.93a6.36 6.36 0 012.65 2.65c.6 1.14.93 2.27.93 5.4v4.05c0 3.12-.32 4.25-.93 5.39a6.36 6.36 0 01-2.65 2.65c-1.14.6-2.27.93-5.4.93H8.98c-3.12 0-4.25-.32-5.39-.93a6.36 6.36 0 01-2.65-2.65c-.6-1.14-.93-2.27-.93-5.4V8.98c0-3.12.32-4.25.93-5.39A6.36 6.36 0 013.58.93C4.72.33 5.85 0 8.98 0zm0 2c-2.54 0-3.48.18-4.45.7-.79.42-1.4 1.03-1.82 1.82-.52.97-.7 1.91-.7 4.45v4.06c0 2.54.18 3.48.7 4.45.42.79 1.03 1.4 1.82 1.82.97.52 1.91.7 4.45.7h4.06c2.54 0 3.48-.18 4.45-.7.79-.42 1.4-1.03 1.82-1.82.52-.97.7-1.91.7-4.45V8.97c0-2.54-.18-3.48-.7-4.45a4.36 4.36 0 00-1.82-1.82c-.97-.52-1.91-.7-4.45-.7H8.97zm1.47 11.6l4.95-4.95a1 1 0 011.41 1.41l-5.65 5.66a1 1 0 01-1.42 0L5.5 11.47a1 1 0 111.41-1.4l3.54 3.53z","fill-rule":"nonzero"}})};Ze._withStripped=!0;var Je=Object(h.a)({},Ze,[],!1,null,null,null);Je.options.__file="src/Components/Messenger/vue/components/icons/icon-symbols.vue";var Ke=Je.exports,Xe={name:"form-emoji",components:{IconBase:c.a,IconSmile:Oe,IconRecent:Re,IconPeople:De,IconAnimal:Ne,IconObjects:Fe,IconBoat:Ye,IconSymbols:Ke},data:()=>({panelOpened:!1,emojiList:null,currentSection:null}),computed:{sections(){return Object.keys(this.emojiList)},tabs(){const e={[this.$gettext("Frequently used")]:"recent",[this.$gettext("People")]:"people",[this.$gettext("Nature")]:"animal",[this.$gettext("Objects")]:"objects",[this.$gettext("Travel")]:"boat",[this.$gettext("Symbols")]:"symbols"};return this.sections.map(t=>({name:t,scrollTo:t,icon:e[t]}))},sectionsTopCoordinates(){return Object.entries(this.$refs).filter(([e])=>this.sections.includes(e)).map(([e,[t]])=>({name:e,topX:t.offsetTop,height:t.offsetHeight}))}},methods:{async togglePanel(){this.panelOpened=!this.panelOpened,this.emojiList||(this.emojiList=await this.loadEmoji())},closePanel(){this.panelOpened=!1},async loadEmoji(){const{default:e}=await n.e(51).then(n.bind(null,1667));return e},getSection(e){return Object.entries(this.emojiList[e])},emojiClicked(e,t){this.$emit("emojiSelected",e),t.target.classList.add("clicked");setTimeout(()=>{t.target.classList.remove("clicked")},500)},scrollToSection(e){this.$refs[e][0].scrollIntoView()},panelScrolled(e){const t=e.target.scrollTop;if(t<=0)return void(this.currentSection=this.sections[0]);const n=this.sectionsTopCoordinates.reverse().find(({name:e,topX:n,height:a})=>t>=n&&t<n+a);n&&(this.currentSection=n.name)},isSafari:()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},Qe=(n(1355),Object(h.a)(Xe,je,[],!1,null,"5abe2cd0",null));Qe.options.__file="src/Components/Messenger/vue/components/chat/form-emoji.vue";var et=Qe.exports,tt={name:"chat-form",components:{IconBase:c.a,IconCross:ve.a,IconAttach:p.a,IconSend:ye,FileUploader:we.a,FormAttaches:ze,FormEmoji:et},props:{messageToReplyId:{type:String,default:void 0}},data(){const{draft:e}=this.$store.getters.currentChannel;return{typingDebounce:null,lastTypingTime:0,messageChangingDebounce:null,isEmptyText:!e.text,messageDraft:e.text,attaches:[...e.media],attachesUploading:[],textareaPlaceholder:this.$gettext("Message")}},computed:{replyTo(){return this.messageToReplyId?this.$store.getters.messages.find(e=>e.id===this.messageToReplyId):null},isEmpty(){return this.isEmptyText&&!this.attaches.length}},mounted(){const e=this.$refs.textarea;setTimeout(()=>{e.focus(),e.setSelectionRange(e.value.length,e.value.length)},120)},methods:{enterPressed(e){if(!e.shiftKey){if(this.isEmpty)return!1;this.submit(e.target.value),e.preventDefault()}},sendClicked(){const e=this.$refs.textarea;this.submit(e.value)},submit(e){if(this.isEmpty)return!1;this.$emit("submit",{message:e,replyTo:this.messageToReplyId,media:this.attaches}),this.$store.dispatch(ee.E,{channelId:this.$store.state.chat.currentChannelId,value:{text:"",media:[]}}),this.$refs.textarea.value="",this.$refs.textarea.focus(),this.attaches=[],this.attachesUploading=[],this.isEmptyText=!0,this.$refs.emoji.closePanel(),setTimeout(()=>{this.autoresize(event)},0)},keydown(e){if(!Object(w.c)(e.keyCode))return;const t=(new Date).getTime();t-this.lastTypingTime>2e3&&(this.lastTypingTime=t,this.$store.dispatch(f.c)),this.typingDebounce&&clearTimeout(this.typingDebounce),this.typingDebounce=setTimeout(()=>{this.lastTypingTime=t},500)},valueChanged(){this.autoresize();this.messageChangingDebounce&&clearTimeout(this.messageChangingDebounce),this.messageChangingDebounce=setTimeout(()=>{this.saveDraft()},100)},saveDraft(){const e=this.$refs.textarea.value;this.$store.dispatch(ee.E,{channelId:this.$store.state.chat.currentChannelId,value:{text:e,media:[...this.attaches]}})},autoresize(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,150)+"px",this.isEmptyText=0===e.value.replace("\n","").trim().length},clearReply(){this.$emit("clearReply")},attachFiles(e){for(let t=0;t<e.length;t++){const n=new FileReader;n.readAsDataURL(e[t]),n.onload=e=>{this.attachesUploading.push(e.target.result)}}this.$store.dispatch(f.i,{files:e}).then(e=>{e.forEach(e=>{0!==this.attachesUploading.length&&("error"===e.type?console.warn("Andropov returns ERROR",e):(this.attaches.push(e),this.saveDraft()),this.attachesUploading=[])})})},removeAttach(e){this.attaches.splice(e,1),this.saveDraft()},removeAttachUploading(e){this.attachesUploading.splice(e,1)},removeAllAttaches(){this.attaches=[],this.attachesUploading=[]},onPaste(e){const t=(e.clipboardData||e.originalEvent.clipboardData).items;if(!t.length)return;this.attaches.length+this.attachesUploading.length>=1||this.handlePastedFiles(t)},handlePastedFiles(e){const t=Array.from(e).filter(e=>"file"===e.kind).map(e=>e.getAsFile());t.length&&this.attachFiles(t)},insertEmoji(e){const t=this.$refs.textarea.selectionStart;let n;if(t>0){const a=this.$refs.textarea.value;this.$refs.textarea.value=a.substring(0,t)+e+a.substring(t),n=t+e.length}else this.$refs.textarea.value+=e,n=this.$refs.textarea.value.length;this.$refs.textarea.setSelectionRange(n,n),this.isEmptyText=!1}}},nt=(n(1357),Object(h.a)(tt,_e,[],!1,null,"1ea42f52",null));nt.options.__file="src/Components/Messenger/vue/components/chat/form.vue";var at=nt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-bottom-actions",class:{"chat-bottom-actions--compact":e.$store.state.ui.isMiniMessenger}},[e.hasBeenKicked?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--disabled"},[n("icon-base",{attrs:{"icon-name":"block",height:14,width:14}},[n("icon-block")],1),e._v(" "),n("translate",[e._v("\n      You are not a member anymore\n    ")])],1):e._e(),e._v(" "),e.ignoredUser?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--disabled"},[n("icon-base",{attrs:{"icon-name":"block",height:14,width:14}},[n("icon-block")],1),e._v(" "),n("translate",[e._v("\n      Chat history is not available\n    ")])],1):e._e(),e._v(" "),e.toBannedUser?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--disabled"},[n("icon-base",{attrs:{"icon-name":"block",height:14,width:14}},[n("icon-block")],1),e._v(" "),n("translate",[e._v("\n      User is blocked\n    ")])],1):e._e(),e._v(" "),e.iamBannedUser?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--disabled"},[n("icon-base",{attrs:{"icon-name":"block",height:14,width:14}},[n("icon-block")],1),e._v(" "),n("translate",[e._v("\n      You can't send and receive messages\n    ")])],1):e._e(),e._v(" "),e.incomingReply?n("span",{staticClass:"chat-bottom-actions__button",on:{click:e.acceptChannel}},[n("icon-base",{staticStyle:{"margin-bottom":"-1px"},attrs:{"icon-name":"reply",height:12,width:16}},[n("icon-reply")],1),e._v(" "),n("translate",[e._v("\n      Reply\n    ")])],1):e._e(),e._v(" "),e.incomingSpam?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--red",on:{click:e.blockChannel}},[n("icon-base",{attrs:{"icon-name":"block",height:14,width:14}},[n("icon-block")],1),e._v(" "),n("translate",[e._v("\n      Mark as spam\n    ")])],1):e._e(),e._v(" "),e.messageToReply?n("span",{staticClass:"chat-bottom-actions__button",on:{click:e.replyToMessage}},[n("icon-base",{staticStyle:{"margin-bottom":"-1px"},attrs:{"icon-name":"reply",height:12,width:16}},[n("icon-reply")],1),e._v(" "),n("translate",[e._v("\n      Reply\n    ")])],1):e._e(),e._v(" "),e.removeMessages?n("span",{staticClass:"chat-bottom-actions__button chat-bottom-actions__button--red",on:{click:e.removeSomeMessages}},[n("icon-base",{staticStyle:{"margin-bottom":"0"},attrs:{"icon-name":"remove",height:16,width:16}},[n("icon-remove")],1),e._v(" "),n("translate",[e._v("\n      Remove\n    ")])],1):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedMessages.all.length>0&&!e.ignoredUser,expression:"selectedMessages.all.length > 0 && !ignoredUser"}],staticClass:"chat-bottom-actions__right"},[n("span",{staticClass:"chat-bottom-actions__right-label"},[e._v("\n      "+e._s(e.selectedMessages.all.length)+"\n      "),n("translate",{attrs:{"translate-n":e.selectedMessages.all.length,"translate-plural":"messages"}},[e._v("\n        message\n      ")])],1),e._v(" "),e.clearSelection?n("span",{staticClass:"chat-bottom-actions__right-button chat-bottom-actions__right-button--deselect",on:{click:e.clearMessageSelected}},[n("icon-base",{staticStyle:{"margin-bottom":"-1px"},attrs:{"icon-name":"cross",height:12,width:12}},[n("icon-cross")],1),e._v(" "),n("span",{staticClass:"chat-bottom-actions__right-label"},[n("translate",[e._v("\n          Clear selection\n        ")])],1)],1):e._e()])])};st._withStripped=!0;var it=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M7 0C3.14027 0 0 3.14027 0 7C0 10.8597 3.14027 14 7 14C10.8597 14 14 10.8597 14 7C14 3.14027 10.8597 0 7 0ZM7 12.25C4.10525 12.25 1.75 9.89475 1.75 7C1.75 5.89515 2.08496 4.85067 2.72185 3.95943L10.0406 11.2781C9.14933 11.915 8.10485 12.25 7 12.25ZM11.2781 10.0406L3.95943 2.72185C4.85067 2.08496 5.89515 1.75 7 1.75C9.89475 1.75 12.25 4.10525 12.25 7C12.25 8.10485 11.915 9.14933 11.2781 10.0406Z"}})};it._withStripped=!0;var ot=Object(h.a)({},it,[],!1,null,null,null);ot.options.__file="src/Components/Messenger/vue/components/icons/icon-block.vue";var rt=ot.exports,ct=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{d:"M0.748238 5.29838L6.14835 0.150295C6.30279 0.00308902 6.53283 -0.0401463 6.73696 0.0391184C6.93892 0.118383 7.07068 0.306765 7.07068 0.514706V3.08824H7.82669C12.8887 3.08824 15.2788 6.18985 15.2788 11.0147C15.2788 11.2443 15.119 11.446 14.8878 11.5088C14.8382 11.5232 14.7885 11.5294 14.7388 11.5294C14.5563 11.5294 14.3813 11.4409 14.2809 11.2875L14.1189 11.0404C12.6533 8.8025 11.7515 8.2353 8.98231 8.2353H7.07068V10.8088C7.07068 11.0168 6.93892 11.2051 6.73696 11.2844C6.53391 11.3626 6.30279 11.3194 6.14835 11.1732L0.748238 6.02618C0.537634 5.82544 0.537634 5.49912 0.748238 5.29838ZM5.99066 9.56633V7.72059C5.99066 7.43647 6.23259 7.20588 6.53067 7.20588H8.98231C11.5301 7.20588 12.2472 7.42103 13.9644 9.16897C13.095 5.80074 11.6262 4.11765 7.82669 4.11765H6.53067C6.23259 4.11765 5.99066 3.88706 5.99066 3.60294V1.75721L1.89414 5.66177L5.99066 9.56633Z"}})};ct._withStripped=!0;var lt=Object(h.a)({},ct,[],!1,null,null,null);lt.options.__file="src/Components/Messenger/vue/components/icons/icon-reply.vue";var dt=lt.exports,pt=n(1091),mt={name:"bottom-actions",components:{IconBase:c.a,IconBlock:rt,IconReply:dt,IconRemove:pt.a,IconCross:ve.a},props:{selectedMessages:{type:Object,default:()=>({all:[],ids:[],tmp:[]})},ignoredType:{type:Number,default:0},messageToReply:{type:String,default:""},incomingReply:{type:Boolean,default:!1},incomingSpam:{type:Boolean,default:!1},removeMessages:{type:Boolean,default:!1},clearSelection:{type:Boolean,default:!1},ignoredUser:{type:Boolean,default:!1},iamBannedUser:{type:Boolean,default:!1},toBannedUser:{type:Boolean,default:!1},hasBeenKicked:{type:Boolean,default:!1}},data:()=>({}),computed:{channelId(){return this.$store.getters.currentChannel?this.$store.getters.currentChannel.id:null}},methods:{blockChannel(){this.$store.state.ui.isMiniMessenger&&this.$root.callMethod("closeWindow",this.$root.channelId),this.$store.dispatch(ee.c,{channelId:this.channelId}),Object(w.g)(this.$gettext("Spam report has been sent"))},acceptChannel(){this.$emit("showReply"),this.$store.dispatch(f.a,{channelId:this.channelId})},clearMessageSelected(){this.$store.dispatch(f.h)},removeSomeMessages(){const e=this.selectedMessages.all.length,t=this.$ngettext("The message will be removed for everyone","Messages will be removed for everyone",e);this.$confirm({messageText:t,confirmText:this.$gettext("Remove"),declineText:this.$gettext("Cancel")}).then(()=>{this.$store.dispatch(ee.C,{channelId:this.channelId,messagesIds:this.selectedMessages.all})}).finally(()=>{this.$store.dispatch(f.h)})},replyToMessage(){this.messageToReply&&(this.$emit("replyToMessage",this.messageToReply),this.$store.dispatch(f.h))}}},ht=(n(1359),Object(h.a)(mt,st,[],!1,null,"364af6a6",null));ht.options.__file="src/Components/Messenger/vue/components/chat/chat-bottom-actions.vue";var ut={components:{ChatForm:at,BottomActions:ht.exports},props:{channel:{type:Object,required:!0}},data:()=>({incomingRequestAccepted:!1,messageToReplyId:null}),computed:{selectedMessages(){const e=this.$store.state.chat.selectedMessagesIds;return{all:e,ids:e.filter(e=>"string"==typeof e),tmp:e.filter(e=>"number"==typeof e)}},showRemoveMessageButton(){if(!!!this.channel.socketChannel)return!0;if(this.channel.role>_.b.Default)return!0;return!this.selectedMessages.ids.map(e=>this.channel.messages.find(t=>t.id===e)).some(e=>e.author.id.toString()!=this.$store.state.user.id.toString())}},methods:{acceptIncomingRequest(){this.incomingRequestAccepted=!0;setTimeout(()=>{this.$refs.form.$refs.textarea.focus()},20)},replyToMessage(e){this.messageToReplyId=e},beforeSendMessage({idTmp:e,message:t,replyTo:n,media:a},s=!1){const i={channelId:this.channel.id,text:t,ts:(new Date).getTime()/1e3,idTmp:e||window.crypto.getRandomValues(new Uint32Array(1))[0],media:a};n&&(i.replyTo=n);setTimeout(()=>{this.scrollToBottom()},50),this.messageToReplyId=null,this.sendMessage(i,s)},sendMessage(e,t){this.$store.dispatch(f.g,{data:e,isRetry:t}).then(({idTmp:n,message:a})=>{this.$store.dispatch(ee.d,{idTmp:n,messageId:a.id,channelId:e.channelId}),t&&this.$store.dispatch(ee.y,{messageId:a.id,channelId:e.channelId})})},scrollToBottom(){const e=document.querySelector(".chat-messages");e.scrollTop=e.scrollHeight}}},gt=Object(h.a)(ut,fe,[],!1,null,null,null);gt.options.__file="src/Components/Messenger/vue/components/chat/chat-bottom.vue";var ft=gt.exports,_t={name:"chat",components:{Layout:s.a,Messages:oe,IconBase:c.a,IconAttach:p.a,HeaderChannel:ue,Etc:ge.b,ChatBottom:ft},props:{messagesLoadingBlocked:{type:Boolean,default:!1}},data:()=>({dropzonePointerShowed:!1}),computed:{currentChannel(){return this.$store.getters.currentChannel},currentChannelId(){return this.$store.state.chat.currentChannelId},etcItems(){const e=[{label:this.$gettext("Clear history"),icon:"v_delete",action:this.clearHistory}];if(!this.isChatWithSelf){this.currentChannel.type===_.a.Personal&&e.push({label:this.currentChannel.isIgnored&&1===this.currentChannel.ignoredType?this.$gettext("Remove from blocklist"):this.$gettext("Add to blocklist"),icon:"v_lock_full",action:this.ignoreUser}),e.push({label:this.currentChannel.isMuted?this.$gettext("Enable notifications"):this.$gettext("Disable notifications"),icon:"v_mute",action:this.muteChannel});this.currentChannel.role===_.b.Creator||e.push({label:this.$gettext("This is spam"),icon:"v_ban",action:this.itsSpam})}return isNaN(window.__bugsSubsiteId)||e.push({label:this.$gettext("Report a bug"),icon:"v_alert",action:()=>{Object(w.h)("/m/"+window.__bugsSubsiteId)}}),e}},watch:{currentChannelId(){setTimeout(()=>{this.dropzonePointerShowed=!1,this.currentChannel&&(this.$root.onChannelOpen(this.currentChannel.id),window.Air&&window.Air.get("module.page")?window.Air.get("module.page").setTitle(this.currentChannel.title):document.title=this.currentChannel.title)},0)}},methods:{retrySendMessage(e){const{idTmp:t,text:n,replyTo:a,media:s,status:i}=e;this.$refs.bottom.beforeSendMessage({idTmp:t,replyTo:a,media:s,message:n},i===_.c.Error)},dragover(e){e.preventDefault(),this.dropzonePointerShowed=!0},dragleave(){this.dropzonePointerShowed=!1},drop(e){e.preventDefault(),this.dropzonePointerShowed=!1,this.$refs.bottom.$refs.form.handlePastedFiles(e.dataTransfer.items)},clearHistory(){this.$confirm({messageText:this.$gettext("All messages and the chat will be removed. However, they will remain for your interlocutor"),confirmText:this.$gettext("Remove"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(ee.h,{channelId:this.currentChannel.id,needToRemoveChannel:this.currentChannel.type===_.a.Personal}))},ignoreUser(){const{isIgnored:e,ignoredType:t}=this.currentChannel,n=e&&1===t?this.$gettext("Remove from blocklist?"):this.$gettext("Add to blocklist?");this.$confirm({messageText:n,confirmText:e&&1===t?this.$gettext("Remove"):this.$gettext("Add"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(ee.n,{channelId:this.currentChannel.id,subsiteId:this.participant.id,undo:e&&1===t}))},muteChannel(){const{isMuted:e}=this.currentChannel;this.$store.dispatch(ee.z,{channelId:this.currentChannel.id,undo:e})},itsSpam(){this.$confirm({messageText:this.$gettext("Leave and report spam?"),confirmText:this.$gettext("Leave"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(ee.c,{channelId:this.currentChannel.id}))}}},vt=(n(1361),Object(h.a)(_t,a,[],!1,null,"2a1f04eb",null));vt.options.__file="src/Components/Messenger/vue/components/chat/chat.vue";t.a=vt.exports},1088:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:function(t){return e.$refs.file.click()}}},[e._t("default"),e._v(" "),n("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:e.accept},on:{change:e.onChange}})],2)};a._withStripped=!0;var s={name:"file-uploader-vue",props:{accept:{type:String,default:""}},methods:{onChange(e){const t=e.target.files;this.$emit("change",t),e.target.value=null}}},i=n(10),o=Object(i.a)(s,a,[],!1,null,"a7691a22",null);o.options.__file="src/Components/Messenger/vue/components/common/file-uploader.vue";t.a=o.exports},1091:function(e,t,n){"use strict";var a=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.09 13.6v.05c0 .44-.36.79-.78.79H4.7a.78.78 0 01-.78-.79l-.82-9.8h9.82l-.84 9.75zM6.76 2.3h2.48v-.95H6.76v.94zm8.48 0h-4.42V1.14C10.82.49 10.24 0 9.5 0H6.52C5.77 0 5.2.5 5.2 1.13v1.14H.78a.77.77 0 00-.78.78c0 .44.35.79.78.79h.73l.82 9.85A2.37 2.37 0 004.7 16h6.56c1.3 0 2.35-1.02 2.36-2.3l.86-9.83h.73c.44 0 .78-.34.78-.78a.76.76 0 00-.76-.8zM5.98 5.64h-.04a.8.8 0 00-.76.8l.24 5.22c0 .42.36.75.78.75h.04a.8.8 0 00.77-.8l-.25-5.24a.78.78 0 00-.78-.73zm4.06 0a.79.79 0 00-.78.75L9 11.64c0 .43.33.78.76.8h.04c.4 0 .76-.33.78-.75l.24-5.22a.7.7 0 00-.2-.56.69.69 0 00-.58-.26z"}})};a._withStripped=!0;var s=n(10),i=Object(s.a)({},a,[],!1,null,null,null);i.options.__file="src/Components/Messenger/vue/components/icons/icon-remove.vue";t.a=i.exports},1333:function(e,t,n){"use strict";n(949)},1334:function(e,t,n){(t=n(28)(!1)).push([e.i,".chat[data-v-569f3e06] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 auto;\n  flex: 1 auto;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.chat__container[data-v-569f3e06] {\n  display: -ms-flexbox;\n  display: flex;\n  height: 100%;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex: 1 auto;\n  flex: 1 auto;\n}\n.chat__header[data-v-569f3e06] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  height: 50px;\n  min-height: 50px;\n  padding: 0 15px 0 15px;\n  border-bottom: 1px solid var(--color-line-gray);\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n  z-index: 3;\n}\n.chat__header-back[data-v-569f3e06] {\n  margin: 0 5px 0 -9px;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  cursor: pointer;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  display: none;\n}\n.chat__header-back--showed[data-v-569f3e06] {\n  display: -ms-flexbox;\n  display: flex;\n}\n@media all and (max-width: 840px) {\n.chat__header-back[data-v-569f3e06] {\n    display: -ms-flexbox;\n    display: flex;\n}\n}\n.chat__header-right[data-v-569f3e06] {\n  margin-left: auto;\n  margin-right: 12px;\n}\n@media all and (max-width: 840px) {\n.chat__header-right[data-v-569f3e06] {\n    margin-right: -15px;\n}\n}\n",""]),e.exports=t},1335:function(e,t,n){"use strict";n(950)},1336:function(e,t,n){(t=n(28)(!1)).push([e.i,".message-attaches {\n  color: #888;\n}\n.message-attaches__item {\n  display: inline-block;\n}\n.message-attaches__item-image,\n.message-attaches__item-video {\n  border-radius: 4px;\n  outline: 1px solid rgba(0,0,0,0.1);\n  outline-offset: -1px;\n  background: rgba(0,0,0,0.05);\n  max-width: 500px;\n  vertical-align: bottom;\n}\n.message-attaches__item-image {\n  cursor: -webkit-zoom-in;\n  cursor: zoom-in;\n}\n.message--compact .message-attaches img,\n.message--compact .message-attaches video {\n  max-width: 100%;\n}\n",""]),e.exports=t},1337:function(e,t,n){"use strict";n(951)},1338:function(e,t,n){var a=n(28),s=n(588);(t=a(!1)).i(s),t.push([e.i,".message {\n  display: -ms-flexbox;\n  display: flex;\n  padding: 6px 15px 6px 15px;\n  font-size: 15px;\n  line-height: 22px;\n  cursor: pointer;\n}\n.message--compact {\n  font-size: 14px;\n  line-height: 20px;\n}\n.message--selected {\n  background: var(--blueBg);\n}\n.message__picture {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: 36px;\n  height: 36px;\n  margin: 4px 10px 4px 0;\n  background: #eee;\n  border-radius: 18px;\n  -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,0.1);\n  box-shadow: 0 0 0 1px rgba(0,0,0,0.1);\n}\n.message__content {\n  -ms-flex-positive: 2;\n  flex-grow: 2;\n  min-width: 0;\n}\n.message__content-name {\n  font-weight: 500;\n}\n.message__content-right {\n  float: right;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n}\n.message__content-text {\n  white-space: pre-line;\n  overflow-wrap: break-word;\n  max-width: 640px;\n}\n.message__content-text a {\n  color: var(--color-text-blue);\n}\n.message__content-text a:hover {\n  text-decoration: underline;\n}\n.message__content-reply {\n  margin: 6px 0;\n  border-left: 2px solid rgba(0,0,0,0.15);\n  padding-left: 10px;\n  font-size: 13px;\n  line-height: 18px;\n}\n.message__content-reply-name {\n  font-weight: bold;\n}\n.message__content-reply-text {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.message__content-reply-removed {\n  color: var(--color-text-gray);\n}\n.message__content-reply svg {\n  height: 1em;\n  margin-top: 0;\n}\n.message__content-media {\n  margin-top: 6px;\n}\n.message--same-author {\n  padding-left: 61px; /* 15 + 36 + 10 */\n}\n.message__right {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  display: -ms-flexbox;\n  display: flex;\n  min-width: 60px;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n  margin-left: 10px;\n}\n.message__time {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  font-size: 13px;\n  color: var(--color-text-gray);\n}\n.message__status,\n.message__time,\n.message__actions {\n  height: 22px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.message--compact .message__status,\n.message--compact .message__time,\n.message--compact .message__actions {\n  height: 20px;\n}\n.message__status {\n  position: relative;\n  color: var(--color-text-gray);\n  margin-right: 10px;\n  font-size: 13px;\n}\n.message__status--read {\n  color: #4086e0;\n}\n.message__status--error {\n  color: var(--color-text-negative);\n}\n.message__status-loader {\n  content: '';\n  z-index: 2;\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n  border: 2px solid #e1e1e1;\n  border-top-color: #818181;\n  -webkit-animation: keyframes-ui_wait 500ms infinite linear;\n  animation: keyframes-ui_wait 500ms infinite linear;\n}\n.message__status-label {\n  margin-left: 4px;\n}\n@media all and (max-width: 840px) {\n.message__status-label {\n    display: none;\n}\n}\n.message--same-author .message__status {\n  padding-top: 0;\n}\n.message--compact .message__status-label {\n  display: none;\n}\n.message__actions {\n  font-size: 13px;\n}\n.message__actions-select {\n  margin-left: 15px;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  border: 1px solid rgba(0,0,0,0.25);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 6px;\n  opacity: 0;\n  margin-top: -1px;\n}\n@media all and (max-width: 840px) {\n.message__actions-select {\n    display: none;\n}\n}\n.message__actions-retry {\n  margin-left: 2px;\n  color: var(--color-text-blue);\n}\n.message__actions-retry .icon {\n  margin-right: 1px;\n  margin-bottom: -4px;\n}\n.message__actions-retry:hover {\n  opacity: 0.8;\n}\n.message:hover .message__actions-select {\n  opacity: 1;\n}\n.message--compact .message__actions-select {\n  display: none;\n}\n.message--compact.message--selected .message__actions-select {\n  display: inline-block;\n}\n.message--compact.message--selected .message__status,\n.message--compact.message--selected .message__time {\n  display: none;\n}\n.message--selected .message__actions-select {\n  opacity: 1;\n  border-color: #4086e0;\n  background-color: #4086e0;\n}\n",""]),e.exports=t},1339:function(e,t,n){"use strict";n(952)},1340:function(e,t,n){(t=n(28)(!1)).push([e.i,".sm-photo[data-v-efc2e372] {\n  width: 72px;\n  height: 72px;\n  margin: 0 auto 15px;\n}\n",""]),e.exports=t},1341:function(e,t,n){"use strict";n(953)},1342:function(e,t,n){(t=n(28)(!1)).push([e.i,".sm-photo[data-v-932a1cd6] {\n  width: 72px;\n  height: 72px;\n  margin: 0 auto 15px;\n}\n.bold[data-v-932a1cd6] {\n  font-weight: 500;\n}\n",""]),e.exports=t},1343:function(e,t,n){"use strict";n(954)},1344:function(e,t,n){(t=n(28)(!1)).push([e.i,".system-message[data-v-265357f0] {\n  padding: 15px;\n  text-align: center;\n  color: var(--color-text-gray);\n  line-height: 22px;\n  font-size: 14px;\n}\n.system-message--compact[data-v-265357f0] {\n  font-size: 13px;\n}\n.system-message[data-v-265357f0] a {\n  color: inherit;\n  font-weight: 500;\n  text-decoration: none;\n}\n.system-message[data-v-265357f0] a:hover {\n  color: var(--color-text-main);\n}\n",""]),e.exports=t},1345:function(e,t,n){"use strict";n(955)},1346:function(e,t,n){var a=n(28),s=n(588);(t=a(!1)).i(s),t.push([e.i,".chat-messages[data-v-25fd3942] {\n  position: relative;\n  -ms-flex: 1 auto;\n  flex: 1 auto;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n  -ms-flex-preferred-size: 100%;\n  flex-basis: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n}\n.chat-messages__list[data-v-25fd3942] {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin-top: auto;\n  padding-top: 24px;\n  padding-bottom: 10px;\n}\n.chat-messages__loader[data-v-25fd3942] {\n  position: absolute;\n  left: 50%;\n  top: 0;\n  margin-left: -10px;\n  height: 20px;\n  opacity: 0.5;\n}\n.chat-messages__loader[data-v-25fd3942]::before {\n  content: '';\n  position: absolute;\n  z-index: 2;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  border: 2px solid #e1e1e1;\n  border-top-color: #818181;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  -webkit-animation: keyframes-ui_wait-data-v-25fd3942 500ms infinite linear;\n  animation: keyframes-ui_wait-data-v-25fd3942 500ms infinite linear;\n}\n.chat-messages__day[data-v-25fd3942] {\n  padding: 5px 0;\n  color: var(--color-text-gray);\n  text-align: center;\n  position: sticky;\n  position: -webkit-sticky;\n  top: 0;\n  z-index: 2;\n}\n.chat-messages__day.stuckBelow[data-v-25fd3942] {\n  opacity: 0;\n}\n.chat-messages__day span[data-v-25fd3942] {\n  display: inline-block;\n  padding: 1px 8px;\n  background: rgba(255,255,255,0.85);\n  border-radius: 15px;\n}\n.chat-messages__unread-label[data-v-25fd3942] {\n  text-align: center;\n  background: var(--color-line-blue);\n  height: 1px;\n  margin: 15px;\n}\n.chat-messages__unread-label span[data-v-25fd3942] {\n  padding: 7px 40px;\n  background: #fff;\n  display: inline-block;\n  color: var(--color-text-blue);\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.chat-messages--compact .chat-messages__day span[data-v-25fd3942],\n.chat-messages--compact .chat-messages__unread-label[data-v-25fd3942] {\n  font-size: 13px;\n  line-height: 20px;\n}\n@-moz-keyframes keyframes-ui_wait-data-v-25fd3942 {\n0% {\n    transform: rotate(0deg);\n}\n100% {\n    transform: rotate(360deg);\n}\n}\n@-webkit-keyframes keyframes-ui_wait-data-v-25fd3942 {\n0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n}\n}\n@-o-keyframes keyframes-ui_wait-data-v-25fd3942 {\n0% {\n    transform: rotate(0deg);\n}\n100% {\n    transform: rotate(360deg);\n}\n}\n@keyframes keyframes-ui_wait-data-v-25fd3942 {\n0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n}\n}\n",""]),e.exports=t},1349:function(e,t,n){"use strict";n(957)},1350:function(e,t,n){(t=n(28)(!1)).push([e.i,".chat-header-info[data-v-f637e9d6] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  text-decoration: none;\n  color: inherit;\n  font-weight: 500;\n  cursor: pointer;\n  -ms-flex-positive: 2;\n  flex-grow: 2;\n}\n.chat-header-info__photo[data-v-f637e9d6] {\n  display: inline-block;\n  width: 36px;\n  height: 36px;\n  vertical-align: middle;\n  margin: auto 10px auto 0;\n}\n.chat-header-info__title-wrapper[data-v-f637e9d6] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  padding: 10px 0;\n}\n.chat-header-info__title[data-v-f637e9d6] {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-weight: bold;\n  font-size: 15px;\n  line-height: 1em;\n}\n.chat-header-info__title .icon[data-v-f637e9d6] {\n  margin-left: 7px;\n}\n.chat-header-info__title .icon--mute[data-v-f637e9d6] {\n  color: var(--color-text-gray);\n  width: 12px;\n  height: 12px;\n}\n.chat-header-info__title .icon--verified[data-v-f637e9d6] {\n  width: 14px;\n  height: 14px;\n}\n.chat-header-info__subline[data-v-f637e9d6] {\n  margin-top: 2px;\n  color: var(--color-text-gray);\n  font-size: 13px;\n  font-weight: normal;\n}\n.chat-header-info[data-v-f637e9d6] .online {\n  color: var(--color-online);\n}\n",""]),e.exports=t},1351:function(e,t,n){"use strict";n(958)},1352:function(e,t,n){(t=n(28)(!1)).push([e.i,".remover {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  right: -8px;\n  top: -8px;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  cursor: pointer;\n  background: #fff;\n  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  border-radius: 100px;\n  color: var(--color-text-negative);\n}\n.remover .icon {\n  width: 10px;\n  height: 10px;\n  margin: 0;\n  -webkit-transition: -webkit-transform 150ms ease;\n  transition: -webkit-transform 150ms ease;\n  transition: transform 150ms ease;\n  transition: transform 150ms ease, -webkit-transform 150ms ease;\n}\n.remover:hover .icon {\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n}\n",""]),e.exports=t},1353:function(e,t,n){"use strict";n(959)},1354:function(e,t,n){(t=n(28)(!1)).push([e.i,".form-attaches {\n  padding: 9px 0 22px;\n}\n.form-attaches__item {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  background-color: var(--color-bg-gray);\n  outline: 1px solid rgba(0,0,0,0.15);\n  outline-offset: -1px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n}\n.form-attaches__item--loading::after {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  margin-top: -8px;\n  margin-left: -8px;\n  content: '';\n  z-index: 2;\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n  border: 2px solid #fff;\n  border-top-color: var(--color-text-blue);\n  -webkit-animation: keyframes-ui_wait 500ms infinite linear;\n  animation: keyframes-ui_wait 500ms infinite linear;\n}\n",""]),e.exports=t},1355:function(e,t,n){"use strict";n(960)},1356:function(e,t,n){(t=n(28)(!1)).push([e.i,"/**\n * Prevent tap highlighting on android\n */\n.no-tap[data-v-5abe2cd0] {\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n@media all and (max-width: 840px) {\n.no-tap[data-v-5abe2cd0] {\n    cursor: default;\n}\n}\n.emoji-picker[data-v-5abe2cd0] {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  cursor: pointer;\n}\n.emoji-picker__invoker[data-v-5abe2cd0] {\n  width: 28px;\n  color: var(--color-text-gray);\n  -webkit-transition: opacity 170ms ease;\n  transition: opacity 170ms ease;\n  will-change: opacity;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.emoji-picker__invoker .icon[data-v-5abe2cd0] {\n  margin-bottom: 0;\n}\n.emoji-picker__invoker[data-v-5abe2cd0]:hover {\n  color: var(--color-text-main);\n}\n.emoji-picker__tabs[data-v-5abe2cd0] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  color: var(--color-text-gray);\n  background: #fff;\n  margin: 3px -8px 6px;\n}\n.emoji-picker__tabs span[data-v-5abe2cd0] {\n  display: block;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  padding-bottom: 10px;\n  -webkit-transition: opacity 170ms ease;\n  transition: opacity 170ms ease;\n  will-change: opacity;\n  text-align: center;\n  color: var(--color-text-gray);\n  opacity: 0.8;\n  cursor: pointer;\n}\n.emoji-picker__tabs span[data-v-5abe2cd0]:hover {\n  color: var(--color-text-main);\n}\n.emoji-picker__tabs span.active[data-v-5abe2cd0] {\n  color: var(--color-text-main);\n}\n.emoji-picker__tabs span .icon--animal[data-v-5abe2cd0] {\n  width: 23.7px;\n  height: 21.75px;\n}\n.emoji-picker__tabs span .icon--boat[data-v-5abe2cd0] {\n  width: 24.3px;\n  height: 22.8px;\n  margin-top: 1px;\n}\n.emoji-picker__panel[data-v-5abe2cd0] {\n  position: absolute;\n  bottom: 100%;\n  right: -25px;\n  background: #fff;\n  border: 1px solid var(--color-line-gray);\n  border-radius: 7px;\n  padding: 15px;\n  width: 280px;\n  height: 330px;\n  -webkit-box-shadow: 0 2px 5px rgba(0,0,0,0.07);\n  box-shadow: 0 2px 5px rgba(0,0,0,0.07);\n  -webkit-animation: panelIn-data-v-5abe2cd0 100ms ease-in;\n  animation: panelIn-data-v-5abe2cd0 100ms ease-in;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  margin-bottom: 6px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n/**\n     * Emoji size\n     * - Safari renders emoji larger that other browsers\n     * - Safari renders emoji correctly by center, other browsers have some right-margin\n     */\n}\n.emoji-picker__panel[data-v-5abe2cd0] ::-webkit-scrollbar {\n  display: none;\n}\n.emoji-picker__panel[data-v-5abe2cd0]::after {\n  content: '';\n  position: absolute;\n  bottom: -8px;\n  display: block;\n  height: 14px;\n  width: 14px;\n  right: 30px;\n  background: #fff;\n  border-style: solid;\n  border-color: var(--color-line-gray);\n  border-width: 0 0 1px 1px;\n  -webkit-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n.emoji-picker__panel--loading[data-v-5abe2cd0]::before {\n  content: '';\n  position: absolute;\n  z-index: 2;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: 2px solid #e1e1e1;\n  border-top-color: #818181;\n  top: 50%;\n  left: 50%;\n  margin-left: -12px;\n  margin-top: -12px;\n  -webkit-animation: keyframes-ui_wait 500ms infinite linear;\n  animation: keyframes-ui_wait 500ms infinite linear;\n}\n.emoji-picker__panel-list[data-v-5abe2cd0] {\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n  margin: 0 -3px;\n}\n.emoji-picker__panel-list-section[data-v-5abe2cd0]:not(:first-of-type) {\n  padding-top: 10px;\n}\n.emoji-picker__panel-list-section-name[data-v-5abe2cd0] {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background: #fff;\n  -webkit-box-shadow: 0px 2px 5px #fff;\n  box-shadow: 0px 2px 5px #fff;\n  color: var(--color-text-gray);\n  font-weight: 500;\n  padding: 0 6px 7px;\n  font-size: 14px;\n}\n.emoji-picker__panel-list-section-grid[data-v-5abe2cd0] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  width: 100%;\n  padding-top: 3px;\n}\n.emoji-picker__panel-list-section-grid span[data-v-5abe2cd0] {\n  display: inline-block;\n  width: 12.5%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  text-align: center;\n  border-radius: 4px;\n  cursor: pointer;\n  -webkit-transition: background-color 120ms ease;\n  transition: background-color 120ms ease;\n}\n.emoji-picker__panel-list-section-grid span[data-v-5abe2cd0]:hover {\n  background-color: rgba(121,107,92,0.11);\n}\n.emoji-picker__panel-list-section-grid span.clicked[data-v-5abe2cd0] {\n  -webkit-animation: bounceIn-data-v-5abe2cd0 400ms ease-in;\n  animation: bounceIn-data-v-5abe2cd0 400ms ease-in;\n}\n.emoji-picker__panel-list-section-grid[data-v-5abe2cd0] {\n  font-size: 20px;\n}\n.emoji-picker__panel-list-section-grid span[data-v-5abe2cd0] {\n  padding: 6px 1px 6px 3px;\n}\n.emoji-picker__panel--safari .emoji-picker__panel-list-section-grid[data-v-5abe2cd0] {\n  font-size: 18px;\n}\n.emoji-picker__panel--safari .emoji-picker__panel-list-section-grid span[data-v-5abe2cd0] {\n  padding: 6px 2px;\n}\n@-moz-keyframes panelIn-data-v-5abe2cd0 {\nfrom {\n    transform: translateY(-10px);\n    opacity: 0;\n}\nto {\n    transform: none;\n    opacity: 1;\n}\n}\n@-webkit-keyframes panelIn-data-v-5abe2cd0 {\nfrom {\n    -webkit-transform: translateY(-10px);\n    transform: translateY(-10px);\n    opacity: 0;\n}\nto {\n    -webkit-transform: none;\n    transform: none;\n    opacity: 1;\n}\n}\n@-o-keyframes panelIn-data-v-5abe2cd0 {\nfrom {\n    transform: translateY(-10px);\n    opacity: 0;\n}\nto {\n    transform: none;\n    opacity: 1;\n}\n}\n@keyframes panelIn-data-v-5abe2cd0 {\nfrom {\n    -webkit-transform: translateY(-10px);\n    transform: translateY(-10px);\n    opacity: 0;\n}\nto {\n    -webkit-transform: none;\n    transform: none;\n    opacity: 1;\n}\n}\n@-moz-keyframes bounceIn-data-v-5abe2cd0 {\n0%, 20%, 40%, 60%, 80%, 100% {\n    transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n0% {\n    opacity: 1;\n    transform: scale3d(0.3, 0.3, 0.3);\n}\n20% {\n    transform: scale3d(1.1, 1.1, 1.1);\n}\n40% {\n    transform: scale3d(0.9, 0.9, 0.9);\n}\n60% {\n    opacity: 1;\n    transform: scale3d(1.03, 1.03, 1.03);\n}\n80% {\n    transform: scale3d(0.97, 0.97, 0.97);\n}\n100% {\n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n}\n}\n@-webkit-keyframes bounceIn-data-v-5abe2cd0 {\n0%, 20%, 40%, 60%, 80%, 100% {\n    -webkit-transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n0% {\n    opacity: 1;\n    -webkit-transform: scale3d(0.3, 0.3, 0.3);\n    transform: scale3d(0.3, 0.3, 0.3);\n}\n20% {\n    -webkit-transform: scale3d(1.1, 1.1, 1.1);\n    transform: scale3d(1.1, 1.1, 1.1);\n}\n40% {\n    -webkit-transform: scale3d(0.9, 0.9, 0.9);\n    transform: scale3d(0.9, 0.9, 0.9);\n}\n60% {\n    opacity: 1;\n    -webkit-transform: scale3d(1.03, 1.03, 1.03);\n    transform: scale3d(1.03, 1.03, 1.03);\n}\n80% {\n    -webkit-transform: scale3d(0.97, 0.97, 0.97);\n    transform: scale3d(0.97, 0.97, 0.97);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n}\n}\n@-o-keyframes bounceIn-data-v-5abe2cd0 {\n0%, 20%, 40%, 60%, 80%, 100% {\n    transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n0% {\n    opacity: 1;\n    transform: scale3d(0.3, 0.3, 0.3);\n}\n20% {\n    transform: scale3d(1.1, 1.1, 1.1);\n}\n40% {\n    transform: scale3d(0.9, 0.9, 0.9);\n}\n60% {\n    opacity: 1;\n    transform: scale3d(1.03, 1.03, 1.03);\n}\n80% {\n    transform: scale3d(0.97, 0.97, 0.97);\n}\n100% {\n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n}\n}\n@keyframes bounceIn-data-v-5abe2cd0 {\n0%, 20%, 40%, 60%, 80%, 100% {\n    -webkit-transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n0% {\n    opacity: 1;\n    -webkit-transform: scale3d(0.3, 0.3, 0.3);\n    transform: scale3d(0.3, 0.3, 0.3);\n}\n20% {\n    -webkit-transform: scale3d(1.1, 1.1, 1.1);\n    transform: scale3d(1.1, 1.1, 1.1);\n}\n40% {\n    -webkit-transform: scale3d(0.9, 0.9, 0.9);\n    transform: scale3d(0.9, 0.9, 0.9);\n}\n60% {\n    opacity: 1;\n    -webkit-transform: scale3d(1.03, 1.03, 1.03);\n    transform: scale3d(1.03, 1.03, 1.03);\n}\n80% {\n    -webkit-transform: scale3d(0.97, 0.97, 0.97);\n    transform: scale3d(0.97, 0.97, 0.97);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n}\n}\n",""]),e.exports=t},1357:function(e,t,n){"use strict";n(961)},1358:function(e,t,n){var a=n(28),s=n(588);(t=a(!1)).i(s),t.push([e.i,".chat-form[data-v-1ea42f52] {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  margin: auto 0 0 0;\n  border-top: 1px solid var(--color-line-gray);\n  min-height: 52px;\n  outline: none;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  z-index: 3;\n/**\n   * Override some styles of emoji panel for mini-messenger (make less)\n   */\n}\n.chat-form__form-wrapper[data-v-1ea42f52] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-preferred-size: 100%;\n  flex-basis: 100%;\n}\n.chat-form__textarea[data-v-1ea42f52] {\n  overflow-y: auto;\n  overflow-x: hidden;\n  border: 0;\n  font-size: 15px;\n  line-height: 22px;\n  margin-top: 14px;\n  padding: 0 0 12px 0;\n  height: 34px;\n  outline: none;\n  resize: none;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.chat-form__textarea[data-v-1ea42f52]::-webkit-input-placeholder {\n  color: var(--color-text-gray);\n}\n.chat-form__textarea[data-v-1ea42f52]::-moz-placeholder {\n  color: var(--color-text-gray);\n}\n.chat-form__textarea[data-v-1ea42f52]:-ms-input-placeholder {\n  color: var(--color-text-gray);\n}\n.chat-form__textarea[data-v-1ea42f52]::-ms-input-placeholder {\n  color: var(--color-text-gray);\n}\n.chat-form__textarea[data-v-1ea42f52]::placeholder {\n  color: var(--color-text-gray);\n}\n.chat-form__textarea[data-v-1ea42f52]:focus::-webkit-input-placeholder {\n  display: none;\n}\n.chat-form__textarea[data-v-1ea42f52]:focus::-moz-placeholder {\n  display: none;\n}\n.chat-form__textarea[data-v-1ea42f52]:focus:-ms-input-placeholder {\n  display: none;\n}\n.chat-form__textarea[data-v-1ea42f52]:focus::-ms-input-placeholder {\n  display: none;\n}\n.chat-form__textarea[data-v-1ea42f52]:focus::placeholder {\n  display: none;\n}\n.chat-form--compact .chat-form__textarea[data-v-1ea42f52] {\n  font-size: 14px;\n  line-height: 22px;\n}\n.chat-form--compact[data-v-1ea42f52] .emoji-picker {\n  margin-right: 15px;\n}\n.chat-form--compact[data-v-1ea42f52] .emoji-picker .emoji-picker__panel {\n  right: -11px;\n  height: 270px;\n}\n.chat-form--compact[data-v-1ea42f52] .emoji-picker .emoji-picker__panel::after {\n  right: 19px;\n}\n.chat-form__content[data-v-1ea42f52] {\n  -ms-flex-positive: 2;\n  flex-grow: 2;\n}\n.chat-form__reply[data-v-1ea42f52] {\n  display: -ms-flexbox;\n  display: flex;\n  padding: 7px 20px 8px;\n  background: rgba(0,0,0,0.03);\n  font-size: 13px;\n  -ms-flex-preferred-size: 100%;\n  flex-basis: 100%;\n}\n.chat-form__reply-cancel[data-v-1ea42f52] {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin: auto 15px auto 0;\n  color: var(--color-text-gray);\n  opacity: 0.7;\n  cursor: pointer;\n}\n.chat-form__reply-cancel[data-v-1ea42f52]:hover {\n  opacity: 1;\n}\n.chat-form__reply-body[data-v-1ea42f52] {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  -ms-flex-preferred-size: auto;\n  flex-basis: auto;\n}\n.chat-form__reply-text[data-v-1ea42f52] {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 400px;\n}\n.chat-form__reply-text svg[data-v-1ea42f52] {\n  height: 1em;\n  margin-top: 0 !important;\n}\n.chat-form__reply-name[data-v-1ea42f52] {\n  font-weight: bold;\n  line-height: 18px;\n}\n.chat-form--compact .chat-form__reply-text[data-v-1ea42f52] {\n  max-width: 240px;\n}\n.chat-form .icon--attach[data-v-1ea42f52] {\n  margin-top: 16px;\n}\n.chat-form--compact .icon--send[data-v-1ea42f52] {\n  width: 24px;\n  height: 24px;\n}\n.chat-form__attach[data-v-1ea42f52] {\n  padding-left: 24px;\n  padding-right: 19px;\n  color: var(--color-text-gray);\n  -webkit-transition: color 170ms ease;\n  transition: color 170ms ease;\n  cursor: pointer;\n}\n.chat-form__attach[data-v-1ea42f52]:hover {\n  color: var(--color-text-main);\n}\n.chat-form__send[data-v-1ea42f52] {\n  display: -ms-flexbox;\n  display: flex;\n  padding-left: 15px;\n  padding-right: 42px;\n  color: var(--color-text-blue);\n  cursor: pointer;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.chat-form__send .icon[data-v-1ea42f52] {\n  margin-bottom: 0;\n}\n@media (max-width: 840px) {\n.chat-form__send[data-v-1ea42f52] {\n    padding-right: 15px;\n}\n}\n.chat-form__send--disabled[data-v-1ea42f52] {\n  color: rgba(0,0,0,0.2);\n  pointer-events: none;\n}\n.chat-form__send[data-v-1ea42f52]:hover {\n  color: var(--color-text-blue-hover);\n}\n.chat-form--compact .chat-form__send[data-v-1ea42f52] {\n  padding-right: 15px;\n}\n",""]),e.exports=t},1359:function(e,t,n){"use strict";n(962)},1360:function(e,t,n){var a=n(28),s=n(588);(t=a(!1)).i(s),t.push([e.i,".chat-bottom-actions[data-v-364af6a6] {\n  margin: auto 0 0 0;\n  border: 0;\n  border-top: 1px solid var(--color-line-gray);\n  padding: 0 15px;\n  min-height: 52px;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  display: -ms-flexbox;\n  display: flex;\n/**\n   * Floating window\n   */\n}\n.chat-bottom-actions__button[data-v-364af6a6] {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  padding: 5px 10px;\n  color: var(--color-text-blue);\n  font-size: 15px;\n  cursor: pointer;\n  white-space: nowrap;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.chat-bottom-actions__button svg[data-v-364af6a6] {\n  margin-right: 8px;\n  -webkit-transition: -webkit-transform 100ms ease;\n  transition: -webkit-transform 100ms ease;\n  transition: transform 100ms ease;\n  transition: transform 100ms ease, -webkit-transform 100ms ease;\n}\n.chat-bottom-actions__button .icon--remove[data-v-364af6a6] {\n  height: 14px;\n  width: 14px;\n}\n.chat-bottom-actions__button--red[data-v-364af6a6] {\n  color: var(--color-text-negative);\n}\n.chat-bottom-actions__button--disabled[data-v-364af6a6] {\n  color: var(--color-text-gray);\n  pointer-events: none;\n}\n.chat-bottom-actions__button[data-v-364af6a6]:hover {\n  opacity: 0.8;\n}\n.chat-bottom-actions__right[data-v-364af6a6] {\n  margin: auto 0 auto auto;\n  color: var(--color-text-gray);\n}\n@media (max-width: 840px) {\n.chat-bottom-actions__right-label[data-v-364af6a6] {\n    display: none;\n}\n}\n.chat-bottom-actions__right-button[data-v-364af6a6] {\n  color: var(--color-text-blue);\n  border-bottom: 1px dotted rgba(64,134,224,0.51);\n  margin-left: 12px;\n  cursor: pointer;\n}\n.chat-bottom-actions__right-button[data-v-364af6a6]:hover {\n  opacity: 0.8;\n}\n@media (max-width: 840px) {\n.chat-bottom-actions__right-button--deselect[data-v-364af6a6] {\n    border-bottom: 0;\n    color: var(--color-text-gray);\n}\n}\n@media (min-width: 841px) {\n.chat-bottom-actions__right-button--deselect .icon--cross[data-v-364af6a6] {\n    display: none;\n}\n}\n.chat-bottom-actions--compact .chat-bottom-actions__right-label[data-v-364af6a6] {\n  display: none;\n}\n.chat-bottom-actions--compact .chat-bottom-actions__right-button[data-v-364af6a6] {\n  margin: 0;\n  display: inline-block;\n}\n.chat-bottom-actions--compact .chat-bottom-actions__right-button--deselect[data-v-364af6a6] {\n  border-bottom: 0;\n  color: var(--color-text-gray);\n}\n.chat-bottom-actions--compact .chat-bottom-actions__right-button--deselect .icon--cross[data-v-364af6a6] {\n  display: inline-block;\n}\n",""]),e.exports=t},1361:function(e,t,n){"use strict";n(963)},1362:function(e,t,n){var a=n(28),s=n(588);(t=a(!1)).i(s),t.push([e.i,".chat-dropdown-pointer[data-v-2a1f04eb] {\n  position: absolute;\n  z-index: 4;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  background: rgba(255,255,255,0.94);\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  color: var(--color-text-gray);\n  -ms-flex-direction: column;\n  flex-direction: column;\n  text-align: center;\n  line-height: 18px;\n  font-size: 14px;\n}\n.chat-dropdown-pointer .icon[data-v-2a1f04eb] {\n  margin-bottom: 12px;\n}\n.tmp-add[data-v-2a1f04eb] {\n  position: fixed;\n  right: 20px;\n  bottom: 20%;\n  background: #27e;\n  color: #fff;\n  padding: 10px;\n  border-radius: 7px;\n  display: block;\n  -webkit-box-shadow: 0 3px 15px rgba(34,119,238,0.71);\n  box-shadow: 0 3px 15px rgba(34,119,238,0.71);\n  cursor: pointer;\n}\n",""]),e.exports=t},596:function(e,t,n){var a=n(636);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("1f6af0a3",a,!1,{})},598:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"a",(function(){return p}));const a="openChannel",s="closeChannel",i="loadAndPrependMessages",o="sendMessage",r="iAmTyping",c="selectMessage",l="unselectAllMessages",d="uploadMedia",p="acceptChannel"},603:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o}));const a="ENABLE_COMPACT_MODE",s="TOGGLE_CREATE_GROUP_CHAT",i="TOGGLE_CHANNEL_INFO",o="TOGGLE_IMAGE_ZOOM_STATE"},615:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],class:["v-etc",{"v-etc--active":e.isActive}]},[n("div",{staticClass:"v-etc__button",on:{click:e.toggleDropdown}},[n("icon",{attrs:{name:"v_etc",width:20,height:20}})],1),e._v(" "),e.isActive?n("popover",{class:["v-etc__popover","v-etc__popover--"+e.dropdownPlacement],attrs:{data:e.items},on:{select:e.closeDropdown}}):e._e()],1)};a._withStripped=!0;var s=n(26),i=n(91);const o={Top:"top",Bottom:"bottom",Left:"left",Right:"right"};var r={name:"etc",components:{Icon:s.a,Popover:i.default},props:{items:{type:Array,default:()=>[]},dropdownPlacement:{type:String,default:o.Bottom,validator:e=>Object.values(o).includes(e)}},data:()=>({isActive:!1}),methods:{closeDropdown(){this.isActive=!1},onClickOutside(){this.closeDropdown()},toggleDropdown(){this.isActive=!this.isActive}}},c=(n(635),n(10)),l=Object(c.a)(r,a,[],!1,null,null,null);l.options.__file="src/Components/Ui/vue/etc/index.vue";t.b=l.exports},626:function(e,t,n){"use strict";var a=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9151 0L5.99961 4.91628L1.08411 0L0 1.08488L4.9155 5.99961L0 10.9159L1.08411 12L5.99961 7.0845L10.9151 12L12 10.9159L7.08372 5.99961L12 1.08488L10.9151 0Z"}})};a._withStripped=!0;var s=n(10),i=Object(s.a)({},a,[],!1,null,null,null);i.options.__file="src/Components/Messenger/vue/components/icons/icon-cross.vue";t.a=i.exports},635:function(e,t,n){"use strict";n(596)},636:function(e,t,n){(t=n(28)(!1)).push([e.i,".v-etc {\n  position: relative;\n  display: inline-block;\n}\n.v-etc--active {\n  z-index: 2;\n}\n.v-etc__button {\n  position: relative;\n  z-index: 1;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  padding: 7px 13px;\n  opacity: 0.4;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: pointer;\n}\n.v-etc--active .v-etc__button,\n.v-etc__button:hover {\n  opacity: 0.8;\n}\n.v-etc__popover {\n  right: 0;\n}\n.v-etc__popover--top {\n  bottom: 100%;\n}\n.v-etc__popover--bottom {\n  top: 100%;\n}\n",""]),e.exports=t},718:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="findUsers"},830:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat",on:{dragover:function(t){return e.$emit("dragover",t)},drop:function(t){return e.$emit("drop",t)}}},[n("div",{staticClass:"chat__container"},[e.$slots.header?n("div",{staticClass:"chat__header"},[n("span",{staticClass:"chat__header-back",class:{"chat__header-back--showed":e.backButtonShowed},on:{click:function(t){return e.$emit("close")}}},[n("icon-base",{attrs:{"icon-name":"back",height:14,width:8}},[n("icon-back")],1)],1),e._v(" "),e._t("header"),e._v(" "),e.$slots["header-right"]?n("div",{staticClass:"chat__header-right"},[e._t("header-right")],2):e._e()],2):e._e(),e._v(" "),e._t("content"),e._v(" "),e._t("footer")],2)])};a._withStripped=!0;var s=n(569),i=function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.276121 6.30665L6.03521 0.287082C6.40158 -0.095694 6.99633 -0.095694 7.36175 0.287082C7.72811 0.669858 7.72811 1.291 7.36175 1.67378L2.26687 7L7.36175 12.3262C7.72811 12.709 7.72811 13.3301 7.36175 13.7129C6.99538 14.0957 6.40063 14.0957 6.03521 13.7129L0.276121 7.69236C0.0924621 7.50147 0.000156879 7.25024 0.000156879 7C0.000156879 6.74976 0.0934134 6.49853 0.276121 6.30764V6.30665Z",fill:"#4086E0"}})};i._withStripped=!0;var o=n(10),r=Object(o.a)({},i,[],!1,null,null,null);r.options.__file="src/Components/Messenger/vue/components/icons/icon-back.vue";var c=r.exports,l={components:{IconBase:s.a,IconBack:c},props:{backButtonShowed:{type:Boolean,default:!1}}},d=(n(1333),Object(o.a)(l,a,[],!1,null,"569f3e06",null));d.options.__file="src/Components/Messenger/vue/components/chat/layout.vue";t.a=d.exports},949:function(e,t,n){var a=n(1334);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("35ed430a",a,!1,{})},950:function(e,t,n){var a=n(1336);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("431bef73",a,!1,{})},951:function(e,t,n){var a=n(1338);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("6cb4ce74",a,!1,{})},952:function(e,t,n){var a=n(1340);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("6b0ead5f",a,!1,{})},953:function(e,t,n){var a=n(1342);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("37d9c4e7",a,!1,{})},954:function(e,t,n){var a=n(1344);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("4a26bf1c",a,!1,{})},955:function(e,t,n){var a=n(1346);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("2056b418",a,!1,{})},957:function(e,t,n){var a=n(1350);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("7cb5067a",a,!1,{})},958:function(e,t,n){var a=n(1352);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("40eb6304",a,!1,{})},959:function(e,t,n){var a=n(1354);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("bc1a27e6",a,!1,{})},960:function(e,t,n){var a=n(1356);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("628e9120",a,!1,{})},961:function(e,t,n){var a=n(1358);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("bd0ed7de",a,!1,{})},962:function(e,t,n){var a=n(1360);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("1fa2b228",a,!1,{})},963:function(e,t,n){var a=n(1362);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("5d139e2e",a,!1,{})}}]);