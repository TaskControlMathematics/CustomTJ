(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1110:function(e,t,n){"use strict";n(859)},1111:function(e,t,n){(t=n(28)(!1)).push([e.i,'.v-shares-embed__preview {\n  --ratio: 56.25%;\n  background-color: #000;\n  position: relative;\n  margin-bottom: 16px;\n}\n.v-shares-embed__preview::before {\n  content: \'\';\n  display: block;\n  padding-top: var(--ratio);\n}\n.v-shares-embed__preview iframe {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.v-shares-embed__title {\n  font-size: 22px;\n  line-height: 1.3em;\n  font-weight: 500;\n  margin-bottom: 16px;\n}\n.v-shares-embed__subtitle {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1.5em;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n.v-shares-embed__copy {\n  cursor: pointer;\n  color: #595959;\n  margin-left: auto;\n}\n.v-shares-embed__copy:hover {\n  color: #4683d9;\n}\n.v-shares-embed__copy .icon {\n  display: block;\n}\n.v-shares-embed__code {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  width: 100%;\n  resize: vertical;\n  font-family: Menlo, Consolas, "Lucida Console", Monaco, "Courier New", Courier, monospace;\n  font-size: 13px;\n  line-height: 1.4em;\n  padding: 12px 24px 12px 16px;\n  border-radius: 4px;\n  background: rgba(0,0,0,0.05);\n  border: 1px solid rgba(0,0,0,0.1);\n}\n.v-shares-embed__code:hover {\n  border-color: rgba(0,0,0,0.2);\n}\n.v-shares-embed__code:focus {\n  border-color: #4683d9;\n  outline: none;\n}\n',""]),e.exports=t},1112:function(e,t,n){"use strict";n(860)},1113:function(e,t,n){(t=n(28)(!1)).push([e.i,".v-shares--active {\n  position: relative;\n}\n.v-shares svg {\n  display: block;\n}\n.v-shares__button {\n  color: #595959;\n  cursor: pointer;\n  overflow: hidden;\n}\n@media (hover: hover) {\n.v-shares__button:hover {\n    color: #4683d9;\n}\n}\n.v-shares .popover {\n/**\n    * Increased from 2 to 10 (10 - reserve) to prevent this situation:\n    * https://cmtt-ru.atlassian.net/browse/UGC-223\n    */\n  z-index: 10;\n  margin-top: 8px;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n}\n.v-shares .popover .icon--v_bookmark_solid {\n  fill: #4683d9;\n}\n",""]),e.exports=t},549:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"container",class:["v-shares",{"v-shares--active":e.isPopoverActive}],attrs:{title:e.$gettext("Share")}},[n("div",{staticClass:"v-shares__button",on:{click:e.onToggleClick}},[n("icon",{attrs:{name:"v_share",width:"24",height:"24"}})],1),e._v(" "),e.isPopoverActive?n("popover",{model:{value:e.popoverItems,callback:function(t){e.popoverItems=t},expression:"popoverItems"}}):e._e()],1)};o._withStripped=!0;var i=n(35),s=n.n(i),r=n(21),a=n(17),l=n(5),c=n(161),m=n(600),d=n(589),p=n(91),v=n(26),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-shares-embed"},[n("div",{staticClass:"v-shares-embed__title"},[n("translate",{attrs:{"translate-context":"Share"}},[e._v("\n      Embed\n    ")])],1),e._v(" "),n("div",{staticClass:"v-shares-embed__preview",style:{"--ratio":100*e.previewRatio+"%"},domProps:{innerHTML:e._s(e.value)}}),e._v(" "),n("div",{staticClass:"v-shares-embed__subtitle"},[n("translate",[e._v("\n      Embed code\n    ")]),e._v(" "),n("div",{staticClass:"v-shares-embed__copy",on:{click:e.copyCode}},[n("icon",{attrs:{name:"v_copy",width:"24",height:"24"}})],1)],1),e._v(" "),n("textarea",{ref:"code",staticClass:"v-shares-embed__code",attrs:{readonly:""},domProps:{value:e.value},on:{focus:e.onCodeFocus}})])};u._withStripped=!0;var h={name:"layout-shares",components:{Icon:v.a},props:{value:{type:String,required:!0}},computed:{previewRatio(){const e=parseInt(/width="(\d+)"/gi.exec(this.value)[1],10),t=parseInt(/height="(\d+)"/gi.exec(this.value)[1],10);return e&&t?parseFloat((t/e).toFixed(4)):56.25}},mounted(){const{code:e}=this.$refs;e.style.height="1px",e.style.height=e.scrollHeight+2+"px"},methods:{async copyCode(){await Object(c.a)(this.value),Object(l.success)(this.$gettext("The embed code has been copied"))},onCodeFocus(e){e.target.select()}}},b=(n(1110),n(10)),f=Object(b.a)(h,u,[],!1,null,null,null);f.options.__file="src/Components/Shares/vue/layout-shares-embed.vue";var _=f.exports;s.a.use(d.a);var g={name:"layout-shares",components:{Icon:v.a,Popover:p.default},props:{id:{type:Number,default:0,required:!0},url:{type:String,default:""},title:{type:String,default:""},services:{type:Object,default:()=>{}},isFavorited:{type:Boolean,default:!1},embed:{type:String,default:""}},data:()=>({isPopoverActive:!1,moduleShares:null,moduleFavoriteModel:null,appCodename:window.__codename}),computed:{copyButtonParams(){return{title:this.$gettext("Copy the link"),icon:"v_link",action:()=>{Object(c.a)(this.url).then(()=>{Object(l.success)(this.$gettext("The link has been copied")),this.isPopoverActive=!1,this.$popup.close()})}}},favoriteButtonParams(){return{title:this.isFavorited?this.$gettext("Remove from bookmarks"):this.$gettext("Add to bookmarks"),icon:this.isFavorited?"v_bookmark_solid":"v_bookmark",action:()=>{this.isFavorited=!this.isFavorited,this.setFavoriteState(this.isFavorited),this.$popup.close()}}},embedButtonParams(){return{title:this.$pgettext("Share","Embed"),icon:"v_code",action:()=>{this.$popup.open(_,{maxWidth:680,props:{value:this.embed}}),this.isPopoverActive=!1}}},systemButtonParams(){return{title:this.$gettext("Share via..."),icon:"v_share",action:()=>{window.navigator.share({title:this.title,url:this.url}),this.$popup.close()}}},servicesPopoverItems(){const e={},t=Object.keys(this.services);return this.moduleShares.orderServicesByHistory(t).forEach(t=>{const{title:n,url:o}=this.services[t],i="v_"+t;e[t]={title:n,icon:i,action:()=>{this.openWindow(o),this.moduleShares.updateHistory(t)}}}),e},popoverItems(){const e=Object.values({copy:this.copyButtonParams,favorite:this.favoriteButtonParams,...this.servicesPopoverItems});return this.embed&&(e.embed=this.embedButtonParams),e.forEach(e=>{e.label=e.title}),e},mobilePopoverItems(){const e={copy:this.copyButtonParams,favorite:this.favoriteButtonParams},t=[e],n="function"==typeof window.navigator.share;return this.embed&&(e.embed=this.embedButtonParams),n&&t.push({system:this.systemButtonParams}),t}},created(){this.moduleShares=Air.import("module.shares"),this.moduleFavoriteModel=Air.import("module.favorite_model")},mounted(){this.moduleFavoriteModel.on("Updated "+this.id,e=>{this.isFavorited=e.state})},beforeDestroy(){this.moduleFavoriteModel.off()},methods:{onToggleClick(){r.e.is("mobile")?this.$popup.open(m.a,{align:"bottom",theme:"gray",props:{title:this.$gettext("Share"),items:this.mobilePopoverItems}}):this.isPopoverActive=!this.isPopoverActive},onClickOutside(){this.isPopoverActive=!1},openWindow(e){const t=(Object(a.f)()-600)/2,n=(Object(a.e)()-450)/2;window.open(e,"_blank",`toolbar=yes,scrollbars=yes,resizable=yes,width=600,height=450,left=${t},top=${n}`)},setFavoriteState(e){this.moduleFavoriteModel.setState({id:this.id,type:1,state:e})},openShareDialog(){this.onToggleClick()}}},x=(n(1112),Object(b.a)(g,o,[],!1,null,null,null));x.options.__file="src/Components/Shares/vue/chunk.layout-shares.vue";t.default=x.exports},600:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-mobile-menu"},[n("div",{staticClass:"v-mobile-menu__header"},[e.title?n("div",{staticClass:"v-mobile-menu__name"},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"v-mobile-menu__close",on:{click:function(t){return e.$emit("close")}}},[n("icon",{attrs:{name:"v_close",width:"16",height:"16"}})],1)]),e._v(" "),e._l(e.filteredItems,(function(t,o){return n("div",{key:o,staticClass:"v-mobile-menu__list"},e._l(t,(function(t,o){return n(t.url?"a":"div",{key:o,tag:"component",staticClass:"v-mobile-menu__item",attrs:{href:t.url||!1,target:!!t.url&&"_blank"},on:{click:function(e){"function"==typeof t.action&&t.action()}}},[n("div",{staticClass:"v-mobile-menu__icon"},[t.icon?n("icon",{attrs:{name:t.icon,width:"24",height:"24"}}):e._e()],1),e._v(" "),n("div",{staticClass:"v-mobile-menu__title"},[n("span",[e._v(e._s(t.title))])]),e._v(" "),t.more?n("div",{staticClass:"v-mobile-menu__more"},[n("icon",{attrs:{name:"v_arrow_right",width:"20",height:"20"}})],1):e._e()])})),1)})),e._v(" "),e._t("default")],2)};o._withStripped=!0;var i={name:"layout-mobile-menu",components:{Icon:n(26).a},props:{title:{type:String,default:""},items:{type:Object,default:()=>[]}},computed:{filteredItems(){return this.items.filter(e=>Object.keys(e).length)}}},s=(n(655),n(10)),r=Object(s.a)(i,o,[],!1,null,null,null);r.options.__file="src/Components/Ui/vue/layout/layout-mobile-menu.vue";t.a=r.exports},617:function(e,t,n){var o=n(656);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(29).default)("3062bb32",o,!1,{})},655:function(e,t,n){"use strict";n(617)},656:function(e,t,n){(t=n(28)(!1)).push([e.i,".v-mobile-menu {\n  --offset-x: 20px;\n  --offset-y: 20px;\n  --height: 48px;\n  --font-size: 16px;\n  padding: 0 var(--offset-x) var(--offset-y);\n}\n.v-mobile-menu__header {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  line-height: 1.5em;\n  font-weight: 500;\n  padding: 0 var(--offset-x);\n  margin-left: calc(var(--offset-x) * -1);\n  margin-right: calc(var(--offset-x) * -1);\n  height: 50px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background-color: #fff;\n  margin-bottom: 2px;\n}\n.v-mobile-menu__name {\n  margin-top: 5px;\n}\n.v-mobile-menu__close {\n  margin-left: auto;\n  -ms-flex-item-align: start;\n  align-self: flex-start;\n  padding: 10px;\n  margin-right: calc(var(--offset-x) * -1);\n  cursor: pointer;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.v-mobile-menu__close .icon {\n  display: block;\n}\n.v-mobile-menu__list:not(:last-child):after {\n  content: '';\n  display: block;\n  height: 1px;\n  background-color: rgba(0,0,0,0.1);\n  margin: 8px 0;\n  margin-left: 36px;\n  margin-right: calc(var(--offset-x) * -1);\n}\n.v-mobile-menu__list:last-child {\n  margin-bottom: -12px;\n}\n.v-mobile-menu__item {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-size: var(--font-size);\n  line-height: var(--height);\n  cursor: pointer;\n  white-space: nowrap;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.v-mobile-menu__icon {\n  width: 24px;\n  height: 24px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  margin-right: 12px;\n  color: #000;\n}\n.v-mobile-menu__icon .icon--v_bookmark_solid {\n  fill: #4683d9;\n}\n.v-mobile-menu__title {\n  min-width: 0;\n  -ms-flex: 1;\n  flex: 1;\n}\n.v-mobile-menu__title span {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-mobile-menu__more .icon {\n  display: block;\n}\n",""]),e.exports=t},859:function(e,t,n){var o=n(1111);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(29).default)("48ff03ee",o,!1,{})},860:function(e,t,n){var o=n(1113);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(29).default)("cf86bc22",o,!1,{})}}]);