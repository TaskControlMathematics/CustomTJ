(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1331:function(e,t,n){"use strict";n(948)},1332:function(e,t,n){(t=n(28)(!1)).push([e.i,".mf-header {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 0 12px;\n  z-index: 3;\n}\n.mf-header__user {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 16px;\n}\n.mf-header__user .icon {\n  margin-left: 7px;\n}\n.mf-header__user .icon--mute {\n  color: var(--color-text-gray);\n  width: 12px;\n  height: 12px;\n}\n.mf-header__photo {\n  width: 20px;\n  height: 20px;\n  margin-right: 8px;\n  background: #ccc;\n}\n.mf-header__online {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  left: 27px;\n  top: 22px;\n  background: var(--color-online);\n  border: 1px solid #fff;\n  border-radius: 10px;\n  -webkit-animation: onlineIn 200ms ease;\n  animation: onlineIn 200ms ease;\n}\n.mf-header__badge {\n  display: inline-block;\n  background: #4086e0;\n  border-radius: 10px;\n  color: #fff;\n  padding: 3px 6px;\n  font-weight: 500;\n  font-size: 11px;\n  line-height: 11px;\n  margin-left: 5px;\n}\n.mf-header__menu {\n  display: inline-block;\n  margin: 0 0 0 auto;\n  z-index: 2;\n  pointer-events: all;\n}\n.mf-header__close {\n  display: inline-block;\n  margin: 0 0 0 4px;\n  z-index: 2;\n  pointer-events: all;\n}\n.mf-header__close svg {\n  margin: 0;\n}\n.mf-header__close:hover {\n  opacity: 0.8;\n}\n",""]),e.exports=t},1363:function(e,t,n){"use strict";n(964)},1364:function(e,t,n){(t=n(28)(!1)).push([e.i,".m-floating[data-v-dd008ad4] {\n  position: fixed;\n  bottom: 0;\n  width: 320px;\n  background: #fff;\n  border-radius: 8px 8px 0 0;\n  -webkit-box-shadow: 0 0 5px rgba(116,116,116,0.25);\n  box-shadow: 0 0 5px rgba(116,116,116,0.25);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  z-index: 9999;\n}\n.m-floating__header[data-v-dd008ad4] {\n  height: 40px;\n  border-radius: 8px 8px 0 0;\n  -webkit-box-shadow: inset 0px -1px 0px rgba(0,0,0,0.1);\n  box-shadow: inset 0px -1px 0px rgba(0,0,0,0.1);\n  cursor: pointer;\n}\n.m-floating__header[data-v-dd008ad4]:hover {\n  background: -webkit-gradient(linear, left bottom, left top, from(rgba(0,0,0,0.02)), to(rgba(0,0,0,0.02))), #fff;\n  background: linear-gradient(0deg, rgba(0,0,0,0.02), rgba(0,0,0,0.02)), #fff;\n}\n.m-floating__content[data-v-dd008ad4] {\n  height: 360px;\n}\n.m-floating--minimized .m-floating__content[data-v-dd008ad4] {\n  display: none;\n}\n",""]),e.exports=t},1365:function(e,t,n){"use strict";var a,s,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1366),r=(s=o)&&s.__esModule?s:{default:s};!function(){function n(e,t){e.innerHTML=(0,r.default)(e.innerHTML,t.value)}"object"==i(t)?e.exports=n:void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},1366:function(e,t,n){e.exports=n(1367).default},1367:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.default.tokenize(e),s=[],o=[];for(n=new c(n),t=0;t<a.length;t++){var u=a[t];if("StartTag"!==u.type)if("Chars"===u.type){var m=l(u.chars,n);s.push.apply(s,m)}else s.push(u);else{s.push(u);var g=u.tagName.toUpperCase(),f="A"===g||r.contains(n.ignoreTags,g);if(!f)continue;var p=s.length;d(g,a,++t,s),t+=s.length-p-1}}for(t=0;t<s.length;t++){var b=s[t];switch(b.type){case"StartTag":var v="<"+b.tagName;if(b.attributes.length>0){var x=h(b.attributes);v+=" "+x.join(" ")}v+=">",o.push(v);break;case"EndTag":o.push("</"+b.tagName+">");break;case"Chars":o.push(b.chars);break;case"Comment":o.push("\x3c!--"+b.chars+"--\x3e")}}return o.join("")};var a,s=n(1368),i=(a=s)&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1371));var r=o.options,c=r.Options;function l(e,t){for(var n=o.tokenize(e),a=[],s=0;s<n.length;s++){var i=n[s];if("nl"===i.type&&t.nl2br)a.push({type:"StartTag",tagName:"br",attributes:[],selfClosing:!0});else if(i.isLink&&t.check(i)){var r=t.resolve(i),c=r.formatted,l=r.formattedHref,d=r.tagName,h=r.className,u=r.target,m=r.attributes,g=[["href",l]];for(var f in h&&g.push(["class",h]),u&&g.push(["target",u]),m)g.push([f,m[f]]);a.push({type:"StartTag",tagName:d,attributes:g,selfClosing:!1}),a.push({type:"Chars",chars:c}),a.push({type:"EndTag",tagName:d})}else a.push({type:"Chars",chars:i.toString()})}return a}function d(e,t,n,a){for(var s=1;n<t.length&&s>0;){var i=t[n];"StartTag"===i.type&&i.tagName.toUpperCase()===e?s++:"EndTag"===i.type&&i.tagName.toUpperCase()===e&&s--,a.push(i),n++}return a}function h(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],s=a[0],i=a[1];t.push(s+'="'+(i.replace(/"/g,"&quot;")+'"'))}return t}},1368:function(e,t,n){"use strict";t.__esModule=!0;var a=c(n(965)),s=c(n(966)),i=c(n(967)),o=c(n(968)),r=c(n(1370));function c(e){return e&&e.__esModule?e:{default:e}}var l={HTML5NamedCharRefs:a.default,EntityParser:s.default,EventedTokenizer:i.default,Tokenizer:o.default,tokenize:r.default};t.default=l},1369:function(e,t,n){"use strict";t.__esModule=!0,t.isSpace=function(e){return a.test(e)},t.isAlpha=function(e){return s.test(e)},t.preprocessInput=function(e){return e.replace(i,"\n")};var a=/[\t\n\f ]/,s=/[A-Za-z]/,i=/\r\n?/g},1370:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return new a.default(new s.default(i.default),t).tokenize(e)};var a=o(n(968)),s=o(n(966)),i=o(n(965));function o(e){return e&&e.__esModule?e:{default:e}}},1371:function(e,t,n){"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var a=n(719),s=r(n(1372)),i=r(n(1373)),o=r(n(1374));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=function(e){return o.run(i.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e),a=[],s=0;s<n.length;s++){var i=n[s];!i.isLink||t&&i.type!==t||a.push(i.toObject())}return a},t.inherits=a.inherits,t.options=s,t.parser=o,t.scanner=i,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e);return 1===n.length&&n[0].isLink&&(!t||n[0].type===t)},t.tokenize=c},1372:function(e,t,n){"use strict";t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={defaultProtocol:"http",events:null,format:o,formatHref:o,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function i(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:s.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:s.events,this.format=e.hasOwnProperty("format")?e.format:s.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:s.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:s.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:s.tagName,this.target=e.hasOwnProperty("target")?e.target:s.target,this.validate=e.hasOwnProperty("validate")?e.validate:s.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||s.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||s.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:s.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function o(e){return e}t.defaults=s,t.Options=i,t.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},i.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var i=void 0,o=this[e];if(!o)return o;switch(void 0===o?"undefined":a(o)){case"function":return o(t,n.type);case"object":return"function"==typeof(i=o.hasOwnProperty(n.type)?o[n.type]:s[e])?i(t,n.type):i}return o},getObject:function(e,t,n){var a=this[e];return"function"==typeof a?a(t,n.type):a}}},1373:function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var a=n(969),s=n(807),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s);var o="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),r="0123456789".split(""),c="0123456789abcdefghijklmnopqrstuvwxyz".split(""),l=[" ","\f","\r","\t","\v"," "," ","᠎"],d=[],h=function(e){return new a.CharacterState(e)},u=h(),m=h(s.NUM),g=h(s.DOMAIN),f=h(),p=h(s.WS);u.on("@",h(s.AT)).on(".",h(s.DOT)).on("+",h(s.PLUS)).on("#",h(s.POUND)).on("?",h(s.QUERY)).on("/",h(s.SLASH)).on("_",h(s.UNDERSCORE)).on(":",h(s.COLON)).on("{",h(s.OPENBRACE)).on("[",h(s.OPENBRACKET)).on("<",h(s.OPENANGLEBRACKET)).on("(",h(s.OPENPAREN)).on("}",h(s.CLOSEBRACE)).on("]",h(s.CLOSEBRACKET)).on(">",h(s.CLOSEANGLEBRACKET)).on(")",h(s.CLOSEPAREN)).on("&",h(s.AMPERSAND)).on([",",";","!",'"',"'"],h(s.PUNCTUATION)),u.on("\n",h(s.NL)).on(l,p),p.on(l,p);for(var b=0;b<o.length;b++){var v=(0,a.stateify)(o[b],u,s.TLD,s.DOMAIN);d.push.apply(d,v)}var x=(0,a.stateify)("file",u,s.DOMAIN,s.DOMAIN),y=(0,a.stateify)("ftp",u,s.DOMAIN,s.DOMAIN),C=(0,a.stateify)("http",u,s.DOMAIN,s.DOMAIN),k=(0,a.stateify)("mailto",u,s.DOMAIN,s.DOMAIN);d.push.apply(d,x),d.push.apply(d,y),d.push.apply(d,C),d.push.apply(d,k);var O=x.pop(),w=y.pop(),I=C.pop(),T=k.pop(),A=h(s.DOMAIN),S=h(s.PROTOCOL),E=h(s.MAILTO);w.on("s",A).on(":",S),I.on("s",A).on(":",S),d.push(A),O.on(":",S),A.on(":",S),T.on(":",E);var N=(0,a.stateify)("localhost",u,s.LOCALHOST,s.DOMAIN);d.push.apply(d,N),u.on(r,m),m.on("-",f).on(r,m).on(c,g),g.on("-",f).on(c,g);for(var M=0;M<d.length;M++)d[M].on("-",f).on(c,g);f.on("-",f).on(r,g).on(c,g),u.defaultTransition=h(s.SYM);var _=u;t.State=a.CharacterState,t.TOKENS=i,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),n=e.length,a=[],s=0;s<n;){for(var i=u,o=null,r=0,c=null,l=-1;s<n&&(o=i.next(t[s]));)(i=o).accepts()?(l=0,c=i):l>=0&&l++,r++,s++;if(!(l<0)){s-=l,r-=l;var d=c.emit();a.push(new d(e.substr(s-r,r)))}}return a},t.start=_},1374:function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var a=n(969),s=n(1375),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),o=n(807);var r=function(e){return new a.TokenState(e)},c=r(),l=r(),d=r(),h=r(),u=r(),m=r(),g=r(),f=r(s.URL),p=r(),b=r(s.URL),v=r(s.URL),x=r(),y=r(),C=r(),k=r(),O=r(),w=r(s.URL),I=r(s.URL),T=r(s.URL),A=r(s.URL),S=r(),E=r(),N=r(),M=r(),_=r(),L=r(),j=r(s.EMAIL),R=r(),D=r(s.EMAIL),z=r(s.MAILTOEMAIL),P=r(),U=r(),$=r(),B=r(),q=r(s.NL);c.on(o.NL,q).on(o.PROTOCOL,l).on(o.MAILTO,d).on(o.SLASH,h),l.on(o.SLASH,h),h.on(o.SLASH,u),c.on(o.TLD,m).on(o.DOMAIN,m).on(o.LOCALHOST,f).on(o.NUM,m),u.on(o.TLD,v).on(o.DOMAIN,v).on(o.NUM,v).on(o.LOCALHOST,v),m.on(o.DOT,g),_.on(o.DOT,L),g.on(o.TLD,f).on(o.DOMAIN,m).on(o.NUM,m).on(o.LOCALHOST,m),L.on(o.TLD,j).on(o.DOMAIN,_).on(o.NUM,_).on(o.LOCALHOST,_),f.on(o.DOT,g),j.on(o.DOT,L),f.on(o.COLON,p).on(o.SLASH,v),p.on(o.NUM,b),b.on(o.SLASH,v),j.on(o.COLON,R),R.on(o.NUM,D);var H=[o.DOMAIN,o.AT,o.LOCALHOST,o.NUM,o.PLUS,o.POUND,o.PROTOCOL,o.SLASH,o.TLD,o.UNDERSCORE,o.SYM,o.AMPERSAND],V=[o.COLON,o.DOT,o.QUERY,o.PUNCTUATION,o.CLOSEBRACE,o.CLOSEBRACKET,o.CLOSEANGLEBRACKET,o.CLOSEPAREN,o.OPENBRACE,o.OPENBRACKET,o.OPENANGLEBRACKET,o.OPENPAREN];v.on(o.OPENBRACE,y).on(o.OPENBRACKET,C).on(o.OPENANGLEBRACKET,k).on(o.OPENPAREN,O),x.on(o.OPENBRACE,y).on(o.OPENBRACKET,C).on(o.OPENANGLEBRACKET,k).on(o.OPENPAREN,O),y.on(o.CLOSEBRACE,v),C.on(o.CLOSEBRACKET,v),k.on(o.CLOSEANGLEBRACKET,v),O.on(o.CLOSEPAREN,v),w.on(o.CLOSEBRACE,v),I.on(o.CLOSEBRACKET,v),T.on(o.CLOSEANGLEBRACKET,v),A.on(o.CLOSEPAREN,v),S.on(o.CLOSEBRACE,v),E.on(o.CLOSEBRACKET,v),N.on(o.CLOSEANGLEBRACKET,v),M.on(o.CLOSEPAREN,v),y.on(H,w),C.on(H,I),k.on(H,T),O.on(H,A),y.on(V,S),C.on(V,E),k.on(V,N),O.on(V,M),w.on(H,w),I.on(H,I),T.on(H,T),A.on(H,A),w.on(V,w),I.on(V,I),T.on(V,T),A.on(V,A),S.on(H,w),E.on(H,I),N.on(H,T),M.on(H,A),S.on(V,S),E.on(V,E),N.on(V,N),M.on(V,M),v.on(H,v),x.on(H,v),v.on(V,x),x.on(V,x),d.on(o.TLD,z).on(o.DOMAIN,z).on(o.NUM,z).on(o.LOCALHOST,z),z.on(H,z).on(V,P),P.on(H,z).on(V,P);var K=[o.DOMAIN,o.NUM,o.PLUS,o.POUND,o.QUERY,o.UNDERSCORE,o.SYM,o.AMPERSAND,o.TLD];m.on(K,U).on(o.AT,$),f.on(K,U).on(o.AT,$),g.on(K,U),U.on(K,U).on(o.AT,$).on(o.DOT,B),B.on(K,U),$.on(o.TLD,_).on(o.DOMAIN,_).on(o.LOCALHOST,j);t.State=a.TokenState,t.TOKENS=i,t.run=function(e){for(var t=e.length,n=0,a=[],i=[];n<t;){for(var o=c,r=null,l=null,d=0,h=null,u=-1;n<t&&!(r=o.next(e[n]));)i.push(e[n++]);for(;n<t&&(l=r||o.next(e[n]));)r=null,(o=l).accepts()?(u=0,h=o):u>=0&&u++,n++,d++;if(u<0)for(var m=n-d;m<n;m++)i.push(e[m]);else{i.length>0&&(a.push(new s.TEXT(i)),i=[]),n-=u,d-=u;var g=h.emit();a.push(new g(e.slice(n-d,n)))}}return i.length>0&&a.push(new s.TEXT(i)),a},t.start=c},1375:function(e,t,n){"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var a=n(970),s=n(719),i=n(807);function o(e){return e instanceof i.DOMAIN||e instanceof i.TLD}var r=(0,a.createTokenClass)();r.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var c=(0,s.inherits)(r,(0,a.createTokenClass)(),{type:"email",isLink:!0}),l=(0,s.inherits)(r,(0,a.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),d=(0,s.inherits)(r,(0,a.createTokenClass)(),{type:"text"}),h=(0,s.inherits)(r,(0,a.createTokenClass)(),{type:"nl"}),u=(0,s.inherits)(r,(0,a.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,n=!1,a=this.v,s=[],r=0;a[r]instanceof i.PROTOCOL;)t=!0,s.push(a[r].toString().toLowerCase()),r++;for(;a[r]instanceof i.SLASH;)n=!0,s.push(a[r].toString()),r++;for(;o(a[r]);)s.push(a[r].toString().toLowerCase()),r++;for(;r<a.length;r++)s.push(a[r].toString());return s=s.join(""),t||n||(s=e+"://"+s),s},hasProtocol:function(){return this.v[0]instanceof i.PROTOCOL}});t.Base=r,t.MAILTOEMAIL=c,t.EMAIL=l,t.NL=h,t.TEXT=d,t.URL=u},1376:function(e,t,n){var a=n(1377);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("f431a4de",a,!1,{})},1377:function(e,t,n){(t=n(28)(!1)).push([e.i,".msngrConfirmOverlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.8);\n  overflow: hidden;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  z-index: 9999;\n  -webkit-animation: msngrFade 0.14s ease-out;\n  animation: msngrFade 0.14s ease-out;\n}\n.msngrConfirmWindow {\n  width: 100%;\n  max-width: 400px;\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 25px;\n  font-size: 15px;\n  line-height: 1.5em;\n  -webkit-animation: msngrScale 0.14s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  animation: msngrScale 0.14s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n}\n.msngrConfirmMessage {\n  margin-top: 5px;\n  margin-bottom: 30px;\n}\n.msngrConfirmButton {\n  margin-right: 10px;\n}\n@-moz-keyframes msngrFade {\n  0% {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes msngrFade {\n  0% {\n    opacity: 0;\n  }\n}\n@-o-keyframes msngrFade {\n  0% {\n    opacity: 0;\n  }\n}\n@keyframes msngrFade {\n  0% {\n    opacity: 0;\n  }\n}\n@-moz-keyframes msngrScale {\n  0% {\n    transform: scale(0.9);\n  }\n}\n@-webkit-keyframes msngrScale {\n  0% {\n    -webkit-transform: scale(0.9);\n    transform: scale(0.9);\n  }\n}\n@-o-keyframes msngrScale {\n  0% {\n    transform: scale(0.9);\n  }\n}\n@keyframes msngrScale {\n  0% {\n    -webkit-transform: scale(0.9);\n    transform: scale(0.9);\n  }\n}\n",""]),e.exports=t},545:function(e,t,n){"use strict";n.r(t),n.d(t,"Messenger",(function(){return Xe}));var a={};n.r(a),n.d(a,"createState",(function(){return y})),n.d(a,"getters",(function(){return V})),n.d(a,"actions",(function(){return K})),n.d(a,"mutations",(function(){return G})),n.d(a,"extendChannel",(function(){return W}));var s={};n.r(s),n.d(s,"createState",(function(){return Q})),n.d(s,"getters",(function(){return ee})),n.d(s,"actions",(function(){return te})),n.d(s,"mutations",(function(){return ne}));var i={};n.r(i),n.d(i,"createState",(function(){return ae})),n.d(i,"getters",(function(){return se})),n.d(i,"actions",(function(){return ie})),n.d(i,"mutations",(function(){return oe}));var o={};n.r(o),n.d(o,"createState",(function(){return ce})),n.d(o,"getters",(function(){return le})),n.d(o,"actions",(function(){return de})),n.d(o,"mutations",(function(){return he}));var r={};n.r(r),n.d(r,"createState",(function(){return ue})),n.d(r,"getters",(function(){return be})),n.d(r,"actions",(function(){return ve})),n.d(r,"mutations",(function(){return xe}));var c={};n.r(c),n.d(c,"shortDate",(function(){return De})),n.d(c,"time",(function(){return ze})),n.d(c,"day",(function(){return Pe})),n.d(c,"nl2br",(function(){return Ue})),n.d(c,"pluralize",(function(){return $e})),n.d(c,"fromLeonardo",(function(){return Be})),n.d(c,"formImageUrlCustom",(function(){return qe})),n.d(c,"truncate",(function(){return He}));var l=n(35),d=n.n(l),h=n(42),u=n(613),m=n(575),g=n(598),f=n(587),p=n(570);var b={users:{find:function(e){return Object(p.b)("/m/findUsers",{query:e})},getMyPermission:()=>Object(p.b)("/m/permission")},channels:{create:e=>Object(p.i)("/m/createChannel",e),update:e=>Object(p.i)("/m/editChannel",e),load({channelId:e=null,page:t=null,limit:n=null}){let a=null;return(e||t||n)&&(a={}),e&&(a.channelId=e),t&&(a.page=t),n&&(a.limit=n),Object(p.b)("/m/channels",a).then(e=>e.channels||[])},loadOne:e=>Object(p.b)("/m/channel",{id:e}).then(e=>e.channel),accept:({channelId:e})=>Object(p.i)("/m/acceptChannel",{channelId:e}),loadMembers:({channelId:e,page:t})=>Object(p.b)("/m/getMembers",{channelId:e,page:t}),addMembers:({channelId:e,members:t})=>Object(p.i)("/m/addMembers",{channelId:e,members:t}),changeRole:({channelId:e,memberId:t,role:n})=>Object(p.i)("/m/changeRole",{channelId:e,memberId:t,role:n}),removeMember:({channelId:e,memberId:t})=>Object(p.i)("/m/removeMember",{channelId:e,memberId:t}),remove:({channelId:e})=>Object(p.i)("/m/more/remove",{channelId:e}),leave:({channelId:e})=>Object(p.i)("/m/more/leave",{channelId:e})},messages:{send:e=>Object(p.i)("/m/send",e).then(e=>e),load:(e,t=0)=>Object(p.b)("/m/messages",{channelId:e,beforeTime:t}).then(e=>e.messages||[]),remove:(e,t)=>Object(p.i)("/m/removeMessages",{channelId:e,messagesIds:t}),getUnreadCount:()=>Object(p.b)("/m/counter").then(e=>e&&e.counter||0)},chat:{typing:({channelId:e})=>Object(p.i)("/m/typing",{channelId:e}),sendReading:({channelId:e})=>Object(p.i)("/m/markAsRead",{channelId:e}),block:({channelId:e})=>Object(p.i)("/m/markChannelAsSpam",{channelId:e}),clearHistory:e=>Object(p.i)("/m/more/clear",{channelId:e}),ignoreUser({channelId:e,subsiteId:t,undo:n=!1}){const a=n?"unignore":"ignore";return Object(p.i)("/m/more/"+a,{channelId:e,subsiteId:t})},muteChannel({channelId:e,undo:t=!1}){const n=t?"unmute":"mute";return Object(p.i)("/m/more/"+n,{channelId:e})},toggleMessenger({subsiteId:e,enable:t=!0}){const n=t?"active":"inactive";return console.warn("api@toggleMessenger requires channel id instead of subsite id"),Object(p.i)("/m/more/"+n,{subsiteId:e})},uploadMedia:({files:e})=>Object(p.i)("/m/uploader",null,e)}},v=n(603),x=n(1);function y(){return{channels:[],typingDebounces:{},usersOnline:[],unreadChannelsCount:0,onlineWatcherInterval:null,minimized:!1,permissions:{}}}const C="appendChannels",k="appendMessages",O="prependMessages",w="updateChannel",I="updateChannelProperty",T="appendMembersToChannel",A="removeMember",S="updateMember",E="updateMemberProperty",N="removeMessageIdTmp",M="markAsRead",_="typing",L="debounceTyping",j="removeChannel",R="removeMessages",D="updateMessage",z="moveMessageToEnd",P="changeOnline",U="changeUnreadChannelsCount",$="setOnlineWatcherInterval",B="clearOnlineWatcherInterval",q="minimize",H="changePermission",V={getChannelById:e=>t=>e.channels.find(e=>e.id===t),isUserOnline:e=>t=>e.usersOnline.find(e=>e.userId===t.toString())},K={async[m.m]({commit:e}){const t=await b.users.getMyPermission();e(H,t)},[m.s]:({commit:e},{channelId:t,beforeTime:n})=>b.messages.load(t,n).then(a=>{e(n?O:k,{channelId:t,messages:a})}),async[m.q]({commit:e,state:t,rootState:n},{channelId:a,page:s,limit:i}={}){let o=[];return o=1===i?[await b.channels.loadOne(a)]:await b.channels.load({channelId:a,page:s,limit:i}),o?(1===i?e(w,{channel:o[0]}):e(C,o),Array.isArray(o)&&o.filter(e=>e.type===f.a.Personal).forEach(t=>{const a=t.members.filter(e=>e.id!==n.user.id);if(a.length){const t=a[0];t.lastSeen===Object(x.c)("Online")&&e(P,{userId:t.id,status:!0})}}),{hasMore:o.length>0}):(Object(p.d)("[api] loadChannels","Wrong response",p.e.ERROR),{hasMore:!1})},[m.g]({commit:e},{channelId:t}){e(I,{channelId:t,updatingPairs:{unreadCount:0}})},[m.b]({rootGetters:e,commit:t,dispatch:n,rootState:a,state:s,getters:i},{message:o,channel:r,channelId:c,idTmp:l}){const d=r?r.id:c,h=o.type!==f.d.Default;t(w,{channel:r,channelId:c,message:o});const u=i.getChannelById(d);t(_,{channelId:d,user:null});const g=o.author&&o.author.id.toString()===a.user.id.toString();h||g||u.isMuted,n(m.K);if(u&&u.messages?u.messages.find(e=>void 0!==o.id&&e.id===o.id||void 0!==l&&e.idTmp===l):null)return;h||e.groupMessageIfNeeded(o,d),t(k,{channelId:d,messages:[o]});const p=e.currentChannel&&e.currentChannel.id===d;!h&&p&&document.hasFocus()&&!s.minimized&&o.author.id!==a.user.id&&n(m.o,{channelId:d})},[m.K]({commit:e}){b.messages.getUnreadCount().then(t=>{e(U,t)})},[m.t]({commit:e},{channelId:t,beforeTime:n,isSelf:a}){e(M,{channelId:t,beforeTime:n,isSelf:a})},[m.o]({state:e},{channelId:t}){if(!e.channels.find(e=>e.id===t).isInexistent)return b.chat.sendReading({channelId:t})},[m.d]({commit:e},{idTmp:t,channelId:n,messageId:a}){e(N,{idTmp:t,channelId:n,messageId:a})},[m.H]({commit:e,state:t},{channelId:n,author:a}){const s=t.typingDebounces[n];s&&clearTimeout(s),e(_,{channelId:n,user:a});const i=setTimeout(()=>{e(_,{channelId:n,user:null}),e(L,{channelId:n,timeoutId:null})},3e3);e(L,{channelId:n,timeoutId:i})},[m.c]:({commit:e},{channelId:t})=>b.chat.block({channelId:t}).then(()=>{e(j,t)}),[m.C]({dispatch:e},{channelId:t,messagesIds:n}){const a=n.filter(e=>"string"==typeof e);if(0!==a.length)return b.messages.remove(t,a).then(a=>{e(m.j,{channelId:t,messagesIds:n})});e(m.j,{channelId:t,messagesIds:n})},[m.j]({commit:e,getters:t},{channelId:n,messagesIds:a}){const s=t.getChannelById(n);a.forEach(t=>{const a=s.messages.findIndex(e=>e.id===t||e.idTmp===t),i=s.messages[a],o=s.messages[a-1],r=s.messages[a+1];o&&r&&o.author.id!==i.author.id&&r.sameAuthor&&e(D,{channelId:n,messageId:r.id,update:{sameAuthor:!1}})}),e(R,{channelId:n,messagesIds:a}),e(I,{channelId:n,updatingPairs:{lastMessage:s.messages[s.messages.length-1]}})},async[m.h]({commit:e},{channelId:t,needToRemoveChannel:n}){await b.chat.clearHistory(t),n?e(j,t):e(I,{channelId:t,updatingPairs:{messages:[]}})},[m.n]:({commit:e},{channelId:t,subsiteId:n,undo:a=!1})=>b.chat.ignoreUser({channelId:t,subsiteId:n,undo:a}).then(()=>{e(I,{channelId:t,updatingPairs:{isIgnored:!a,ignoredType:a?0:1}})}),[m.z]:({commit:e},{channelId:t,undo:n=!1})=>b.chat.muteChannel({channelId:t,undo:n}).then(()=>{e(I,{channelId:t,updatingPairs:{isMuted:!n}})}),[m.G]:({commit:e},{channelId:t,subsiteId:n,enable:a=!0})=>b.chat.toggleMessenger({subsiteId:n,enable:a}).then(()=>{e(I,{channelId:t,updatingPairs:{isEnabledMessenger:a}})}),[m.J]({commit:e},{channelId:t,messageId:n,update:a}){e(D,{channelId:t,messageId:n,update:a})},[m.y]({commit:e},{channelId:t,messageId:n}){e(z,{channelId:t,messageId:n})},[m.L]({commit:e},{userId:t}){e(P,{userId:t,status:!0})},[m.w]({commit:e},{channelId:t,messagesIds:n}){e(R,{channelId:t,messagesIds:n})},[m.k]({commit:e},{counter:t}){e(U,t)},[m.F]({commit:e,state:t}){const n=setInterval(()=>{t.usersOnline.forEach((t,n)=>{Date.now()-t.visitTime>6e4&&e(P,{userId:t.userId,status:!1})})},15e3);e($,n)},[m.i]({commit:e}){e(B)},[m.x]({commit:e},t){e(q,t)},async[m.l]({commit:e,dispatch:t,rootState:n},a){const s=await b.channels.create(a);if(!s)return!1;const i=s.channel;return i.members.push(Object(f.e)(n.user)),e(w,{channel:i}),t(g.e,{channelId:i.id}),!0},async[m.I]({commit:e,dispatch:t},n){const a=await b.channels.update(n);if(!a)return!1;const s=a.channel;return e(w,{channel:s}),!0},async[m.r]({commit:e},{channelId:t,page:n}){const a=await b.channels.loadMembers({channelId:t,page:n});e(T,{channelId:t,members:a})},async[m.a]({commit:e},{channelId:t,membersToAdd:n}){const a=await b.channels.addMembers({channelId:t,members:JSON.stringify(n)});return e(T,{channelId:t,members:a.members}),a.success},async[m.e]({commit:e},{channelId:t,memberId:n,role:a}){const s=await b.channels.changeRole({channelId:t,memberId:n,role:a});s.success?e(E,{channelId:t,memberId:n,pair:{role:a}}):console.warn("Can not change role. Response:",s)},async[m.D]({commit:e},{channelId:t,memberId:n,role:a}){e(E,{channelId:t,memberId:n,pair:{role:a}})},async[m.B]({commit:e},{channelId:t,memberId:n}){await b.channels.removeMember({channelId:t,memberId:n}),e(A,{channelId:t,memberId:n})},async[m.A]({commit:e},{channelId:t}){await b.channels.remove({channelId:t}),e(j,t)},async[m.p]({commit:e,dispatch:t},{channelId:n}){await b.channels.leave({channelId:n}),t(g.b),t(v.b,!1),e(j,n)},async[m.f]({commit:e},{channel:t}){e(w,{channel:t})},async[m.u]({commit:e},{channelId:t,members:n}){e(T,{channelId:t,members:n})},[m.v]({commit:e,rootState:t},{channelId:n,memberId:a}){e(A,{channelId:n,memberId:a}),a.toString()===t.user.id.toString()&&e(I,{channelId:n,updatingPairs:{hasBeenKicked:!0}})},[m.E]({commit:e},{channelId:t,value:n}){e(I,{channelId:t,updatingPairs:{draft:n}})}},G={[C](e,t){Array.isArray(t)&&t.length&&e.channels.push(...t.filter(t=>!e.channels.find(e=>e.id===t.id)).map(e=>W({channel:e})))},[k](e,{channelId:t,messages:n}){const a=e.channels.find(e=>e.id===t);if(!a)return void console.warn("Can not append messages. Channel does not exist",JSON.parse(JSON.stringify({stateChannels:e.channels,channelId:t,messages:n})));n=n.filter(e=>!a.messages.map(e=>e.id).includes(e.id));let s=!1;if(a.messages&&a.messages.length){const e=a.messages[a.messages.length-1],t=n[n.length-1];e&&t&&(s=e.dtCreated>t.dtCreated)}s?(n=[...a.messages,...n].sort((e,t)=>e.dtCreated-t.dtCreated),d.a.set(a,"messages",n)):a.messages.push(...n)},[O](e,{channelId:t,messages:n}){e.channels.find(e=>e.id===t).messages.unshift(...n)},[w](e,{channel:t,channelId:n,message:a=null}){const s=n?e.channels.findIndex(e=>e.id===n):e.channels.findIndex(e=>e.id===t.id);if(-1!==s){const n=e.channels[s];if(t){["members","messages"].forEach(e=>{const a=n[e];a&&a.length>0&&t[e]&&t[e].length<=a.length&&delete t[e]})}t=Object.assign(n,t),e.channels.splice(s,1)}else{if(n&&!t)return void Object(p.d)("UPDATE_CHANNEL",["can not find channel by channelId: %o",n],p.e.ERROR);t&&(t=W({channel:t,messages:t.lastMessage?[t.lastMessage]:[]}))}a&&(t.lastMessage=a),e.channels.unshift(t)},[N](e,{channelId:t,idTmp:n,messageId:a}){const s=e.channels.find(e=>e.id===t).messages.find(e=>e.idTmp===n);s.idTmp=null,s.id=a},[M](e,{channelId:t,beforeTime:n,isSelf:a}){if(!0===a)return;const s=f.c.Read,i=e.channels.find(e=>e.id===t);if(!i||!i.messages)return;i.messages.filter(e=>e.dtCreated<=n&&e.status!==s).forEach(e=>{e.status=s});i.lastMessage.status=s},[_](e,{channelId:t,user:n}){const a=e.channels.find(e=>e.id===t);a&&(a.typing=n)},[L](e,{channelId:t,timeoutId:n}){e.typingDebounces[t]=n},[I](e,{channelId:t,updatingPairs:n}){const a=e.channels.find(e=>e.id===t);Object.entries(n).forEach(([e,t])=>{d.a.set(a,e,t)})},[T](e,{channelId:t,members:n}){const a=e.channels.find(e=>e.id===t),s=n.filter(e=>void 0===a.members.find(t=>t.id===e.id));a.members=[...a.members,...s]},[A](e,{channelId:t,memberId:n}){const a=e.channels.find(e=>e.id===t);if(!a)return;const s=a.members.findIndex(e=>e.id===n);-1!==s&&a.members.splice(s,1)},[S](e,{channelId:t,memberId:n,member:a}){const s=e.channels.find(e=>e.id===t),i=s.members.findIndex(e=>e.id===n);s.members[i]=a},[E](e,{channelId:t,memberId:n,pair:a}){const s=e.channels.find(e=>e.id===t);if(!s)return;const i=s.members.findIndex(e=>e.id===n);Object.entries(a).forEach(([e,t])=>{d.a.set(s.members[i],e,t)})},[j](e,t){const n=e.channels.findIndex(e=>e.id===t);e.channels.splice(n,1)},[R](e,{channelId:t,messagesIds:n}){const a=e.channels.find(e=>e.id===t);n.forEach(e=>{const t=a.messages.findIndex(t=>t.id===e||t.idTmp===e);-1!==t&&a.messages.splice(t,1)})},[D](e,{channelId:t,messageId:n,update:a}){const s=e.channels.find(e=>e.id===t).messages.find(e=>e.id===n||e.idTmp===n);Object.entries(a).forEach(([e,t])=>{s[e]=t})},[z](e,{channelId:t,messageId:n}){const a=e.channels.find(e=>e.id===t).messages,s=a.findIndex(e=>e.id===n);a.push(a.splice(s,1)[0])},[P](e,{userId:t,status:n}){const a=e.usersOnline.findIndex(e=>e.userId===t);n?-1===a?e.usersOnline.push({userId:t.toString(),visitTime:Date.now()}):e.usersOnline[a].visitTime=Date.now():-1!==a&&(e.usersOnline.splice(a,1),e.channels.forEach(e=>{e.members.forEach(e=>{e.id.toString()===t&&(e.lastSeen=Object(x.c)("Last seen recently"))})}))},[U](e,t){e.unreadChannelsCount=t,window.Air&&window.Air.get("module.page")&&window.Air.get("module.page").setTitleBadge()},[$](e,t){e.onlineWatcherInterval=t},[B](e){e.onlineWatcherInterval&&(clearInterval(e.onlineWatcherInterval),e.onlineWatcherInterval=null)},[q](e,t){e.minimized=t},[H](e,t){e.permissions=t}};function W({channel:e,messages:t=[],scroll:n=0,typing:a=null,draft:s={text:"",media:[]}}){return Object.assign(e,{messages:t,scroll:n,typing:a,draft:s})}var F=n(34);function Q(){return{currentChannelId:null,selectedMessagesIds:[],channelsSockets:{}}}const Y="setCurrentChannelId",J="changeSelectedMessagesIds",Z="clearSelectedMessagesIds",X="saveChannelSocket",ee={currentChannel:(e,t,n)=>n.global.channels.find(t=>t.id===e.currentChannelId),messages:(e,t)=>t.currentChannel&&t.currentChannel.messages?t.currentChannel.messages:[],findMessage:(e,t,n)=>(t,a)=>n.global.channels.find(t=>t.id===e.currentChannelId).messages.find(e=>e.id===a),myLastMessage(e,t,n){const a=n.user.id;return[...t.messages].reverse().find(({author:e})=>e.id===a)},groupMessageIfNeeded:(e,t,n,a)=>function(e,t){const n=a.getChannelById(t);if(!n||!n.messages)return;const s=n.messages.findIndex(t=>t.id===e.id),i=n.messages[-1!==s?s-1:n.messages.length-1];if(!i||!i.author||i.author.id!==e.author.id)return;if(e.media&&e.media.length>0)return;const o=new Date(1e3*e.dtCreated)-new Date(1e3*i.dtCreated),r=Math.floor(o/1e3/60/60/24),c=Math.floor(o/1e3/60/60);if(r>0)return;c>0||(e.sameAuthor=!0)},canEdit(e,t,n){if(!t.currentChannel)return!1;const a=t.currentChannel.members.find(e=>e.id.toString()===n.user.id.toString());return!!a&&a.role>f.b.Default}},te={[g.e]({commit:e,getters:t,dispatch:n,rootState:a,state:s},{channelId:i,disableRouting:o}){n(v.c),n(v.b),e(Y,i);const r=a.global.channels.find(e=>e.id===i.toString()),c=!r.messages||0===r.messages.length,l=r.isInexistent;if(r.socketChannel&&!s.channelsSockets[i]){const t=new F.a({name:"m:"+r.socketChannel,onMessage:e=>{"messenger_event"===e.type&&n(e.action,e)}});t.open(),e(X,{channelId:i,socket:t})}if(n(m.g,{channelId:i}),n(g.h),n(m.s,{channelId:i}),c||l||n(m.o,{channelId:i}),!o){let e="/m/"+i;window.location.pathname.includes("example.html")&&(e="?channel="+i),Object(p.j)(e,r.title)}return Promise.resolve()},[g.b]({commit:e}){e(Y,void 0)},[g.d]:({dispatch:e},{channelId:t,beforeTime:n})=>e(m.s,{channelId:t,beforeTime:n}),[g.g]({commit:e,getters:t,rootState:n,dispatch:a,rootGetters:s},{data:i,isRetry:o}){let r=null;if(o){const e=s.getChannelById(i.channelId).messages.find(e=>e.idTmp===i.idTmp);a(m.J,{channelId:i.channelId,messageId:i.idTmp,update:{status:f.c.Sent,dtCreated:i.ts,sameAuthor:e.sameAuthor}})}else{const e=Object.assign({},i,{author:{id:n.user.id,picture:n.user.avatar_url,pictureData:n.user.avatar,title:n.user.name},dtCreated:i.ts,type:f.d.Default,status:f.c.Sent});i.replyTo&&(r=t.findMessage(i.channelId,i.replyTo)),a(m.b,{channelId:i.channelId,message:Object.assign(e,{replyTo:r})})}return b.messages.send(i).then(({message:e,idTmp:t})=>({idTmp:t,message:e})).catch(e=>{a(m.J,{channelId:i.channelId,messageId:i.idTmp,update:{status:f.c.Error}}),Object(p.d)("[api] sendMessage",e,p.e.ERROR)})},[g.c]:({getters:e})=>b.chat.typing({channelId:e.currentChannel.id}),[g.f]:({commit:e},{messageId:t,status:n=!0})=>e(J,{messageId:t,status:n}),[g.h]:({commit:e})=>e(Z),[g.i]:({commit:e},t)=>b.chat.uploadMedia(t).then(e=>e).catch(e=>{Object(p.d)("[api] uploadMedia",e,p.e.ERROR)}),[g.a]:(e,{channelId:t})=>b.channels.accept({channelId:t})},ne={[Y](e,t){e.currentChannelId=t},[J](e,{messageId:t,status:n}){const a=e.selectedMessagesIds.indexOf(t);n?e.selectedMessagesIds.push(t):-1!==a&&e.selectedMessagesIds.splice(a,1)},[Z](e){e.selectedMessagesIds=[]},[X](e,{channelId:t,socket:n}){e.channelsSockets[t]=n}};function ae(){return{socket:{isConnected:!1,message:"",reconnectError:!1}}}const se={},ie={},oe={["SOCKET_ONOPEN"](e,t){d.a.prototype.$socket=t.currentTarget,e.socket.isConnected=!0},["SOCKET_ONCLOSE"](e,t){e.socket.isConnected=!1},["SOCKET_ONERROR"](e,t){},["SOCKET_ONMESSAGE"](e,t){e.socket.message=t},["SOCKET_RECONNECT"](e,t){},["SOCKET_RECONNECT_ERROR"](e){e.socket.reconnectError=!0}};var re=n(718);function ce(){return{list:[]}}const le={getContactsByIds:e=>t=>e.list.filter(e=>t.includes(e.id))},de={[re.a]:async({state:e,commit:t},n="")=>await b.users.find(n)},he={saveContacts(e,t){t=t.map(e=>Object.assign(e,{id:e.id.toString()}));const n=e.list.length?e.list.map(e=>e.id):[];e.list=[...e.list,...t.filter(e=>!n.includes(e.id))]}};function ue(){return{isMiniMessenger:!1,isCreateGroupShowed:!1,isChannelInfoShowed:!1,isImageZoomOpened:!1}}const me="ENABLE_COMPACT_MODE",ge="TOGGLE_CREATE_GROUP",fe="TOGGLE_CHANNEL_INFO",pe="TOGGLE_IMAGE_ZOOM_STATE",be={},ve={[v.a]({commit:e}){e(me)},[v.c]({commit:e},t){e(ge,t),e(fe,!1)},[v.b]({commit:e},t){e(fe,t)},[v.d]({commit:e},t){e(pe,t)}},xe={[me](e){e.isMiniMessenger=!0},[ge](e,t){e.isCreateGroupShowed=t},[fe](e,t){e.isChannelInfoShowed=t},[pe](e,t){e.isImageZoomOpened=t}};d.a.use(h.a);const ye=[];var Ce=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-floating",class:{"m-floating--minimized":this.minimized},style:{right:this.$root.right+"px"}},[t("chat-header",{staticClass:"m-floating__header",on:{click:this.toggleMinimize}}),this._v(" "),t("div",{staticClass:"m-floating__content"},[t("chat",{attrs:{"channel-opened":!0}})],1)],1)};Ce._withStripped=!0;var ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mf-header",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("click")}}},[n("div",{staticClass:"mf-header__user",on:{click:e.titleClicked}},[e.currentChannel.id?n("ui-photo",{staticClass:"mf-header__photo",attrs:{id:e.currentChannel.id,src:e._f("fromLeonardo")(e.currentChannel.pictureData,36),color:e.currentChannel.pictureData&&e.currentChannel.pictureData.data?e.currentChannel.pictureData.data.color:"",title:e.currentChannel.title,size:20}}):e._e(),e._v(" "),e.isOnline?n("span",{staticClass:"mf-header__online"}):e._e(),e._v("\n    "+e._s(e._f("truncate")(e.currentChannel.title,15))+"\n    "),e.currentChannel.isVerified?n("icon-base",{attrs:{"icon-name":"verified",height:14,width:14}},[n("icon-verified")],1):e._e(),e._v(" "),e.currentChannel.isMuted?n("icon-base",{attrs:{"icon-name":"mute",height:16,width:16}},[n("icon-mute")],1):e._e()],1),e._v(" "),e.currentChannel.unreadCount>0?n("span",{staticClass:"mf-header__badge"},[e._v("\n    "+e._s(e.currentChannel.unreadCount)+"\n  ")]):e._e(),e._v(" "),n("span",{staticClass:"mf-header__menu"},[n("etc",{attrs:{items:e.controls,"dropdown-placement":e.etcDropdownPlacement}})],1),e._v(" "),n("span",{staticClass:"mf-header__close",on:{click:e.close}},[n("icon-base",{attrs:{"icon-name":"cross",width:12,height:12}},[n("icon-cross")],1)],1)])};ke._withStripped=!0;var Oe=n(626),we=n(569),Ie=n(713),Te=n(728),Ae=n(615),Se=n(616),Ee={name:"header-vue",components:{IconCross:Oe.a,IconBase:we.a,IconMute:Ie.a,IconVerified:Te.a,Etc:Ae.b,UiPhoto:Se.a},computed:{currentChannel(){return this.$store.getters.currentChannel},minimized(){return this.$store.state.global.minimized},isChatWithSelf(){return this.$store.state.user.id.toString()===this.currentChannel.id},isOnline(){return!this.isChatWithSelf&&this.$store.getters.isUserOnline(this.currentChannel.id)},controls(){const e=[{label:this.minimized?this.$gettext("Maximize"):this.$gettext("Minimize"),icon:this.minimized?"v_chevron_up":"v_chevron_down",action:()=>{this.$emit("click")}},{label:this.$gettext("Go to messages"),icon:"v_expand",action:()=>{window.Air.get("module.ajaxify").goTo("/m/"+this.currentChannel.id),this.$root.callMethod("closeWindow",this.$root.channelId)}},{label:this.$gettext("Clear history"),icon:"v_delete",action:this.clearHistory}];if(!this.isChatWithSelf){this.currentChannel.type===f.a.Personal&&e.push({label:this.currentChannel.isIgnored&&1===this.currentChannel.ignoredType?this.$gettext("Remove from blocklist"):this.$gettext("Add to blocklist"),icon:"v_lock_full",action:this.ignoreUser}),e.push({label:this.currentChannel.isMuted?this.$gettext("Enable notifications"):this.$gettext("Disable notifications"),icon:"v_mute",action:this.muteChannel});this.currentChannel.role===f.b.Creator||e.push({label:this.$gettext("Mark as spam"),icon:"v_ban",action:this.itsSpam})}return isNaN(window.__bugsSubsiteId)||e.push({label:this.$gettext("Report a bug"),icon:"v_alert",action:()=>{Object(p.h)("/m/"+window.__bugsSubsiteId)}}),e},isGroupChat(){return this.currentChannel.type===f.a.Group},etcDropdownPlacement(){return this.minimized?Ae.a.Top:Ae.a.Bottom}},methods:{close(){this.$root.callMethod("closeWindow",this.$root.channelId)},titleClicked(){if(this.isGroupChat)window.Air.get("module.ajaxify").goTo("/m/"+this.currentChannel.id),this.close();else{window.open("/u/"+this.currentChannel.id,"_blank").focus()}},ignoreUser(){const{isIgnored:e,ignoredType:t}=this.currentChannel,n=e&&1===t?this.$gettext("Remove from blocklist?"):this.$gettext("Add to blocklist?");this.$confirm({messageText:n,confirmText:e&&1===t?this.$gettext("Remove"):this.$gettext("Add"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(m.n,{channelId:this.currentChannel.id,undo:e&&1===t})).then(()=>{})},muteChannel(){const{isMuted:e}=this.currentChannel;this.$store.dispatch(m.z,{channelId:this.currentChannel.id,undo:e})},clearHistory(){this.$confirm({messageText:this.$gettext("All messages and the chat will be removed. However, they will remain for your interlocutor"),confirmText:this.$gettext("Remove"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(m.h,{channelId:this.currentChannel.id}))},itsSpam(){const e=this.$gettext("Leave and report spam?");this.$confirm({messageText:e,confirmText:this.$gettext("Leave"),declineText:this.$gettext("Cancel")}).then(()=>this.$store.dispatch(m.c,{channelId:this.currentChannel.id})).then(()=>{this.close()})}}},Ne=(n(1331),n(10)),Me=Object(Ne.a)(Ee,ke,[],!1,null,null,null);Me.options.__file="src/Components/Messenger/vue/components/floating-window/header.vue";var _e={name:"layout-vue",components:{ChatHeader:Me.exports,Chat:n(1086).a},computed:{minimized(){return this.$store.state.global.minimized}},created(){this.$store.dispatch(v.a)},methods:{toggleMinimize(){this.$store.dispatch(m.x,!this.minimized)}}},Le=(n(1363),Object(Ne.a)(_e,Ce,[],!1,null,"dd008ad4",null));Le.options.__file="src/Components/Messenger/vue/components/floating-window/layout.vue";var je=Le.exports;function Re(e){return e<10?"0"+e:e}function De(e){const t=new Date(1e3*e),n=new Date,a=Math.floor((n-t)/864e5);return a>7?Re(t.getDate())+"."+Re(t.getMonth()+1)+"."+t.getFullYear().toString().substring(2):a>=1?[Object(x.c)("Sun"),Object(x.c)("Mon"),Object(x.c)("Tue"),Object(x.c)("Wed"),Object(x.c)("Thu"),Object(x.c)("Fri"),Object(x.c)("Sat")][t.getDay()]:Re(t.getHours())+":"+Re(t.getMinutes())}function ze(e){const t=new Date(1e3*e);return Re(t.getHours())+":"+Re(t.getMinutes())}function Pe(e){const t=new Date(1e3*e);return t.getDate()+" "+[Object(x.c)("january"),Object(x.c)("february"),Object(x.c)("march"),Object(x.c)("april"),Object(x.c)("may"),Object(x.c)("june"),Object(x.c)("july"),Object(x.c)("august"),Object(x.c)("september"),Object(x.c)("october"),Object(x.c)("november"),Object(x.c)("december")][t.getMonth()]}function Ue(e){return e.replace("\n","<br>")}function $e(e,[t,n,a]){return(e=Math.abs(e))%10==1&&e%100!=11?t:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n:a}function Be(e,t){if(!e)return"";if("string"==typeof e)return console.warn("Filter: fromLeonardo. Image data passed as string. Object expected. %o",e),e;const n=e.data.uuid;let a="https://leonardo.osnova.io/"+e.data.uuid;return"http"===n.substr(0,4)&&(a=n),qe(a,t)}function qe(e,t,n,a="scale_crop"){return e.includes("leonardo.osnova")?void 0===t?e:(void 0===n&&(n=t),window.devicePixelRatio>1&&(t*=2,n*=2),"/"!==e.substr(-1)&&(e+="/"),`${e}-/${a}/${t}x${n}/`):e}function He(e,t){return e.length>t?e.substring(0,t)+"…":e}var Ve=n(125),Ke=n(1365),Ge=n.n(Ke);const We="msngrConfirm";class Fe{constructor({messageText:e=Object(x.c)("Confirm action"),confirmText:t=Object(x.c)("OK"),declineText:n=Object(x.c)("Cancel")}){return this.messageText=e,this.confirmText=t,this.declineText=n,this.nodes={window:null,overlay:null,message:null,confirm:null,decline:null},this.create(),this.listen().finally(this.destroy.bind(this))}create(){this.nodes.overlay=document.createElement("div"),this.nodes.overlay.classList.add(We+"Overlay"),this.nodes.window=document.createElement("div"),this.nodes.window.classList.add(We+"Window"),this.nodes.overlay.appendChild(this.nodes.window),this.nodes.message=document.createElement("div"),this.nodes.message.classList.add(We+"Message"),this.nodes.message.textContent=this.messageText,this.nodes.window.appendChild(this.nodes.message),this.nodes.confirm=document.createElement("div"),this.nodes.confirm.classList.add(We+"Button",We+"Button--confirm","ui-button","ui-button--2"),this.nodes.confirm.textContent=this.confirmText,this.nodes.window.appendChild(this.nodes.confirm),this.nodes.decline=document.createElement("div"),this.nodes.decline.classList.add(We+"Button",We+"Button--decline","ui-button","ui-button--5"),this.nodes.decline.textContent=this.declineText,this.nodes.window.appendChild(this.nodes.decline),document.body.appendChild(this.nodes.overlay)}destroy(){document.body.removeChild(this.nodes.overlay),Object.keys(this.nodes).forEach(e=>{this.nodes[e]=null})}listen(){return new Promise((e,t)=>{this.nodes.confirm.addEventListener("click",e),this.nodes.decline.addEventListener("click",t)})}}var Qe={install(e){e.prototype.$confirm=e=>{const t=new Fe(e);return new Promise((e,n)=>{t.then(e).catch(n)})}}},Ye=(n(1376),n(57)),Je=n.n(Ye),Ze=n(80);class Xe{constructor({container:e,socketUrl:t,socketName:n,user:l,onChannelOpen:g,appComponent:f,isMiniMessenger:p=!1}){this.container=e,this.onChannelOpen=g,this.isMiniMessenger=p,this.userSocket=null,this.onlineStatesSocket=null;const b=function({user:e}){return new h.a.Store({state:{user:e},modules:{global:Object(u.a)(a),chat:Object(u.a)(s),contacts:Object(u.a)(o),ui:Object(u.a)(r),sockets:Object(u.a)(i)},strict:!1,plugins:ye})}({user:l});this.store=b,Object.entries(c).forEach(([e,t])=>{d.a.filter(e,t)}),this.windowManager=new et({store:b,limit:1,onChannelOpen:g}),d.a.directive("click-outside",Ve.a),d.a.directive("linkified",Ge.a),this.userSocket=new F.a({url:t,name:n,onMessage:e=>{"messenger_event"===e.type&&b.dispatch(e.action,e)}}),d.a.use(Qe),d.a.use(Je.a,{translations:Ze,defaultLanguage:window.__i18nLocale});const x=this;this.form=new d.a({el:this.container,store:b,created(){this.$store.dispatch(m.F)},methods:{zoomImage(e,t){const n=`https://leonardo.osnova.io/${e.data.uuid}/`;this.$store.dispatch(v.d,!0),Air.get("module.image_zoom").zoomIn({items:[{src:n,preview_src:n,width:e.data.width,height:e.data.height,element:t}],onClose(){setTimeout(()=>{b.dispatch(v.d,!1)},50)}})},onChannelOpen:this.onChannelOpen,callMethod(e,t){x[e](t)}},render:e=>e(f)});const y=window.Air&&window.Air.get("module.hawk");y&&y.connectVue(d.a),this.onlineStatesSocket=new F.a({name:"online",onMessage:e=>{"user_turned_online"===e.type&&b.dispatch(m.L,{userId:e.data.userId})}}),this.connect()}connect(){this.userSocket.open(),this.onlineStatesSocket.open()}disconnect(){this.userSocket.close(),this.onlineStatesSocket.close();const e=this.store.state.chat.channelsSockets;Object.keys(e).length&&Object.entries(e).forEach(([e,t])=>{t.close()})}async openFloatingWindow(e){this.form.$store.getters.getChannelById(e)||await this.form.$store.dispatch(m.q,{channelId:e}),this.windowManager.openWindow({channelId:e}),this.form.$children[0].close()}onMessengerChannelChange(e){this.form.$root.$emit("onMessengerChannelChange",e)}destroy(){this.form&&(this.store&&this.store.dispatch(m.i),this.disconnect(),this.form.$destroy(),this.form=null)}}class et{constructor({store:e,limit:t=1,onChannelOpen:n=null}){this.store=e,this.limit=t,this.onChannelOpen=n,console.assert(1===t,"[MessengerWindowManager] Maximum windows limit is 1 for now."),this.windows={}}openWindow({channelId:e}){this.windows[e]?this.windows[e].minimize(!1):(Object.keys(this.windows).length>=this.limit&&this.closeWindow(Object.keys(this.windows).shift()),this.createWindow(e))}closeWindow(e){if(!this.windows[e])return;let t=this.windows[e].$el;this.windows[e].$destroy(),this.windows[e]=null,delete this.windows[e],t.remove(),t=null}createWindow(e){const t=this.createContainer(),n=this;this.store.dispatch(g.e,{channelId:e,disableRouting:!0});const a=new d.a({el:t,data:{channelId:e},computed:{right:()=>(window.location.pathname.includes("job")||window.location.pathname.includes("writing")?200:0)+30+350*Object.keys(n.windows).length+30},store:this.store,created(){n.onChannelOpen(e)},methods:{callMethod(e,t){n[e](t)},zoomImage(e,t){const n=`https://leonardo.osnova.io/${e.data.uuid}/`;Air.get("module.image_zoom").zoomIn({items:[{src:n,preview_src:n,width:e.data.width,height:e.data.height,element:t}]})},minimize:(e=!0)=>{this.store.dispatch(m.x,e)}},render:e=>e(je)});this.windows[e]=a}createContainer(){const e=document.createElement("div");return document.body.appendChild(e),e}}},613:function(e,t,n){"use strict";function a(e,t={}){return{state:e.createState(t),getters:e.getters,mutations:e.mutations,actions:e.actions}}n.d(t,"a",(function(){return a}))},719:function(e,t,n){"use strict";t.__esModule=!0,t.inherits=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.create(e.prototype);for(var s in n)a[s]=n[s];return a.constructor=t,t.prototype=a,t}},807:function(e,t,n){"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var a=n(970),s=n(719),i=(0,a.createTokenClass)();function o(e){var t=e?{v:e}:{};return(0,s.inherits)(i,(0,a.createTokenClass)(),t)}i.prototype={toString:function(){return this.v+""}};var r=o(),c=o("@"),l=o(":"),d=o("."),h=o(),u=o(),m=o("\n"),g=o(),f=o("+"),p=o("#"),b=o(),v=o("mailto:"),x=o("?"),y=o("/"),C=o("_"),k=o(),O=o(),w=o(),I=o("{"),T=o("["),A=o("<"),S=o("("),E=o("}"),N=o("]"),M=o(">"),_=o(")"),L=o("&");t.Base=i,t.DOMAIN=r,t.AT=c,t.COLON=l,t.DOT=d,t.PUNCTUATION=h,t.LOCALHOST=u,t.NL=m,t.NUM=g,t.PLUS=f,t.POUND=p,t.QUERY=x,t.PROTOCOL=b,t.MAILTO=v,t.SLASH=y,t.UNDERSCORE=C,t.SYM=k,t.TLD=O,t.WS=w,t.OPENBRACE=I,t.OPENBRACKET=T,t.OPENANGLEBRACKET=A,t.OPENPAREN=S,t.CLOSEBRACE=E,t.CLOSEBRACKET=N,t.CLOSEANGLEBRACKET=M,t.CLOSEPAREN=_,t.AMPERSAND=L},948:function(e,t,n){var a=n(1332);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("078f6706",a,!1,{})},964:function(e,t,n){var a=n(1364);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(29).default)("4982ab16",a,!1,{})},965:function(e,t,n){"use strict";t.__esModule=!0;t.default={nbsp:" "}},966:function(e,t,n){"use strict";function a(e){this.named=e}t.__esModule=!0;var s=/^#[xX]([A-Fa-f0-9]+)$/,i=/^#([0-9]+)$/,o=/^([A-Za-z0-9]+)$/;a.prototype.parse=function(e){if(e){var t=e.match(s);return t?"&#x"+t[1]+";":(t=e.match(i))?"&#"+t[1]+";":(t=e.match(o))?this.named[t[1]]||"&"+t[1]+";":void 0}},t.default=a},967:function(e,t,n){"use strict";t.__esModule=!0;var a=n(1369);function s(e,t){this.delegate=e,this.entityParser=t,this.state=null,this.input=null,this.index=-1,this.line=-1,this.column=-1,this.tagLine=-1,this.tagColumn=-1,this.reset()}s.prototype={reset:function(){this.state="beforeData",this.input="",this.index=0,this.line=1,this.column=0,this.tagLine=-1,this.tagColumn=-1,this.delegate.reset()},tokenize:function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},tokenizePart:function(e){for(this.input+=(0,a.preprocessInput)(e);this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var e=this.peek();return this.index++,"\n"===e?(this.line++,this.column=0):this.column++,e},consumeCharRef:function(){var e=this.input.indexOf(";",this.index);if(-1!==e){var t=this.input.slice(this.index,e),n=this.entityParser.parse(t);if(n){for(var a=t.length;a;)this.consume(),a--;return this.consume(),n}}},markTagStart:function(){this.tagLine=this.line,this.tagColumn=this.column,this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var e=this.peek();"<"===e?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===e?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();"!"===e?this.state="markupDeclaration":"/"===e?this.state="endTagOpen":(0,a.isAlpha)(e)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(e.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var e=this.consume();"-"===e?this.state="commentStartDash":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData(e),this.state="comment")},commentStartDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var e=this.consume();"-"===e?this.state="commentEndDash":this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":(this.delegate.appendToCommentData("-"+e),this.state="comment")},commentEnd:function(){var e=this.consume();">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+e),this.state="comment")},tagName:function(){var e=this.consume();(0,a.isSpace)(e)?this.state="beforeAttributeName":"/"===e?this.state="selfClosingStartTag":">"===e?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();(0,a.isSpace)(e)?this.consume():"/"===e?(this.state="selfClosingStartTag",this.consume()):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},attributeName:function(){var e=this.peek();(0,a.isSpace)(e)?(this.state="afterAttributeName",this.consume()):"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.state="beforeAttributeValue",this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();(0,a.isSpace)(e)?this.consume():"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.consume(),this.state="beforeAttributeValue"):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();(0,a.isSpace)(e)?this.consume():'"'===e?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===e?(this.state="attributeValueSingleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();'"'===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();"'"===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();(0,a.isSpace)(e)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===e?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||"&")):">"===e?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();(0,a.isSpace)(e)?(this.consume(),this.state="beforeAttributeName"):"/"===e?(this.consume(),this.state="selfClosingStartTag"):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var e=this.consume();(0,a.isAlpha)(e)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(e.toLowerCase()))}}},t.default=s},968:function(e,t,n){"use strict";t.__esModule=!0;var a,s=n(967),i=(a=s)&&a.__esModule?a:{default:a};function o(e,t){this.token=null,this.startLine=1,this.startColumn=0,this.options=t||{},this.tokenizer=new i.default(this,e)}o.prototype={tokenize:function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},tokenizePart:function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},tokenizeEOF:function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},reset:function(){this.token=null,this.startLine=1,this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""},this.tokens.push(this.token)},appendToData:function(e){this.token.chars+=e},finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""},this.tokens.push(this.token)},appendToCommentData:function(e){this.token.chars+=e},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1},this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""},this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=!0},appendToTagName:function(e){this.token.tagName+=e},beginAttribute:function(){this._currentAttribute=["","",null],this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(e){this._currentAttribute[0]+=e},beginAttributeValue:function(e){this._currentAttribute[2]=e},appendToAttributeValue:function(e){this._currentAttribute[1]=this._currentAttribute[1]||"",this._currentAttribute[1]+=e},finishAttributeValue:function(){}},t.default=o},969:function(e,t,n){"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var a=n(719);var s=function(e){this.j=[],this.T=e||null};s.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)this.j.push([e[n],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var n=this.j[t],a=n[0],s=n[1];if(this.test(e,a))return s}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var i=(0,a.inherits)(s,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),o=(0,a.inherits)(s,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.next(new e(""));return n===this.defaultTransition?(n=new this.constructor(t),this.on(e,n)):t&&(n.T=t),n},test:function(e,t){return e instanceof t}});t.CharacterState=i,t.TokenState=o,t.stateify=function(e,t,n,a){for(var s=0,o=e.length,r=t,c=[],l=void 0;s<o&&(l=r.next(e[s]));)r=l,s++;if(s>=o)return[];for(;s<o-1;)l=new i(a),c.push(l),r.on(e[s],l),r=l,s++;return l=new i(n),c.push(l),r.on(e[o-1],l),c}},970:function(e,t,n){"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}}}]);