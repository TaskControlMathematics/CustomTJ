(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{611:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(2),o=n(5),s=n(1),a=n(29);function r(t){let e=t.split(".").pop();return e.includes("?")&&(e=e.substring(0,e.indexOf("?"))),["js","css"].includes(e)?new Promise((n,i)=>{if("js"===e)Object(a.a)(t,e=>{e?n(t):i("Failed to load resource: "+t)});else if(null===function(t){const e=document.getElementsByTagName("link");for(let n=0,i=e.length;n<i;n++)if(e[n].href.indexOf(t)>=0)return e[n];return null}(t)){const e=document.createElement("link");e.rel="stylesheet",e.href=t,e.onload=()=>{n(t)},e.onerror=()=>{i("Failed to load resource: "+t)},document.getElementsByTagName("head")[0].appendChild(e)}else n(t)}):Promise.reject("Unsupported file extension: "+e)}class l{constructor({holder:t,editorSettings:e,onReady:n,cdnPath:o,cdnVersion:s,plugins:a,customToolsConfig:r,onChange:l,onBeforeRender:d,onParagraphKeydown:c,externalTools:p}){this.holder=t,this.editorSettings=e,this.cdnVersion=s,this.plugins=a,this.customToolsConfig=r||{},this.onChange=l,this.onReady=n,this.onBeforeRender=d,this.onParagraphKeydown=c,this.externalTools=p||[],document.location.hostname.includes("osnova.io")?this.cdn="//staging.paragraph.osnova.io/":o?this.cdn=o:(i.warn("codex","CDN path for the CodeX Editor does not specified"),this.cdn="//static-osnova.gcdn.co/paragraph-2/"),this.editor=void 0,this.editorLoading=this.loadSources().then(()=>(i.log("codex","All resources loaded"),this.renderEditor())).then(()=>{i.log("codex","Initialised, version: "+this.editor.version),"function"==typeof this.onReady&&this.onReady(!0)}).catch(t=>{i.error("codex","Initialization failed because of:",t)})}loadSources(){const t=this.externalTools.length?this.externalTools:this.plugins,e=[r(this.cdn+"dist/codex-editor.js?v="+this.cdnVersion),r(this.cdn+"dist/codex-editor.css?v="+this.cdnVersion),...this.loadPlugins(t)];return Promise.all(e).catch(t=>{throw Object(o.error)(Object(s.c)("Editor is unavailable. Try to reload the page.")),Error(t)})}loadPlugins(t){const e=[];return t.forEach(t=>{e.push(r(this.cdn+"plugins/"+t+"/"+t+".js?v="+this.cdnVersion),r(this.cdn+"plugins/"+t+"/"+t+".css?v="+this.cdnVersion))}),e}getBaseToolsConfig(){const t={};return this.plugins.includes("paragraph")&&Paragraph&&(t.text={class:Paragraph},"function"==typeof this.onParagraphKeydown&&(t.text.keydownCallback=this.onParagraphKeydown),this.customToolsConfig&&this.customToolsConfig.text&&(t.text=Object.assign(t.text,this.customToolsConfig.text))),t}renderEditor(){const t=this.getBaseToolsConfig();"function"==typeof this.onBeforeRender&&this.onBeforeRender(t);let e={holder:this.holder,initialBlockPlugin:"text",settings:this.editorSettings,visibleToolsLimit:10,notifications:{alert:o.show},data:{items:[],count:0},tools:t,modifyCallback:()=>{this.save().then(t=>{"function"==typeof this.onChange&&this.onChange(t)})}};return this.editorSettings&&(e=Object.assign(e,this.editorSettings)),this.editor=new window.CodexEditor(e),this.editor.isReady}fill(t){this.editor.fill(t)}save(){return this.editor.save()}focus(t){t?this.editor.insertBlockBefore(1,!0):this.editor.focus()}destroy(){this.editor&&this.editor.destroy({ui:!0})}}},612:function(t,e,n){"use strict";var i=n(53);function o(t){return"object"==typeof t&&null!=t&&Array.isArray(Object.keys(t))}e.a=function(t){return"string"==typeof t?Object(i.a)(t):o(t)?Object(i.a)(JSON.stringify(function t(e){return Object.keys(e).sort().reduce((n,i)=>{const s=e[i];return n[i]=o(s)?t(s):s,n},{})}(t))):Object(i.a)(JSON.stringify(t))}},685:function(t,e,n){"use strict";function i(t){const e=[];if(t.length>350)return console.log("Pattern analize skipped because of string length: %o","log",t.length),!1;return[{type:"image",regex:/\b(https?:\/\/\S+\.(?:png|jpe?g|gif)\S*)\b/gim},{type:"uploadCare",regex:/^https:\/\/(uploadcare\.cmtt\.ru|ucarecdn\.com|static[0-9]+\.siliconrus\.cmtt\.ru|static[0-9]+\.cmtt\.ru)/gim},{type:"server-leonardo",regex:/^https:\/\/(server)[0-9]+\.leonardo\.osnova\.io\/.+\/$/gim},{type:"giphy",regex:/^https?:\/\/(?:media)?.?giphy\.com\/(?:embed|gifs|media)\/(?:(?:[^\/]+)-([\w+]+)|([\w+]+))/gim},{type:"leonardo-osnova",regex:/^https:\/\/(?:[a-z0-9]+\.)?leonardo\.osnova\.io\/.+\/$/gim}].forEach(n=>{for(var i=!1;i=n.regex.exec(t);)e.push(i[0])}),e.length?e:void 0}n.d(e,"a",(function(){return i}))},693:function(t,e,n){"use strict";n.d(e,"a",(function(){return ue}));var i=n(0),o=n(2),s=n(1),a=n(612);class r{constructor(t){this.prevContentHash=null,this.contentHash=null,this.alertText=t.alertText,this.ajaxify=Air.import("module.ajaxify")}clear(t){t?(this.prevContentHash=this.contentHash,this.contentHash=Object(a.a)(t)):(this.prevContentHash=null,this.contentHash=null),this.ajaxify.confirmLock(!1)}check(t=null){this.prevContentHash=this.contentHash,this.contentHash=Object(a.a)(t);const e=this.contentHash!==this.prevContentHash;return e?this.ajaxify.confirmLock(!0,this.alertText):this.ajaxify.confirmLock(!1),e}destroy(){this.clear()}}var l=n(611),d=n(15),c=n(36);const p="inline-search-item",h="inline-dropdown",u="inline-dropdown--hidden",m="inline-dropdown__found-item",g="dropdown__found__item",f="dropdown__found__item--selected";class b extends class{constructor({container:t=document.body,initialChar:e,searchURL:n,bemModifier:o}){this.container=t,this.initialChar=e,this.bemModifier=o,this.searchURL=n,this.activated=!1,this.inlineWrapper=null,this._predefinedItems=[],this.dropdown=null,this.foundItems=[],this.selectedItemIndex=null,this.searchRequest=null,this.searchDebounceTimer=null,i.on(document,"click.InlineSearch",t=>this.documentClickHandler(t)),i.on(document,"scroll.InlineSearch",t=>this.documentScrolled(t))}set predefinedItems(t){this._predefinedItems=t}documentClickHandler(t){const e=window.getSelection();if(!e||!e.rangeCount)return;let n=e.getRangeAt(0).endContainer;if(n.nodeType!==Node.ELEMENT_NODE&&(n=n.parentNode),!n)return;if(i.belong(n,"."+p)){if(this.activated)return;this.activate({onElement:n})}else{if(i.belong(n,"."+m))this.foundItemClicked(n);else{if(!this.activated)return;this.deactivate()}}}foundItemClicked(t){this.selectItem(t)}documentScrolled(){this.activated&&this.dropdown&&this.dropdown.classList.add(u)}activateIfCaretMovedInsideWrapper(){const t=window.getSelection().getRangeAt(0);let e=t.startContainer;if(!t.collapsed)return;e=e.nodeType===Node.TEXT_NODE?t.startContainer.parentNode:t.startContainer;let n=!!e.classList&&e.classList.contains(p);for(;e.classList&&!e.classList.contains(p)&&null!==e.parentNode;)e=e.parentNode,n=!!e.classList&&e.classList.contains(p);if(n&&!this.activated){const t=this.findInlineWrapperFromCaret();this.activate({onElement:t})}else!n&&this.activated&&this.deactivate()}test(t){const e=t.keyCode;if(this.activated&&e===c.f.V&&(t.metaKey||t.ctrlKey))return t.preventDefault(),!1;if(this.activated&&[c.f.UP,c.f.DOWN].includes(e)&&this.foundItems.length)return t.preventDefault(),this.preformUpAndDownKeys(e),!1;if([c.f.RIGHT,c.f.LEFT,c.f.UP,c.f.DOWN,c.f.ENTER,c.f.BACKSPACE,c.f.DELETE].includes(e)&&setTimeout(()=>this.activateIfCaretMovedInsideWrapper(),100),this.activated&&e===c.f.BACKSPACE){if(this.handleBackSpace())return t.preventDefault(),!1}const n=[c.f.ENTER];if(this.activated&&isNaN(parseInt(this.selectedItemIndex))&&n.includes(e))return this.exitCaret(null,e===c.f.LEFT),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.deactivate(),!1;if(this.activated&&e===c.f.SPACE)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.handleSpace(),!1;if(this.activated&&this.foundItems[this.selectedItemIndex]&&e===c.f.ENTER)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.selectItem(),!1;if("#"===t.key){const t=window.getSelection(),e=t.anchorNode.textContent[t.anchorOffset-1];if(e&&"C"===e.toUpperCase())return!0}if(t.key===this.initialChar){if(t.preventDefault(),this.activated)return;this.activate(),this._predefinedItems.length&&this.renderFoundItems(this._predefinedItems)}else this.activated&&this.inlineWrapper&&(e!==c.f.BACKSPACE&&e!==c.f.DELETE||this.deactivateIfEmpty(t),this.searchDebounceTimer&&window.clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(()=>this.search(),400))}handleBackSpace(){const t=window.getSelection().getRangeAt(0);return!t.collapsed&&(t.extractContents(),!0)}handleSpace(){const t=this.extractBlockContentFromCaret();t&&(this.exitCaret(),this.deactivate(),setTimeout(()=>{var e=window.getSelection(),n=e.getRangeAt(0);n.insertNode(t),n.collapse(!0),e.removeAllRanges(),e.addRange(n)},50))}extractBlockContentFromCaret(){const t=window.getSelection();if(!t.rangeCount)return null;const e=t.getRangeAt(0),n=this.inlineWrapper;if(!n)return null;const i=e.cloneRange();i.selectNodeContents(n),i.setStart(e.endContainer,e.endOffset);const o=i.extractContents();return o||null}deactivateIfEmpty(t){const e=this.inlineWrapper.textContent.trim(),n=window.getSelection().getRangeAt(0),i=n.startContainer.textContent,o=n.endContainer.textContent,s=!n.collapsed&&(i.length>=e.length||o.length>=e.length);e.length>1&&!s||(t.preventDefault(),this.deactivate(),this.exitCaret(this.inlineWrapper),setTimeout(()=>{this.inlineWrapper.remove(),this.inlineWrapper=null},50))}_insertWrapper(){var t,e=window.getSelection();if(!e.rangeCount)return void _log("InlineSearch: Can not get current caret position");(t=e.getRangeAt(0)).collapse(!0);const n=i.make("em",[p],{contentEditable:!0,textContent:this.initialChar});return this.bemModifier&&n.classList.add(p+"--"+this.bemModifier),t.insertNode(n),t.selectNodeContents(n),t.collapse(!1),e.removeAllRanges(),e.addRange(t),n}insertWrapper(){const t=`<em class="${p} ${this.bemModifier?p+"--"+this.bemModifier:""}" contenteditable="true">${this.initialChar}</em>`;document.execCommand("insertHTML",!1,t);const e=window.getSelection().getRangeAt(0);let n;return n=e.startContainer.nodeType===Node.TEXT_NODE?e.startContainer.parentNode:e.startContainer,n}activate({onElement:t}={}){t?(_log("Reactivating inline search on element: %o",t),this.inlineWrapper=t):(this.inlineWrapper=this._insertWrapper(),_log("InlineSearch activated: ",this.inlineWrapper)),this.activated=!0}deactivate(){this.clear(),this.activated=!1,this.searchRequest&&this.searchRequest.abort(),_log("InlinseSearch deactivated")}findInlineWrapperFromCaret(){let t;const e=window.getSelection(),n=e.getRangeAt(0),i=e.baseNode||n.endContainer;for(t=i.nodeType===Node.ELEMENT_NODE?i:i.parentNode;t.classList&&!t.classList.contains(p)&&null!==i.parentNode;)t=t.parentNode;return t===document?null:t}exitCaret(t,e){const n=t||this.findInlineWrapperFromCaret(),o=document.createTextNode("​");if(!n)return;e?i.before(n,o):i.after(n,o);const s=document.createRange(),a=window.getSelection();window.setTimeout((function(){s.setStart(o,o.length),s.setEnd(o,o.length),a.removeAllRanges(),a.addRange(s)}),50)}search(){if(!this.inlineWrapper||!this.inlineWrapper.textContent)return;let t=this.inlineWrapper.textContent.trim();t=t.slice(1),this.searchRequest&&this.searchRequest.abort(),this.searchRequest=d.get({url:this.searchURL,dataType:"json",data:{q:t},success:e=>{if(!this.activated)return;if(!e.data||200!==e.rc)return void _log("Wrong inline-search response");const n=e.data.items;n&&this.renderFoundItems(n,t)},error:()=>_log("Error performing inline search")})}renderFoundItems(t,e){this.dropdown||(this.dropdown=i.make("div",[h]),this.container.appendChild(this.dropdown)),this.clear(),this.moveDropdown(),t.forEach(t=>{const n=i.make("div",[g,m]);this.bemModifier&&n.classList.add(m+"--"+this.bemModifier),n.innerHTML=e?t.text.replace(new RegExp("("+e+")","gi"),'<b style="font-weight: bold">$1</b>'):t.text,this.dropdown.appendChild(n),this.foundItems.push(n)})}clear(){this.foundItems=[],this.selectedItemIndex=null,this.dropdown&&(this.dropdown.innerHTML="",this.dropdown.classList.add(u))}moveDropdown(){if(!this.dropdown)return;const{bottom:t,left:e}=this.inlineWrapper.getBoundingClientRect(),{top:n,left:i}=this.container.getBoundingClientRect();this.dropdown.style.left=e-i+"px",this.dropdown.style.top=t-n+"px",this.dropdown.classList.remove(u)}preformUpAndDownKeys(t){let e;const n=t===c.f.UP;this.foundItems[this.selectedItemIndex]&&(e=this.foundItems[this.selectedItemIndex],e.classList.remove(f)),isNaN(parseInt(this.selectedItemIndex,10))?this.selectedItemIndex=0:n?this.selectedItemIndex--:this.selectedItemIndex++,this.selectedItemIndex===this.foundItems.length?this.selectedItemIndex=this.foundItems.length-1:this.selectedItemIndex<0&&(this.selectedItemIndex=0);this.foundItems[this.selectedItemIndex].classList.add(f)}substitution(t){throw new Error("Substitution method must be implemented by subclass")}selectItem(t){const e=t||this.foundItems[this.selectedItemIndex];this.substitution(e),this.dropdown.classList.add(u),this.exitCaret(this.inlineWrapper),this.deactivate()}destroy(){this.clear(),i.off(document,"click.InlineSearch"),i.off(document,"scroll.InlineSearch")}}{constructor({container:t}){super({container:t,initialChar:"#",searchURL:"/search-hashtag",bemModifier:"hashtag"}),d.get({url:"/search-hashtag",dataType:"json",success:t=>{t.data&&t.data.items&&(super.predefinedItems=t.data.items)}})}keydownHandler(t,e){return super.test(e)}substitution(t){this.inlineWrapper.textContent="#"+t.textContent}parsedToOrigin(t){return t?(t=t.replace(/\B#(?:<a[^>]*\>)([a-zA-Z\u0400-\u04ff][-_a-zA-Z\d\u0400-\u04ff]*)<\/a>/g,"#$1")).replace(/<em class="inline-search-item inline-search-item--hashtag"(?: contenteditable="true")?>([^<>]+)<\/em>/gi,(t,e)=>e.replace(/\s+/,"")+" "):t}originToParsed(t){const e=/\B#([a-zA-Z\u0400-\u04ff][-_a-zA-Z\d\u0400-\u04ff]*)/gi;t.innerHTML=t.innerHTML.replace(/\B#(?:<a[^>]*\>)([a-zA-Z\u0400-\u04ff][-_a-zA-Z\d\u0400-\u04ff]*)<\/a>/g,"#$1");const n=t.querySelectorAll("a");for(let t=n.length-1;t>=0;t--)n[t].href&&(n[t].innerHTML=n[t].innerHTML.replace(e,t=>t.replace("#","[_#_]")),n[t].href=n[t].getAttribute("href").replace(e,t=>t.replace("#","[_#_]")));t.innerHTML=t.innerHTML.replace(e,t=>` <em class="inline-search-item inline-search-item--hashtag">${t}</em>`),t.innerHTML=t.innerHTML.split("[_#_]").join("#")}}let v=null;class _{static get type(){return"raw"}static get title(){return"HTML"}static get iconClassname(){return"raw-tool-icon"}static get enableLineBreaks(){return!0}constructor(){this.maker=new v}render(t){return this.maker.render(t)}static prepare(){return n.e(73).then(n.bind(null,1651)).then(t=>{v=t.RawMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate({raw:t}){return!!t}save(t){return this.maker.save()}destroy(){this.maker=null}}let x=null;class w{static get type(){return"quiz"}static get title(){return Object(s.c)("Poll")}static get iconClassname(){return"quiz-tool-icon"}static get enableLineBreaks(){return!0}constructor({api:t,config:e}){this.editorApi=t,this.maker=new x({api:t,config:e,id:this.editorApi.getCurrentBlockId()})}render(t){return this.maker.render(t)}static prepare(){return n.e(72).then(n.bind(null,1638)).then(t=>{x=t.QuizMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate({title:t}){return!0}save(t){return this.maker.save()}destroy(){this.maker=null}}let y=null;class k{static get type(){return"delimiter"}static get title(){return Object(s.c)("Delimiter")}static get iconClassname(){return"delimiter-tool-icon"}static get contentless(){return!0}constructor(){this.maker=new y}render(t){return this.maker.render(t)}static prepare(){return n.e(55).then(n.bind(null,1660)).then(t=>{y=t.DelimiterMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate(){return!0}save(t){return this.maker.save()}destroy(){this.maker=null}}let C=null;class T{static get type(){return"audio"}static get title(){return Object(s.c)("Audio")}static get iconClassname(){return"audio-tool-icon"}static get enableLineBreaks(){return!0}constructor({api:t,block:e}){this.editorApi=t,this.blockApi=e,this.maker=new C({api:t,block:e})}render(t){return this.maker.render(t)}static prepare(){return n.e(15).then(n.bind(null,1634)).then(t=>{C=t.AudioMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate({audio:t}){return!(!t||!t.data)}save(t){return this.maker.save()}destroy(){this.maker=null}}let S=null;class I{static get type(){return"code"}static get title(){return Object(s.c)("Code")}static get iconClassname(){return"code-tool-icon"}static get enableLineBreaks(){return!0}static get markdown(){return{pattern:/```[a-z]*\n[\s\S]*?\n```/,parseFrom(t){const e=t.match(/```([a-z]*)?\n([\s\S]*?)\n```/);return e?{text:e[2].trim(),lang:e[1]}:{text:"",lang:void 0}},parseTo:t=>`\`\`\`${t.lang||""}\n ${t.text}\n\`\`\``}}constructor(){this.maker=new S({air:{$:i}})}render(t){return this.maker.render(t)}static prepare(){return n.e(53).then(n.bind(null,1652)).then(t=>{S=t.CodeMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate({text:t}){return!!t}save(t){return this.maker.save()}destroy(){this.maker=null}}const E="cdx-tool",L="cdx-input",A="cdx-input--multiline",B="incut-tool",z="incut-tool__text",O="incut-tool__icon",M={holder:"cdx-plugin-settings--horisontal",buttons:"cdx-plugin-settings__item",activeType:"cdx-plugin-settings__item--active"},j={holder:"cdx-plugin-external-settings",buttons:"cdx-plugin-external-settings__item",activeType:"cdx-plugin-external-settings__item--active"},H="incut-tool__button-style",D=[{name:"left",title:Object(s.c)("Left"),icon:"align-left",default:!0},{name:"centered",title:Object(s.c)("Center"),icon:"quote-center",default:!1}];class P{constructor({api:t}){this.editorApi=t,this.nodes={wrapper:null,text:null,styleButtons:[],externalSettingsButtons:[]},this._data={text:null,text_size:"medium",image:null,type:D.find(t=>t.default).name}}static get type(){return"incut"}static get title(){return Object(s.c)("Incut")}static get iconClassname(){return O}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}static get contentless(){return!0}render(t){return this.nodes.wrapper=i.make("div",[B,E]),this.nodes.text=i.make("div",[L,z,A],{contentEditable:!0}),this.nodes.text.setAttribute("data-placeholder",Object(s.c)("Incut text")),this.nodes.wrapper.appendChild(this.nodes.text),this.data=t,this.nodes.wrapper}makeSettings(){this.nodes.styleButtons=[];var t=i.make("div",[M.holder]);return D.forEach(e=>{const n=i.make("span",[M.buttons,H+"--"+e.name],{title:e.title}),o=i.svg(e.icon,14,14);n.appendChild(o),n.dataset.name=e.name,this._data.type===e.name&&n.classList.add(M.activeType),n.addEventListener("click",t=>{this.changeStyle(t.target.dataset.name)},!1),t.appendChild(n),this.nodes.styleButtons.push(n)}),t}makeExternalSettings(){this.nodes.externalSettingsButtons=[];const t=i.make("div",[j.holder]);return D.forEach(e=>{const n=i.make("span",[j.buttons,H+"--"+e.name],{title:e.title}),o=i.svg(e.icon,14,14);n.appendChild(o),n.dataset.name=e.name,this._data.type===e.name&&n.classList.add(j.activeType),n.addEventListener("click",t=>{this.changeStyle(t.target.dataset.name)},!1),t.appendChild(n),this.nodes.externalSettingsButtons.push(n)}),t}changeStyle(t){this._data.type=t,this.nodes.styleButtons.forEach(e=>{e.classList.toggle(M.activeType,e.dataset.name===t)}),this.nodes.externalSettingsButtons.forEach(e=>{e.classList.toggle(j.activeType,e.dataset.name===t)})}validate(t){return!!t&&(!!t.text&&!!t.text.trim())}get data(){return this.extractEditableData(),this._data}set data(t={}){for(const e in t)this._data[e]=t[e];if(t.text)this.nodes.text.innerHTML=t.text||"";else{const t=i.make("p");t.setAttribute("data-placeholder",Object(s.c)("Incut text")),this.nodes.text.appendChild(t)}}extractEditableData(){const t={text:this.nodes.text},e={tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},br:{},span:t=>t.classList.contains("cdx-marked-text"),mark:t=>t.classList.contains("cdx-marked-text")}};for(const n in t){let i=t[n].innerHTML||t[n].value;i&&(i=this.editorApi.sanitize(i,e,!0),i=i.trim()),"<br>"===i&&(i=""),this._data[n]=i||""}this._data.text=this.editorApi.wrapWithParagraphs(this._data.text);const n=this.nodes.text.textContent.length;this._data.text_size=n>200?"small":n>100?"medium":"big"}save(t){return this.nodes.wrapper=t,this.nodes.text=i.find(t,"."+z),this.data}destroy(){this.nodes.styleButtons.forEach(t=>i.off(t)),this.nodes={wrapper:null,text:null,styleButtons:[],externalSettingsButtons:[]},this.style=null,this._data={text:null,text_size:"",type:null}}}const q=[{name:"unordered",title:Object(s.c)("Unordered"),icon:"list-unordered-icon",default:!0},{name:"ordered",title:Object(s.c)("Ordered"),icon:"list-ordered-icon",default:!1}];class R{constructor(t){this.editorApi=t,this.elements={},this.elements.settings=[],this.elements.externalSettings=[],this.cmdAPressed=!1}static get CSS(){return{firstLevelBlock:"ce-block",listToolIcon:"ce-icon-list-bullet",listWrapper:"list-tool",listItem:"list-tool__item",listSettings:"cdx-plugin-settings",listSettingItem:"cdx-plugin-settings__item",listSettingItemActive:"cdx-plugin-settings__item--active",listExternalSettings:"cdx-plugin-external-settings",listExternalSettingItem:"cdx-plugin-external-settings__item",listExternalSettingItemList:"cdx-plugin-external-settings__item--list",listExternalSettingItemActive:"cdx-plugin-external-settings__item--active",listInput:"cdx-input",CommonToolClass:"cdx-tool"}}drawListWithItems(t,e){this.elements.listTag=i.make(t,[R.CSS.CommonToolClass,R.CSS.listWrapper],{contentEditable:!0});const n=i.fragment();if(e.length>0)for(let t=0;t<e.length;t++)i.append(n,this.makeListItem(e[t]||""));else i.append(n,this.makeListItem());return i.append(this.elements.listTag,n),this.bindEvents(),this.elements.listTag}bindEvents(){i.on(this.elements.listTag,"keydown",t=>{this.keydownHandler(t)}),i.on(this.elements.listTag,"keyup",t=>{this.keyup(t)})}makeListItem(t=""){return i.make("LI",[R.CSS.listItem],{innerHTML:t})}keydownHandler(t){const e=t.ctrlKey||t.metaKey;this.cmdAPressed=!1,t.keyCode===c.f.DELETE||t.keyCode===c.f.BACKSPACE?this.deletePressed(t):t.keyCode===c.f.ENTER?this.enterPressed(t):e&&65===t.keyCode&&(this.selectOnlyItem(t),this.cmdAPressed=!0)}deletePressed(t){const e=this.elements.listTag.querySelectorAll("."+R.CSS.listItem),n=this.editorApi.getCurrentBlockId();1===e.length&&0===e[0].textContent.replace("<br>","").trim().length&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.editorApi.navigatePrevious(),this.editorApi.removeBlock(n))}keyup(t){this.cmdAPressed&&t.stopPropagation()}enterPressed(t){let e=window.getSelection().anchorNode;e.nodeType===Node.TEXT_NODE&&(e=e.parentElement);const n=e.closest("."+R.CSS.listItem),o=n.closest("."+R.CSS.listWrapper),s=n&&!n.textContent.replace("​","").trim();if("P"===e.tagName){const o=n.querySelectorAll("p");if(!!o.length&&o[o.length-1]===e){const e=this.makeListItem();return i.append(this.elements.listTag,e),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),void this.focusEmptyLi(e)}}s&&n===o.lastElementChild&&(n.remove(),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.editorApi.insertBlockAfter(void 0,!0))}focusEmptyLi(t){const e=window.getSelection(),n=document.createTextNode("​");i.append(t,n);const o=document.createRange();o.selectNodeContents(n),o.setStart(n,0),o.setEnd(n,0),e.removeAllRanges(),e.addRange(o)}selectOnlyItem(t){t.preventDefault();const e=window.getSelection();let n=e.anchorNode.parentNode;const i=new Range;for(;n&&"LI"!==n.tagName&&(n=n.parentNode,!(n&&n.classList&&n.classList.contains(R.CSS.firstLevelBlock))););i.selectNodeContents(n),e.removeAllRanges(),e.addRange(i)}clearSettingsElements(){this.elements.settings=[]}drawSettingsItem(t,e,n){const o=i.make("DIV",[R.CSS.listSettingItem],{}),s=i.svg(t.icon,14,14);return o.dataset.option=t.name,e&&o.classList.add(R.CSS.listSettingItemActive),i.append(o,s),i.append(o,document.createTextNode(t.title)),i.on(o,"click",n.bind(o,t.name)),this.elements.settings.push(o),o}drawExternalSettingsItem(t,e,n){const o=i.make("DIV",[R.CSS.listExternalSettingItem,R.CSS.listExternalSettingItemList],{}),s=i.svg(t.icon,14,14);return o.dataset.option=t.name,e&&o.classList.add(R.CSS.listExternalSettingItemActive),i.append(o,s),i.on(o,"click",n.bind(o,t.name)),this.elements.externalSettings.push(o),o}changeListType(t){this.elements.settings.forEach(e=>{e.classList.toggle(R.CSS.listSettingItemActive,e.dataset.option===t)}),this.elements.externalSettings.forEach(e=>{e.classList.toggle(R.CSS.listExternalSettingItemActive,e.dataset.option===t)});const e="ordered"===t?"OL":"UL",n=i.make(e,[R.CSS.CommonToolClass,R.CSS.listWrapper],{contentEditable:!0,innerHTML:this.elements.listTag.innerHTML});this.elements.listTag.replaceWith(n),this.elements.listTag=n,this.bindEvents()}destroy(){i.off(this.elements.listTag);for(let t=0;t<this.elements.settings.length;t++)i.off(this.elements.settings[t]);this.elements.settings=[],this.elements.listTag=null,this.elements=null}}class U{constructor(t={}){this.type=t.type||"UL",this.items=t.items||[]}set data(t){this.type=!t||"ordered"!==t.type&&"OL"!==t.type?"UL":"OL",this.items=t&&t.items?t.items:[]}get data(){return{type:this.type,items:this.items}}listTypeChanged(t){this.type="ordered"===t?"OL":"UL"}destroy(){this.type=null,this.items=null}}class W{constructor({api:t}){this.editorApi=t,this.view=new R(this.editorApi),this.model=new U}static get type(){return"list"}static get title(){return Object(s.c)("List")}static get iconClassname(){return R.CSS.listToolIcon}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}static get handleTags(){return{tags:["UL","OL","LI"],fill:"items",pasteParser:W.pasteParser}}static get contentless(){return!0}static pasteParser(t){let e;const n=[],i=function(t){let e=t.innerHTML;e=e?e.trim():"",0!==e.length&&n.push(e)};switch(t.tagName){case"UL":case"OL":e=t.childNodes;for(let t=0;t<e.length;t++)i(e[t]);break;default:case"LI":i(t)}return n}render(t){return this.model.data=t,this.view.drawListWithItems(this.model.type,this.model.items)}validation(t){return!t.items.every((function(t){return""===t.trim()}))&&("UL"===t.type||"OL"===t.type||(console.warn("CodeX Editor List-tool: wrong list type passed %o",t.type),!1))}save(t){return this.extractData(t)}makeSettings(){const t=i.make("DIV",[R.CSS.listSettings],{}),e=i.fragment();let n;const o=this;let s;return o.view.clearSettingsElements(),q.forEach(t=>{s=("OL"===o.model.type?"ordered":"unordered")===t.name,n=o.view.drawSettingsItem(t,s,(function(t){o.view.changeListType(t),o.model.listTypeChanged(t)})),i.append(e,n)}),i.append(t,e),t}makeExternalSettings(){const t=i.make("DIV",[R.CSS.listExternalSettings],{}),e=i.fragment(),n=this;let o,s;return q.forEach(t=>{s=("OL"===n.model.type?"ordered":"unordered")===t.name,o=n.view.drawExternalSettingsItem(t,s,(function(t){n.view.changeListType(t),n.model.listTypeChanged(t)})),i.append(e,o)}),i.append(t,e),t}extractData(t){const e=t.querySelectorAll("li."+R.CSS.listItem),n=[],i={tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},mark:t=>t.classList.contains("cdx-marked-text"),span:t=>t.classList.contains("cdx-marked-text"),br:!0}};for(let t=0;t<e.length;t++){const o=this.editorApi.sanitize(e[t].innerHTML,i,!0);""!==o.trim()&&n.push(o)}return this.model.items=n,this.model.data}destroy(){this.view.destroy(),this.model.destroy(),this.view=null,this.model=null}}var N=n(685),F=n(6),V=n(5);let K=null,$=null;class Z{static get type(){return"media"}static get title(){return Object(s.c)("Photo or Video")}static get iconClassname(){return"media-tool-icon"}static get inlineToolbar(){return!0}static get enableLineBreaks(){return!0}static get handleFiles(){return{mime:["image/png","image/jpeg","image/gif","video/mp4",".webp"]}}onPaste({file:t}){const e=[t];setTimeout(()=>{this.maker.passSelectedFiles(e)},250)}constructor({api:t,block:e}){this.editorApi=t,this.blockApi=e,this.maker=new K({air:{andropov:F,inputs:Air.import("module.inputs"),$:i,zoom:Air.import("module.image_zoom"),notify:V,parseImageUrl:N.a},api:t,block:e})}render(t){return this.maker.render(t)}appendCallback(){$=i.make("input",null,{type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, .webp",multiple:!0}),i.css($,{width:0,height:0,position:"absolute",bottom:0,left:0,opacity:0,cursor:"pointer"}),i.on($,"change",t=>{const e=t.target.files||t.dataTransfer.files;e&&e.length&&(this.maker.passSelectedFiles(e),i.remove($))}),i.append(document.body,$),setTimeout(()=>{$.click()},100)}static prepare(){return n.e(63).then(n.bind(null,1625)).then(t=>{K=t.GalleryMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate({items:t}){return!(!t||!Array.isArray(t))&&!!t.length}save(t){return this.maker.save()}destroy(){$&&(i.off($),$=null)}}const Y="cdx-tool",G="cdx-input",Q="number-tool",X="number-tool__digit",J="number-tool__title";class tt{static get title(){return Object(s.c)("Number")}static get iconClassname(){return"number-tool__icon"}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}static get contentless(){return!0}constructor({api:t}){this.editorApi=t,this.inputs=Air.import("module.inputs")}render(t){const e=i.make("div",[Q,Y]),n=i.make("input",[G,X],{placeholder:Object(s.c)("Number")}),o=i.make("div",[G,J],{contentEditable:!0,placeholder:Object(s.c)("Caption")});return o.setAttribute("maxlength",128),t&&(n.value=t.number||"",o.innerHTML=t.title||""),e.appendChild(n),e.appendChild(o),this.inputs.processVisibleIn(e),e}validate(t){return!!t&&!!t.number}save(t){const e=t.querySelector("."+X);let n=t.querySelector("."+J).innerHTML;return n=this.editorApi.sanitize(n.trim(),{tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},span:t=>t.classList.contains("cdx-marked-text"),mark:t=>t.classList.contains("cdx-marked-text")}},!0),n=this.editorApi.sanitize(n),{number:e.value.trim(),title:n}}destroy(){}}const et="cdx-tool",nt="cdx-input",it="cdx-input--multiline",ot="warning-tool",st="warning-tool__icon",at="warning-tool__title",rt="warning-tool__text";class lt{constructor({api:t}){this.editorApi=t,this.nodes={titleInput:void 0},this.inputs=Air.import("module.inputs")}static get type(){return"warning"}static get title(){return Object(s.c)("Editorial note")}static get iconClassname(){return st}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}static get contentless(){return!0}render(t){const e=i.make("div",[ot,et]),n=i.make("input",[nt,at],{placeholder:Object(s.c)("Editorial note")}),o=i.make("div",[nt,it,rt],{contentEditable:!0,placeholder:Object(s.c)("Details")});return n.setAttribute("maxlength",30),t&&(n.value=t.title||"",o.innerHTML=t.text||""),e.appendChild(n),e.appendChild(o),this.nodes.titleInput=n,i.on(this.nodes.titleInput,"keydown",t=>{t.keyCode===c.f.ENTER&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.editorApi.navigateNext())}),this.inputs.processVisibleIn(e),e}validate(t){return!!t&&!(!t.text&&!t.title)}save(t){const e=t.querySelector("."+at);let n=t.querySelector("."+rt).innerHTML;return n=this.editorApi.sanitize(n.trim(),{tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},span:t=>t.classList.contains("cdx-marked-text"),mark:t=>t.classList.contains("cdx-marked-text")}},!0),{title:e.value.trim(),text:n}}destroy(){i.off(this.nodes.titleInput)}}let dt;class ct{static get title(){return Object(s.c)("Embed")}static get iconClassname(){return"link-tool-icon"}static get enableLineBreaks(){return!0}constructor({api:t}){this.editorApi=t,this.input=null,this.fetchURL="/andropov/extract/render",this.andropov=Air.import("module.andropov"),dt=window.Air&&window.Air.get("module.hawk")}static get renderOnPastePatterns(){return[{regex:/^https?:\/\/\S+/}]}pastePatternParsed(t){this.fetchInfo(t),this.editorApi.insertBlockAfter(void 0,!0)}render(){return this.input=i.make("input",["andropov-tool__input","cdx-input"],{placeholder:Object(s.c)("Link to an image, YouTube, Instagram, Vimeo")}),i.on(this.input,"paste",()=>{setTimeout(()=>{this.fetchInfo(this.input.value),this.editorApi.insertBlockAfter(void 0,!0)},50)}),i.on(this.input,"keydown",t=>{t.keyCode===c.f.ENTER&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.editorApi.navigateNext())}),this.input}fetchInfo(t){this.input&&this.input.classList.add("form-text-input--loading");const e=this.editorApi.getCurrentBlockId();d.get({url:this.fetchURL,data:{url:t},dataType:"json",success:({result:n})=>{const i=n.pop();if("error"===i.type)return void this.uploadError(i.data.error_text,e,t);_log("Andropov response:",i);let o={};const a=i.data.service;switch(i.type){case"link":o={type:"link",data:{link:i}};break;case"tweet":o={type:"tweet",data:{tweet:i}};break;case"video":o={type:"video",data:{video:i}};break;case"image":o={type:"media",data:{items:[{image:i}]}};break;case"telegram":o={type:"telegram",data:{telegram:i}};break;case"universalbox":switch(a){case"instagram":o={type:"instagram",data:{instagram:i}};break;case"yamusic":o={type:"yamusic",data:{yamusic:i}};break;case"tiktok":o={type:"tiktok",data:{tiktok:i}};break;case"spotify":o={type:"spotify",data:{spotify:i}};break;default:return V.error(Object(s.c)("Link processing failed")),_log("Andropov: unsupported universalbox service",a),this.editorApi.removeBlock(e),void(dt&&dt.catch("Paragraph Andropov Tool: Unsupported Universalbox service -> "+a,{url:t}))}break;default:return V.error(Object(s.c)("Link processing failed")),this.editorApi.removeBlock(e),void(dt&&dt.catch("Paragraph Andropov Tool: Wrong embed type -> "+i.type,{url:t}))}this.editorApi.oustBlock(e,o,t=>{this.andropov.refresh()})},error:n=>{this.uploadError(n,e,t)}})}uploadError(t,e,n){_log("Andropov fetch error: ",t);const i=document.createElement("a");i.href=encodeURI(n),i.textContent=n,this.editorApi.oustBlock(e,{type:"text",data:{text:i.outerHTML}}),dt&&dt.catch("Paragraph Andropov Tool: "+t,{url:n})}destroy(){i.off(this.input),this.input=null}}const pt="instagram-tool",ht="instagram-tool__widget",ut="instagram-tool__title",mt="cdx-input",gt="instagram-settings__item",ft="instagram-settings__item--toggled",bt="instagram-tool__widget--loading";class vt{renderWidget(t){return this.wrapper=i.make("div",pt),this.widget=i.make("div",ht),this.title=i.make("div",[mt,ut],{contentEditable:!0}),this.title.innerHTML=t.title||"",this.title.dataset.placeholder=Object(s.c)("Caption"),t.instagram&&t.instagram.render&&(this.widget.innerHTML=t.instagram.render),this.wrapper.appendChild(this.widget),this.wrapper.appendChild(this.title),this.wrapper}fetchSuccessCallback(t,e){this.widget.innerHTML=t.render,this.andropov.refresh(),window.setTimeout(()=>{const t=i.find(this.widget,"iframe");t&&(!t||t.clientHeight||t.offsetHeight)||(V.error(Object(s.c)("Instagram post loading failed")),this.editorApi.removeBlock(e))},300)}fetchErrorCallback(t,e){V.error(Object(s.c)("Instagram post loading failed")),this.editorApi.removeBlock(e)}drawSettingsItem(t,e){const n=i.make("DIV",[gt],{}),o=i.svg(t.icon,14,14);return(!e&&"hide_title"===t.name||e&&"hide_title"!==t.name)&&n.classList.add(ft),i.append(n,o),i.append(n,document.createTextNode(t.title)),n}toggleSettingItem(t){t.target.classList.toggle(ft)}constructor(t){this.wrapper=null,this.title=null,this.widget=null,this.editorApi=t,this.andropov=Air.import("module.andropov")}destroy(){this.wrapper=null,this.title=null,this.widget=null,this.editorApi=void 0}}class _t{constructor(){this.hide_title=!0,this.title=null,this.instagram={}}set data(t={}){this.hide_title=!1!==t.hide_title||t.hide_title,this.title=t.title||"",this.instagram=t.instagram||{}}get data(){return{hide_title:this.hide_title,title:this.title,instagram:this.instagram}}destroy(){this.hide_title=null,this.title=null,this.instagram={}}toggleHideTitleOption(){this.hide_title=!this.hide_title}}class xt{constructor({api:t}){this.editorApi=t,this.fetchURL="/andropov/extract/render",this.view=new vt(this.editorApi),this.model=new _t,this.renderWidgetMethod=null,this.andropov=Air.import("module.andropov")}static get type(){return"instagram"}static get title(){return Object(s.c)("Instagram")}static get inlineToolbar(){return!0}static prepare(){return Promise.resolve()}fetchInfo(t){this.view.widget.classList.add(bt);const e=this.editorApi.getCurrentBlockId();d.get({url:this.fetchURL,data:{url:t},dataType:"json",success:t=>{const n=t.result.pop();this.view.widget.classList.remove(bt),"error"===n.type||n.data.box_data&&!n.data.box_data.image&&!n.data.box_data.title?this.view.fetchErrorCallback(n.data.error_text,e):(this.model.instagram=n,this.view.fetchSuccessCallback(n,e))},error:t=>{this.view.fetchErrorCallback(t,e)}})}extractData(){return this.model.title=this.editorApi.sanitize(this.view.title.innerHTML,{tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},mark:t=>t.classList.contains("cdx-marked-text"),span:t=>t.classList.contains("cdx-marked-text")}},!0),this.model.data}render(t={}){this.model.data=t;const e=this.view.renderWidget(t);return this.renderWidgetMethod=()=>{this.andropov.refresh()},window.setTimeout(this.renderWidgetMethod,100),e}save(){return Promise.resolve().then(()=>this.extractData())}destroy(){this.view.destroy(),this.model.destroy(),this.renderWidgetMethod&&(window.clearTimeout(this.renderWidgetMethod),this.renderWidgetMethod=null),this.view=null,this.model=null}}const wt="cdx-tool",yt="cdx-input",kt="telegram-tool",Ct="telegram-tool__widget",Tt="telegram-tool__title";class St{constructor({api:t}){this.editorApi=t,this.nodes={wrapper:null,widgetHolder:null,title:null},this._data={telegram:null,title:null},this.andropov=Air.import("module.andropov")}static get title(){return Object(s.c)("Telegram")}static get inlineToolbar(){return!0}render(t){return this.nodes.wrapper=i.make("div",[kt,wt]),this.nodes.widgetHolder=i.make("div",[Ct]),this.nodes.title=i.make("div",[yt,Tt],{contentEditable:!0}),this.nodes.title.setAttribute("data-placeholder",Object(s.c)("Caption")),this.nodes.wrapper.appendChild(this.nodes.widgetHolder),this.nodes.wrapper.appendChild(this.nodes.title),Object.keys(t).length&&(this.telegram=t.telegram,this.title=t.title),this.nodes.wrapper}renderWidget(t){this.nodes.widgetHolder.innerHTML=t,setTimeout(()=>{this.andropov.refresh()},100)}validate(t){return!(!t||!Object.keys(t).length)&&!(!t.telegram||!Object.keys(t.telegram).length)}get data(){return this.extractEditableData(),this._data}set telegram(t){this._data.telegram=t,t&&t.render&&this.renderWidget(t.render)}set title(t){this._data.title=t||"",t&&this.nodes.title&&(this.nodes.title.innerHTML=t||"")}extractEditableData(){const t={title:this.nodes.title},e={tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},mark:t=>t.classList.contains("cdx-marked-text"),span:t=>t.classList.contains("cdx-marked-text")}};for(const n in t){let i=t[n].innerHTML||t[n].value;i&&(i=i.trim(),i=this.editorApi.sanitize(i,e,!0)),this._data[n]=i||""}}save(t){return Promise.resolve().then(()=>(this.nodes.title=i.find(t,"."+Tt),this.data))}destroy(){this.nodes={wrapper:null,widgetHolder:null,title:null},this._data={telegram:null,title:null}}}const It="cdx-tool",Et="cdx-input",Lt="twitter-tool",At="twitter-tool__widget",Bt="twitter-tool__title",zt={holder:"cdx-plugin-settings",buttons:"cdx-plugin-settings__item",activeType:"cdx-plugin-settings__item--active"},Ot="twitter-tool__button-style",Mt=[{type:"media",title:Object(s.c)("Display media"),icon:"tweet-media",enabled:"visible",disabled:"hidden",default:!0}];class jt{constructor({api:t}){this.editorApi=t,this.nodes={wrapper:null,widgetHolder:null,title:null,settings:[]},this._data={media:Mt.find(t=>"media"===t.type).default,tweet:null,title:null},this.andropov=Air.import("module.andropov")}static get type(){return"tweet"}static get title(){return Object(s.c)("Tweet")}static get inlineToolbar(){return!0}static prepare(){return Promise.resolve()}render(t){return this.nodes.wrapper=i.make("div",[Lt,It]),this.nodes.widgetHolder=i.make("div",[At]),this.nodes.title=i.make("div",[Et,Bt],{contentEditable:!0}),this.nodes.title.setAttribute("data-placeholder",Object(s.c)("Caption")),this.nodes.wrapper.appendChild(this.nodes.widgetHolder),this.nodes.wrapper.appendChild(this.nodes.title),Object.keys(t).length&&(this.tweet=t.tweet,this.title=t.title,this.media=t.media),this.nodes.wrapper}renderWidget(t){this.nodes.widgetHolder.innerHTML=t,setTimeout(()=>{this.andropov.refresh()},100)}makeSettings(){var t=i.make("div",[zt.holder]);return Mt.forEach(e=>{if(!this._data.tweet.data.tweet_data.in_reply_to_status_id_str&&"conversation"===e.type)return;const n=i.make("div",[zt.buttons,Ot+"--"+e.type],{title:e.title}),o=i.svg(e.icon,14,14);n.appendChild(o),n.appendChild(document.createTextNode(e.title)),n.dataset.type=e.type,!0===this._data[e.type]&&n.classList.add(zt.activeType),n.addEventListener("click",()=>{this.toggleOption(e)},!1),t.appendChild(n),this.nodes.settings.push(n)}),t}toggleOption(t){const e=!this._data[t.type];this[t.type]=e}validate(t){return!(!t||!Object.keys(t).length)&&!(!t.tweet||!Object.keys(t.tweet).length)}get data(){return this.extractEditableData(),this._data}set tweet(t){this._data.tweet=t,_log("Tweet data was updated",this._data),t&&t.render&&this.renderWidget(t.render)}set media(t){this._data.media=t,this.updateSettingsButtons(),_log("Tweet data was updated",this._data)}set conversation(t){this._data.conversation=t,this.updateSettingsButtons(),_log("Tweet data was updated",this._data)}set title(t){this._data.title=t||"",_log("Tweet data was updated",this._data),t&&this.nodes.title&&(this.nodes.title.innerHTML=t||"")}updateSettingsButtons(){this.nodes.settings.length&&Mt.forEach(t=>{const e=this.nodes.settings.find(e=>e.dataset.type===t.type);e&&(!0===this._data[t.type]?e.classList.add(zt.activeType):e.classList.remove(zt.activeType))})}extractEditableData(){const t={title:this.nodes.title},e={tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},mark:t=>t.classList.contains("cdx-marked-text"),span:t=>t.classList.contains("cdx-marked-text")}};for(const n in t){let i=t[n].innerHTML||t[n].value;i&&(i=i.trim(),i=this.editorApi.sanitize(i,e,!0)),this._data[n]=i||""}}save(t){return Promise.resolve().then(()=>(this.nodes.title=i.find(t,"."+Bt),this.data))}destroy(){this.nodes.settings.forEach(t=>i.off(t)),this.nodes={wrapper:null,widgetHolder:null,title:null,settings:[]},this.style=null,this._data={media:null,tweet:null,title:null}}}class Ht{static get type(){return"link"}static get title(){return Object(s.c)("Link")}static get enableLineBreaks(){return!0}constructor({api:t}){this.editorApi=t,this.wrapper=i.make("div",Ht.CSS.wrapper),this.input=null,this._data=null,this.andropov=Air.import("module.andropov")}set data(t){this._data={link:{type:t.type,data:t.data}}}get data(){return this._data}static get CSS(){return{wrapper:"cdx-tool",input:"cdx-input",inputLoading:"form-text-input--loading"}}render(t){return t&&t.link?(this.data=t.link,this.showRendered(t.link.render)):this.makeInput(),this.wrapper}makeInput(){this.input=i.make("input",[Ht.CSS.input],{placeholder:Object(s.c)("Insert a link")}),i.on(this.input,"paste",t=>{this.onPaste(t)}),i.on(this.input,"keydown",t=>{this.onKeydown(t)}),this.wrapper.appendChild(this.input)}onPaste(t){const e=(t.clipboardData||window.clipboardData).getData("Text");this.extract(e)}extract(t){this.input.classList.add(Ht.CSS.inputLoading),F.extractUrls([t],t=>{if(this.input.classList.remove(Ht.CSS.inputLoading),!t||0===t.length)return void V.show({type:"error",message:Object(s.c)("Link processing failed")});const e=t.pop();this.data=e,this.showRendered(e.render),this.editorApi.insertBlockAfter(void 0,!0)},!0,!0)}onKeydown(t){const e=t.target.value;13===t.keyCode&&(this.extract(e),t.preventDefault())}showRendered(t){this.wrapper.innerHTML=t,this.andropov.refresh()}validate(t){return t&&t.link&&"link"===t.link.type}save(t){return this._data}destroy(){this.input&&i.off(this.input),this.wrapper=null,this.input=null,this._data=null}}class Dt{constructor(){this.elements={}}static get CSS(){return{specialButtonWrapper:"special-button",specialButtonIcon:"special-button-icon",specialButtonAppearance:"special-button__appearance",specialButtonText:"special-button__text",specialButtonTextColor:"special-button__text-color",specialButtonBackgroundColor:"special-button__background-color",specialButtonUrl:"special-button__url",cdxInput:"cdx-input",cdxTool:"cdx-tool",clearFloat:"l-clear"}}drawForm(t={}){return this.elements.formHolder=i.make("DIV",[Dt.CSS.cdxTool,Dt.CSS.specialButtonWrapper],{}),this.elements.buttonText=i.make("INPUT",[Dt.CSS.specialButtonText,Dt.CSS.cdxInput],{value:t.text||"",placeholder:Object(s.c)("Button text")}),this.elements.buttonTextColor=i.make("INPUT",[Dt.CSS.specialButtonTextColor,Dt.CSS.cdxInput],{value:t.textColor||"",placeholder:Object(s.c)("Text color")}),this.elements.buttonBackground=i.make("INPUT",[Dt.CSS.specialButtonBackgroundColor,Dt.CSS.cdxInput],{value:t.backgroundColor||"",placeholder:Object(s.c)("Background color")}),this.elements.buttonAppearanceHolder=i.make("DIV",[Dt.CSS.specialButtonAppearance,Dt.CSS.clearFloat],{}),this.elements.buttonUrl=i.make("INPUT",[Dt.CSS.specialButtonUrl,Dt.CSS.cdxInput],{value:t.url||"",placeholder:Object(s.c)("Link")}),i.append(this.elements.buttonAppearanceHolder,this.elements.buttonText),i.append(this.elements.buttonAppearanceHolder,this.elements.buttonBackground),i.append(this.elements.buttonAppearanceHolder,this.elements.buttonTextColor),i.append(this.elements.formHolder,this.elements.buttonAppearanceHolder),i.append(this.elements.formHolder,this.elements.buttonUrl),this.elements.formHolder}destroy(){Object.values(this.elements).forEach(t=>i.off(t))}}class Pt{constructor(){this._data={}}set data(t={}){this._data.text=t.text||"",this._data.textColor=t.textColor||"",this._data.backgroundColor=t.backgroundColor||"",this._data.url=t.url||"","#"!==this._data.textColor[0]&&(this._data.textColor="#"+this._data.textColor),"#"!==this._data.backgroundColor[0]&&(this._data.backgroundColor="#"+this._data.backgroundColor);for(const t in this._data)this._data[t]=this._data[t].trim()}get data(){return this._data.textColor&&"#"!==this._data.textColor||(this._data.textColor="#ffffff"),this._data.backgroundColor&&"#"!==this._data.backgroundColor||(this._data.backgroundColor="#000000"),this._data}validateData(t){const e={text:t.buttonText.value,backgroundColor:t.buttonBackground.value,textColor:t.buttonTextColor.value,url:t.buttonUrl.value};return this.data=e,!(!this.data.text.trim()||!this.data.url.trim())}extractData(){return this.data}destroy(){this._data={}}}class qt{static get type(){return"special_button"}static get title(){return Object(s.c)("Button")}static get iconClassname(){return Dt.CSS.specialButtonIcon}static get enableLineBreaks(){return!0}static get contentless(){return!0}constructor(){this.view=new Dt,this.model=new Pt}render(t){return this.model.data=t,this.view.drawForm(t)}save(t){return this.view.elements.text=i.find(t,"."+Dt.CSS.specialButtonText),this.view.elements.backgroundColor=i.find(t,"."+Dt.CSS.specialButtonBackgroundColor),this.view.elements.textColor=i.find(t,"."+Dt.CSS.specialButtonTextColor),this.view.elements.url=i.find(t,"."+Dt.CSS.specialButtonUrl),this.model.extractData()}validate(){return this.model.validateData(this.view.elements)}destroy(){this.model.destroy(),this.view.destroy()}}var Rt=n(119);class Ut extends Rt.a{constructor(){super(),this.type="mp4",this.width=0,this.height=0,this.size=0,this.duration=0,this.bitrate=0,this.has_audio=!1}}var Wt=n(83),Nt=n(13);class Ft{constructor(t){this.init(t)}init(t){this.element=t.element,this.render_parent=t.render_parent,this.render_class=t.render_class,this.length_limit=t.length||1,this.accept=t.accept,this.BYTES_IN_MEGABYTE=1048576,this.filesize_limit=20*this.BYTES_IN_MEGABYTE,this.uploading_status_counter=0,this.handlers={onChange:t.onChange,onCut:t.onCut,onProcess:t.onProcess,onError:t.onError},this.items=[],this.items_length=0,this.element_input=i.parseHTML('<input type="file" '+(this.accept?'accept="'+this.accept+'"':"")+' style="position: absolute; z-index: 1; width: 100%; height: 100%; left: 0; top: 0;" '+(this.length_limit>1?"multiple":"")+">"),i.css(this.element_input,{position:"absolute","z-index":2,width:"100%",height:"100%",left:0,top:0,opacity:0,cursor:"pointer"}),this.original_position=i.css(this.element,"position"),"static"===this.original_position&&i.css(this.element,"position","relative"),this.original_overflow=i.css(this.element,"overflow"),"hidden"!==this.original_overflow&&i.css(this.element,"overflow","hidden"),i.on(this.element_input,"change",this.onChange.bind(this)),i.append(this.element,this.element_input)}destroy(){var t;if(this.element_input){for(clearTimeout(this.get_timeout),i.off(this.element_input,"change"),t=0;t<this.items_length;t++)this.items[t]&&this.items[t].element&&i.off(i.lastChild(this.items[t].element),"click");i.remove(this.element_input),"static"===this.original_position&&i.css(this.element,"position","static"),"hidden"!==this.original_overflow&&i.css(this.element,"overflow",this.original_overflow),this.element_input=null,this.items=null}}toArray(t){return Array.prototype.slice.call(t)}getFileType(t){var e;return t.type.indexOf("image")>=0?e="image":t.type.indexOf("video")>=0&&(e="video"),e}setCommonUploadingStatus(t){this.uploading_status_counter+=t?1:-1,i.bem.toggle(this.element,"uploading",this.uploading_status_counter>0)}makeItemFromFile(t){var e=this;return{id:Object(Nt.a)(),file:t,type:this.getFileType(t),origin:"file",onChangeUploadStatus:function(t){var n="ready"!==t;e.setCommonUploadingStatus(n),this.element&&i.toggleClass(this.element,e.render_class+"--uploading",n)}}}formSizeErrorMessage(t){var e=Math.floor(this.filesize_limit/this.BYTES_IN_MEGABYTE);return Object(s.c)("File %{ name } exceeds %{ size } MB",{name:t,size:e})}addFiles(t){var e,n,i=t.length;for(e=0;e<i;e++)n=this.makeItemFromFile(t[e]),this.isItemOk(n)?this.items[this.items_length++]=n:V.error(this.formSizeErrorMessage(n.file.name));n=null,this.checkLimit(),this.processAddedItems()}makeItemFromUrl(t){var e=this;return{id:Object(Nt.a)(),url:t,type:"image",origin:"url",onChangeUploadStatus:function(t){var n="ready"!==t;e.setCommonUploadingStatus(n),this.element&&i.toggleClass(this.element,e.render_class+"--uploading",n)}}}addUrls(t){var e,n,i=this;for(e=(t=t.filter((function(t){var e;for(e=0;e<i.items_length;e++)if(i.items[e].url===t)return!1;return!0}))).length,n=0;n<e;n++)this.items[this.items_length++]=this.makeItemFromUrl(t[n]);e>0&&(this.checkLimit(),this.processAddedItems())}checkLimit(){for(;this.items_length>this.length_limit;)this.remove(this.items[0])}remove(t){var e;for(e=0;e<this.items_length;e++)if(this.items[e].id===t.id){this.items[e].element&&(i.off(i.lastChild(this.items[e].element),"click"),i.remove(this.items[e].element)),this.items.splice(e,1),this.items_length--;break}this.triggerChange()}reset(){this.items=[],this.items_length=0,this.element_input.value="",this.render_parent&&(this.render_parent.innerHTML=""),this.triggerChange()}triggerChange(){0===this.items_length&&(this.element_input.value=""),i.bem.toggle(this.element,"has_items",0!==this.items_length),this.handlers.onChange&&this.handlers.onChange(this.items)}get(t){var e,n=!0,i=[];for(clearTimeout(this.get_timeout),e=0;e<this.items_length;e++){if("ready"!==this.items[e].upload_status){n=!1;break}i[e]=this.items[e].upload_data}!0===n?t(i):this.get_timeout=setTimeout(this.get.bind(this),100,t)}processAddedItems(t){var e=this;this.handlers.onProcess&&this.handlers.onProcess(!0),e.render_parent?(i.css(e.render_parent,"pointer-events","none"),this.render(this.render_class,(function(t){t.forEach((function(t){i.append(e.render_parent,t.element)})),e.upload((function(t){i.css(e.render_parent,"pointer-events","auto"),e.handlers.onProcess&&e.handlers.onProcess(!1),t?e.triggerChange():(V.error(Object(s.c)("We've tried to upload the file, but it didn't work, alas")),e.handlers.onError&&e.handlers.onError(e.items))}))}))):e.retriveFilesData((function(t){e.upload((function(t){e.handlers.onProcess&&e.handlers.onProcess(!1),t?e.triggerChange():(V.error(Object(s.c)("We've tried to upload the file, but it didn't work, alas")),e.handlers.onError&&e.handlers.onError(e.items))}))}))}onChange(t){this.addFiles(this.toArray(t.target.files))}uploadFiles(t,e){t.length>0?d.post({url:"/andropov/upload",dataType:"json",format:"MFD",data:{file:t},success:function(t){t&&t.result?e(t.result):e(!1)},error:function(){e(!1)}}):e([])}uploadUrls(t,e){t.length>0?d.post({url:"/andropov/upload/urls",dataType:"json",data:{urls:t},success:function(t){t&&t.result?e(t.result):e(!1)},error:function(){e(!1)}}):e([])}isItemOk(t){var e=!0;switch(t.origin){case"file":e=t.file.size<=this.filesize_limit}return e}isItemNotUploaded(t){return void 0===t.upload_status}itemIsFile(t){return"file"===t.origin}itemIsUrl(t){return"url"===t.origin}prepareItemForUploading(t,e){return t.upload_index=e,t.upload_status="pending",t.onChangeUploadStatus&&t.onChangeUploadStatus("pending"),t}dealWithItemsStatusesAfterFail(){var t;for(t=this.items_length-1;t>=0;t--)this.items[t].upload_index=void 0,this.items[t].upload_status="failed",this.items[t].onChangeUploadStatus&&this.items[t].onChangeUploadStatus("ready"),this.remove(this.items[t])}dealWithItemsStatusesAfterSuccess(t){var e,n,i;for(e=0,i=t.length;e<i;e++)for(n=0;n<this.items_length;n++)if(this.items[n].upload_index===e){let i;switch(t[e].type){case"image":i=new Wt.a(t[e].data);break;case"movie":i=new Ut(t[e].data);break;default:i=t[e]}this.items[n].upload_data=i,this.items[n].upload_index=void 0,this.items[n].upload_status="ready",this.items[n].onChangeUploadStatus&&this.items[n].onChangeUploadStatus("ready");break}}dealWithItemsStatusesAfterUpload(t,e){t?(this.dealWithItemsStatusesAfterSuccess(t),e&&e(!0)):(this.dealWithItemsStatusesAfterFail(),e&&e(!1))}getItemFile(t){return t.file}getItemUrl(t){return t.url}upload(t){var e=this,n=this.items.filter(this.isItemOk.bind(this)).filter(this.isItemNotUploaded),i=n.filter(this.itemIsFile).map(this.prepareItemForUploading).map(this.getItemFile),o=n.filter(this.itemIsUrl).map(this.prepareItemForUploading).map(this.getItemUrl),s=0,a=0,r=function(e){s++,e&&a++,2===s&&t(s===a)};this.uploadFiles(i,(function(t){e.dealWithItemsStatusesAfterUpload(t,r)})),this.uploadUrls(o,(function(t){e.dealWithItemsStatusesAfterUpload(t,r)}))}retriveImageDataFromFile(t,e){var n;window.FileReader?(n=new FileReader,t.file.type.indexOf("image")>=0?(n.onload=function(n){t.data.base64=n.target.result,e(t)},n.readAsDataURL(t.file)):t.file.type.indexOf("video")>=0?(_log("<Retrive video image> It's video"),window.Blob&&window.URL?(_log("<Retrive video image> Read file"),n.onload=function(){_log("<Retrive video image> Onload file");var n=new Blob([event.target.result],{type:t.file.type}),o=URL.createObjectURL(n),s=i.create("video"),a=function(){var n=r();_log("<Retrive video image> onTimeUpdated, image length:"+n.length),i.off(s,"loadeddata"),i.off(s,"timeupdate"),s.pause(),s=null,t.data.base64=n,e(t)},r=function(){var t=i.create("canvas");return console.log("<Retrive video image> snapImage"),t.width=s.videoWidth,t.height=s.videoHeight,t.getContext("2d").drawImage(s,0,0,t.width,t.height),t.toDataURL()};i.on(s,"loadeddata",a),i.on(s,"timeupdate",a),s.preload="metadata",s.src=o,s.muted=!0,s.playsInline=!0,s.play()},n.readAsArrayBuffer(t.file)):e(t)):e(t)):e(t)}retriveItemData(t,e){switch(t.origin){case"file":this.retriveImageDataFromFile(t,e);break;case"url":e(t);break;default:e(!1)}}retriveFilesData(t){var e,n,i=this,o=0,s=function(){++o===i.items_length&&t()};for(e=0;e<this.items_length;e++)if(void 0===(n=this.items[e]).data){switch(n.data={},n.origin){case"file":n.data.name=n.file.name,n.data.size=this.getFileSize(n.file);break;case"url":n.data.name=n.url.split("/").pop(),n.data.size="unknown"}switch(n.type){case"image":case"video":this.retriveItemData(this.items[e],s);break;default:s()}}else s();0===i.items_length&&t()}getFileSize(t){var e=t.size||0,n=Math.floor(e/1e3),i=Math.floor(10*n/1e3)/10;return i>=1?i+"Mb":n>=1?n+"kb":e+"bytes"}renderItem(t,e){var n,o,s,a,r=this,l=t?t+" "+t+"--type-"+e.type:"";switch(e.type){case"image":case"video":switch(e.origin){case"file":a=e.data.base64;break;case"url":a=e.url}n='<img class="'+t+'__content" src="'+a+'">';break;default:n='<div class="'+t+'__content"></div>'}return n+='<p class="'+t+'__remove"></p>',o=i.parseHTML('<div class="'+l+'">'+n+"</div>"),s=i.lastChild(o),i.on(s,"click",(function(t){t.stopPropagation(),r.remove(e)})),o}render(t,e){var n=this;void 0===e&&(e=t,t=void 0),t=t||"",this.retriveFilesData((function(){var i;for(i=0;i<n.items_length;i++)void 0===n.items[i].element&&(n.items[i].element=n.renderItem(t,n.items[i]));e(n.items)}))}}const Vt="cdx-tool",Kt="cdx-input",$t="cdx-input--multiline",Zt="quote-tool",Yt="quote-tool__name",Gt="quote-tool__job",Qt="quote-tool__quote",Xt="quote-tool__photo-wrapper",Jt="quote-tool__photo-wrapper--empty",te="quote-tool__photo-wrapper--loading",ee="quote-tool__photo-wrapper__remove",ne="quote-tool__icon",ie={holder:"cdx-plugin-settings--horisontal",buttons:"cdx-plugin-settings__item",activeType:"cdx-plugin-settings__item--active"},oe={holder:"cdx-plugin-external-settings",buttons:"cdx-plugin-external-settings__item",activeType:"cdx-plugin-external-settings__item--active"},se="quote-tool__button-style",ae=[{name:"opinion",title:Object(s.c)("Opinion"),icon:"quote-left",default:!1},{name:"default",title:Object(s.c)("General"),icon:"quote-right",default:!0}];class re{constructor({api:t,block:e}){this.editorApi=t,this.blockApi=e,this.nodes={wrapper:null,imageWrapper:null,image:null,imageIcon:null,imageRemover:null,name:null,job:null,text:null,styleButtons:[],externalSettingsButtons:[]},this.uploader=null,this._data={text:null,subline1:null,subline2:null,text_size:"medium",image:null,type:ae.find(t=>t.default).name}}static get type(){return"quote"}static get title(){return Object(s.c)("Quote")}static get iconClassname(){return ne}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}static get handleTags(){return{tags:["BLOCKQUOTE"],fill:"text"}}static get contentless(){return!0}render(t){return this.nodes.wrapper=i.make("div",[Zt,Vt]),this.nodes.name=i.make("div",[Kt,Yt],{contentEditable:!0}),this.nodes.job=i.make("div",[Kt,Gt],{contentEditable:!0}),this.nodes.text=i.make("div",[Kt,$t,Qt],{contentEditable:!0}),this.nodes.imageWrapper=i.make("div",[Kt,Xt,Jt]),this.nodes.image=i.make("img"),this.nodes.imageIcon=i.svg("ui_photo","25","24"),this.nodes.imageRemover=i.make("div",[ee]),this.nodes.name.setAttribute("data-placeholder",Object(s.c)("Author")),this.nodes.job.setAttribute("data-placeholder",Object(s.c)("Occupation")),this.nodes.text.setAttribute("data-placeholder",Object(s.c)("Quote text")),this.nodes.imageWrapper.appendChild(this.nodes.image),this.nodes.imageWrapper.appendChild(this.nodes.imageIcon),this.nodes.imageWrapper.appendChild(this.nodes.imageRemover),this.nodes.wrapper.appendChild(this.nodes.imageWrapper),this.nodes.wrapper.appendChild(this.nodes.name),this.nodes.wrapper.appendChild(this.nodes.job),this.nodes.wrapper.appendChild(this.nodes.text),this.data=t,i.on(this.nodes.imageRemover,"click",t=>{this.removeImage(t)}),i.on(this.nodes.wrapper,"keydown",t=>{this.navigateBetweenInputs(t)}),["job","name","text"].forEach(t=>{i.on(this.nodes[t],"focus",e=>{this.removeZeroWidthSpaceFromEmptyElement(t)}),i.on(this.nodes[t],"blur",e=>{this.removeZeroWidthSpaceFromEmptyElement(t)})}),this.activatePhotoUploader(),this.nodes.wrapper}navigateBetweenInputs(t){const e=t.target,n=e.classList.contains(Qt),i=0===e.textContent.replace("​","").trim().length;t.keyCode===c.f.ENTER?n&&!i||(this.editorApi.navigateNext(),t.preventDefault()):t.keyCode===c.f.BACKSPACE&&i&&(e.innerHTML=e.innerHTML.replace("<br>",""),t.preventDefault(),this.editorApi.navigatePrevious())}setImage(t){const e=t.includes("leonardo")||t.includes("uploadcare")?t.replace(/\/+$/,"")+"/-/scale_crop/200x200/":t;this.nodes.imageWrapper.classList.remove(Jt),this.nodes.image.src=e}removeImage(){this.nodes.imageWrapper.classList.add(Jt),this.nodes.image.src="",this._data.image=null,this.uploader.reset(),this.blockApi.dispatchModifiedEvent()}activatePhotoUploader(){this.uploader=new Ft({element:this.nodes.imageWrapper,accept:"image/*",length:1,onProcess:t=>{t?this.nodes.imageWrapper.classList.add(te):this.nodes.imageWrapper.classList.remove(te)},onError:t=>{V.error(Object(s.c)("Image uploading failed: %{ error }",{error:t.toLowerCase()}))},onChange:t=>{if(!t.length)return;const e=t[0].upload_data;e?(this.setImage(e.url),this._data.image={type:"image",data:e},this.blockApi.dispatchModifiedEvent()):V.error(Object(s.c)("Try another file"))}})}makeSettings(){this.nodes.styleButtons=[];var t=i.make("div",[ie.holder]);return ae.forEach(e=>{const n=i.make("span",[ie.buttons,se+"--"+e.name],{title:e.title}),o=i.svg(e.icon,14,14);n.appendChild(o),n.dataset.name=e.name,this._data.type===e.name&&n.classList.add(ie.activeType),n.addEventListener("click",t=>{this.changeStyle(t.target.dataset.name),this.blockApi.dispatchModifiedEvent()},!1),t.appendChild(n),this.nodes.styleButtons.push(n)}),t}makeExternalSettings(){this.nodes.externalSettingsButtons=[];const t=i.make("div",[oe.holder]);return ae.forEach(e=>{const n=i.make("span",[oe.buttons,se+"--"+e.name],{title:e.title}),o=i.svg(e.icon,14,14);n.appendChild(o),n.dataset.name=e.name,this._data.type===e.name&&n.classList.add(oe.activeType),n.addEventListener("click",t=>{this.changeStyle(t.target.dataset.name),this.blockApi.dispatchModifiedEvent()},!1),t.appendChild(n),this.nodes.externalSettingsButtons.push(n)}),t}changeStyle(t){this._data.type=t,this.nodes.styleButtons.forEach(e=>{e.classList.toggle(ie.activeType,e.dataset.name===t)}),this.nodes.externalSettingsButtons.forEach(e=>{e.classList.toggle(oe.activeType,e.dataset.name===t)})}validate(t){return!!t&&(!!t.text&&!!t.text.trim())}get data(){return this.extractEditableData(),this._data}set data(t={}){for(const e in t)this._data[e]=t[e];if(t.image&&this.setImage(F.getCdnUrl()+"/"+t.image.data.uuid),t.subline1&&(this.nodes.name.innerHTML=t.subline1||""),t.subline2&&(this.nodes.job.innerHTML=t.subline2||""),t.text)this.nodes.text.innerHTML=t.text||"";else{const t=i.make("p");t.appendChild(document.createTextNode("​")),this.nodes.text.appendChild(t)}}extractEditableData(){const t={text:this.nodes.text,subline1:this.nodes.name,subline2:this.nodes.job},e={tags:{a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{},p:{},br:{},span:t=>t.classList.contains("cdx-marked-text"),mark:t=>t.classList.contains("cdx-marked-text")}};for(const n in t){let i=t[n].value||t[n].innerHTML;i&&(i=this.editorApi.sanitize(i,e,!0),i=i.trim()),"<br>"===i&&(i=""),this._data[n]=i||""}this._data.text=this.editorApi.wrapWithParagraphs(this._data.text);const n=this.nodes.text.textContent.length;this._data.text_size=n>200?"small":n>100?"medium":"big"}removeZeroWidthSpaceFromEmptyElement(t){0===this.nodes[t].textContent.replaceAll("​","").length&&(this.nodes[t].textContent="")}save(t){return this.nodes.wrapper=t,this.nodes.name=i.find(t,"."+Yt),this.nodes.job=i.find(t,"."+Gt),this.nodes.text=i.find(t,"."+Qt),this.nodes.imageWrapper=i.find(t,"."+Xt),this.data}destroy(){i.off(this.nodes.imageRemover),this.nodes.styleButtons.forEach(t=>i.off(t)),Object.keys(this.nodes).forEach((t,e)=>{i.off(e)}),this.nodes={wrapper:null,image:null,name:null,job:null,text:null,styleButtons:[],externalSettingsButtons:[]},this.style=null,this._data={text:null,subline1:null,subline2:null,text_size:"",image:null,type:null},this.uploader&&this.uploader.destroy()}}let le=null;class de{static get type(){return"person"}static get title(){return Object(s.c)("Person")}static get iconClassname(){return"person-tool-icon"}static get enableLineBreaks(){return!0}static get inlineToolbar(){return!0}constructor({api:t}){this.editorApi=t,this.maker=new le({api:t,id:this.editorApi.getCurrentBlockId()})}render(t){return this.maker.render(t)}static prepare(){return n.e(68).then(n.bind(null,1639)).then(t=>{le=t.PersonMaker}).catch(t=>{console.error("An error occurred while loading the component:",t)})}validate(t){const{image:e,title:n,description:i}=t;return!!(e||n||i)}save(){return this.maker.save()}destroy(){this.maker=null}}class ce{static get type(){return"yamusic"}static get title(){return Object(s.c)("Yandex.Music")}constructor(){this._data=null}render(t){this._data=t;const e=i.make("div");return e.innerHTML=t.yamusic.render,e}save(t){return this._data}}class pe{static get type(){return"spotify"}static get title(){return"Spotify"}constructor(){this._data=null}render(t){this._data=t;const e=i.make("div");return e.innerHTML=t.spotify.render,e}save(t){return this._data}}class he{static get type(){return"tiktok"}static get title(){return"TikTok"}constructor(){this._data=null}render(t){this._data=t;const e=i.make("div");return e.innerHTML=t.tiktok.render,e}save(t){return this._data}}n(705);class ue extends l.a{constructor(t,{airModules:e,disableUnsavedChangesDetector:n}){const{onChange:i,onBeforeRender:o}=t;t.onChange=t=>{"function"==typeof i&&i(t),this.unsavedChangesDetector&&(this.hasUnsavedChanges=this.unsavedChangesDetector.check(t))},t.onBeforeRender=t=>{"function"==typeof o&&o(t);const e=this.getToolsConfig();Object.entries(e).forEach(([e,n])=>{t[e]=n})},t.onParagraphKeydown=(t,e)=>this.hashtagInstance.keydownHandler(t,e);const a=new Set(["number","quote","incut","twitter","instagram","list","code","special_button","warning","andropov","media","link","telegram","special","raw","quiz","delimiter","audio","person","yamusic","tiktok","spotify"]);t.externalTools=t.plugins.filter(t=>!a.has(t)),super(t),this.airModules=e||[],this.estimateRenderingTime=1e3,this.hashtagInstance=new b({container:this.holder}),this.unsavedChangesDetector=n?null:new r({alertText:Object(s.c)("The entry has not been saved. Are you sure you want to leave?")}),this.hasUnsavedChanges=!1}getConfigForTool({filename:t,type:e,icon:n,title:i,options:o}){const s=window[t];if(!s)return{};let a={type:e,iconClassname:n,title:i||""};if(["render","save","validate","makeSettings","destroy","appendCallback","prepare","setApi"].forEach(t=>{s[t]&&(a[t]=s[t])}),s.pastePatterns&&(a.renderOnPastePatterns=s.pastePatterns),o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t]);return this.customToolsConfig[e]&&(a=Object.assign(a,this.customToolsConfig[e])),a}getToolsConfig(){const t={};return this.plugins.includes("header")&&Header&&(t.header=Header),this.plugins.includes("embed")&&Embed&&(t.video=Embed),this.plugins.includes("media")&&(t.media=Z),this.plugins.includes("andropov")&&(t.andropov=ct),this.plugins.includes("incut")&&(t.incut=P),this.plugins.includes("quote")&&(t.quote=re),this.plugins.includes("list")&&(t.list=W),this.plugins.includes("instagram")&&(t.instagram=xt),this.plugins.includes("twitter")&&(t.tweet=jt),this.plugins.includes("code")&&(t.code=I),this.plugins.includes("link")&&(t.link=Ht),this.plugins.includes("telegram")&&(t.telegram=St),this.plugins.includes("yamusic")&&(t.yamusic=ce),this.plugins.includes("spotify")&&(t.spotify=pe),this.plugins.includes("tiktok")&&(t.tiktok=he),this.plugins.includes("delimiter")&&(t.delimiter=k),this.plugins.includes("raw")&&(t.rawhtml=_),this.plugins.includes("audio")&&(t.audio=T),this.plugins.includes("warning")&&(t.warning=lt),this.plugins.includes("wtrfall")&&window.wtrfallTool&&(t.wtrfall=this.getConfigForTool({filename:"wtrfallTool",title:"Waterfall",icon:"cdx-wtrfall-icon",options:{enableLineBreaks:!0}})),this.plugins.includes("quiz")&&(t.quiz={class:w},this.customToolsConfig&&this.customToolsConfig.quiz&&(t.quiz=Object.assign(t.quiz,this.customToolsConfig.quiz))),this.plugins.includes("number")&&(t.number=tt),this.plugins.includes("special_button")&&(t.special_button=qt),this.plugins.includes("person")&&(t.person=de),t}async fill(t){return new Promise(e=>{super.fill(t),this.airModules.forEach(t=>{t.refresh()}),setTimeout(()=>{this.parseHashtags(),e()},0)})}async save(){const t=await super.save();return this.processHashtags(t)}parseHashtags(){i.findAll(".ce-paragraph").forEach(t=>{this.hashtagInstance.originToParsed(t)})}processHashtags(t){const e={text:"text"};return t.forEach(t=>{if(e[t.type]){o.assert(t.data[e[t.type]],`Wrong field with hashtags specified. Plugin ${t.type} does not have\n                            ${e[t.type]} field in data`);const n=t.data[e[t.type]];n&&(t.data[e[t.type]]=this.hashtagInstance.parsedToOrigin(n))}}),t}clearUnsavedChanges(){this.unsavedChangesDetector.clear(),this.hasUnsavedChanges=!1}destroy(){this.hashtagInstance.destroy(),super.destroy(),this.unsavedChangesDetector&&this.unsavedChangesDetector.destroy()}}},705:function(t,e,n){var i=n(706);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(31).default)("0c808da7",i,!1,{})},706:function(t,e,n){(e=n(30)(!1)).push([t.i,".form-text-input {\n  position: relative;\n  background: #fff;\n  border: 1px solid rgba(0,0,0,0.13);\n  border-top-color: rgba(0,0,0,0.29);\n  font-size: 15px;\n  padding: 7px 30px 7px 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  outline: none;\n  width: 100%;\n  resize: vertical;\n  line-height: 1.2em;\n}\n.form-text-input::-webkit-input-placeholder {\n  color: #595959;\n}\n.form-text-input::-moz-placeholder {\n  color: #595959;\n  opacity: 1;\n}\n.form-text-input:-ms-input-placeholder {\n  color: #595959;\n}\n.form-text-input--multiline {\n  line-height: 1.4em;\n}\n.form-text-input .icon {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  color: #595959;\n}\n.form-text-input small {\n  color: #595959;\n  font-size: 12px;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n}\n.form-text-input--loading {\n  background-image: repeating-linear-gradient(-45deg, transparent, transparent 4px, rgba(0,0,0,0.059) 4px, rgba(0,0,0,0.059) 8px) !important;\n  background-size: 34px 34px;\n  -webkit-animation: loading-bar 10s infinite linear;\n  animation: loading-bar 10s infinite linear;\n}\n.form-label {\n  display: block;\n  font-size: 15px;\n  margin-bottom: 13px;\n  font-weight: 500;\n}\n.form-label small {\n  font-size: 13px;\n  color: #595959;\n  margin-left: 10px;\n  font-weight: normal;\n}\n@media (max-width: 320px) {\n  .form-label small {\n    display: block;\n    margin-top: 5px;\n    margin-left: 0;\n  }\n}\n.form-picture,\n.quote-tool__photo-wrapper {\n  width: 48px;\n  height: 48px;\n  min-width: 48px;\n  background-color: #fff;\n  position: relative;\n  cursor: pointer;\n  overflow: visible !important;\n}\n.form-picture .icon--ui_photo,\n.quote-tool__photo-wrapper .icon--ui_photo {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  z-index: 2;\n  visibility: hidden;\n}\n.form-picture::before,\n.quote-tool__photo-wrapper::before {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.5);\n  z-index: 1;\n  visibility: hidden;\n}\n.form-picture--empty .icon--ui_photo,\n.quote-tool__photo-wrapper--empty .icon--ui_photo {\n  visibility: visible;\n  opacity: 0.2;\n}\n.form-picture--empty img,\n.quote-tool__photo-wrapper--empty img {\n  display: none;\n}\n.form-picture:hover::before,\n.quote-tool__photo-wrapper:hover::before {\n  visibility: visible;\n}\n.form-picture:hover .icon--ui_photo,\n.quote-tool__photo-wrapper:hover .icon--ui_photo {\n  color: #fff;\n  visibility: visible;\n}\n.form-picture input,\n.quote-tool__photo-wrapper input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.001;\n  cursor: pointer;\n  z-index: 3;\n  overflow: hidden;\n}\n.form-picture img,\n.quote-tool__photo-wrapper img {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 5;\n}\n.form-picture__remove,\n.quote-tool__photo-wrapper__remove {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  -webkit-box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);\n  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);\n  background-color: #fff;\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  z-index: 4;\n}\n.form-picture__remove::before,\n.quote-tool__photo-wrapper__remove::before,\n.form-picture__remove::after,\n.quote-tool__photo-wrapper__remove::after {\n  content: '';\n  width: 2px;\n  height: 8px;\n  background: #e14242;\n  position: absolute;\n  top: 26%;\n  left: 48%;\n}\n.form-picture__remove::after,\n.quote-tool__photo-wrapper__remove::after {\n  -webkit-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n.form-picture__remove::before,\n.quote-tool__photo-wrapper__remove::before {\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n.form-picture--empty .form-picture__remove,\n.quote-tool__photo-wrapper--empty .quote-tool__photo-wrapper__remove {\n  display: none;\n}\n.form-picture--loading .icon,\n.quote-tool__photo-wrapper--loading .icon,\n.form-picture--loading input,\n.quote-tool__photo-wrapper--loading input,\n.form-picture--loading img,\n.quote-tool__photo-wrapper--loading img,\n.form-picture--loading__remove,\n.quote-tool__photo-wrapper--loading__remove,\n.form-picture--loading::before,\n.quote-tool__photo-wrapper--loading::before {\n  display: none;\n}\n.form-picture--loading::after,\n.quote-tool__photo-wrapper--loading::after {\n  content: '';\n  position: absolute;\n  z-index: 3;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: 2px solid #dedede;\n  border-top-color: $color-5;\n  left: 50%;\n  top: 50%;\n  margin-top: -10px;\n  margin-left: -10px;\n  -webkit-animation: spin 2s infinite linear;\n  animation: spin 2s infinite linear;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.form-picture--unuploadable,\n.quote-tool__photo-wrapper--unuploadable {\n  pointer-events: none;\n}\n@-moz-keyframes loading-bar {\n  100% {\n    background-position: -56% 0;\n  }\n}\n@-webkit-keyframes loading-bar {\n  100% {\n    background-position: -56% 0;\n  }\n}\n@-o-keyframes loading-bar {\n  100% {\n    background-position: -56% 0;\n  }\n}\n@keyframes loading-bar {\n  100% {\n    background-position: -56% 0;\n  }\n}\n@-moz-keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-o-keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n/**\n * Base tools classes\n * =======================\n */\n.cdx-tool {\n  padding: 10px 0;\n}\n/**\n * Number tool\n * =======================\n */\n.number-tool__icon {\n  background-image: url(\"data:image/svg+xml, %3Csvg%20width%3D%226%22%20height%3D%2212%22%20viewBox%3D%220%200%206%2012%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M5.3984375%2012h-2.640625V3.59375l-2.59375.7578125v-2L5.15625.625h.2421875%22%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22/%3E%3C/svg%3E\");\n  background-size: 6px 12px;\n}\n.number-tool__digit {\n  margin-bottom: 10px;\n}\n.number-tool__digit::-webkit-input-placeholder {\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.number-tool__digit::-moz-placeholder {\n  -moz-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.number-tool__digit:-ms-input-placeholder {\n  -ms-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.number-tool__digit::-ms-input-placeholder {\n  -ms-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.number-tool__digit::placeholder {\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.number-tool__digit:focus::-webkit-input-placeholder {\n  opacity: 0.4;\n}\n.number-tool__digit:focus::-moz-placeholder {\n  opacity: 0.4;\n}\n.number-tool__digit:focus:-ms-input-placeholder {\n  opacity: 0.4;\n}\n.number-tool__digit:focus::-ms-input-placeholder {\n  opacity: 0.4;\n}\n.number-tool__digit:focus::placeholder {\n  opacity: 0.4;\n}\n.number-tool__title {\n  min-height: 150px;\n}\n.number-tool__title p:not(:first-of-type) {\n  margin: 0.5em 0 !important;\n}\n/**\n * Quote tool\n * =======================\n */\n.quote-tool__name {\n  margin-bottom: 8px;\n}\n.quote-tool__name,\n.quote-tool__job {\n  width: calc(100% - 86px) !important;\n  margin-left: 86px;\n}\n.quote-tool__quote {\n  margin-top: 10px;\n  min-height: 100px;\n}\n.quote-tool__quote p {\n  margin: 0.6em 0 !important;\n}\n.quote-tool__quote p:last-of-type {\n  margin-bottom: 0 !important;\n}\n.quote-tool__quote p:first-of-type {\n  margin-top: 0 !important;\n}\n.quote-tool [contenteditable]:empty::before {\n  content: attr(data-placeholder);\n  color: #bfbfbf;\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.quote-tool [contenteditable]:focus::before {\n  opacity: 0.4;\n}\n.quote-tool__photo-wrapper {\n  float: left;\n  width: 76px !important;\n  height: 76px !important;\n  margin-right: 10px;\n}\n.quote-tool__photo-wrapper--empty {\n  color: #595959 !important;\n}\n.quote-tool__photo-wrapper--empty .icon {\n  opacity: 0.5;\n}\n.quote-tool__photo-wrapper--loading::after {\n  width: 30px;\n  height: 30px;\n  margin-left: -15px;\n  margin-top: -15px;\n}\n.quote-tool__button-style--opinion .icon,\n.quote-tool__button-style--centered .icon,\n.quote-tool__button-style--default .icon {\n  margin-right: 0;\n}\n.quote-tool__button-style--opinion .icon {\n  width: 17px;\n  height: 14px;\n  margin-bottom: -3px;\n}\n.quote-tool__button-style--centered .icon {\n  margin-top: 4px;\n  width: 18px;\n  height: 10px;\n}\n.quote-tool__button-style--default .icon {\n  width: 18px;\n  height: 15px;\n  margin-bottom: -5px;\n}\n.quote-tool__icon {\n  background-image: url(\"data:image/svg+xml, %3Csvg%20width%3D%2216%22%20height%3D%2211%22%20viewBox%3D%220%200%2016%2011%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M8.889%203.429c0-1.886%201.6-3.429%203.555-3.429C14.4%200%2016%201.543%2016%203.429c0%203.788-3.182%206.857-7.111%206.857%200%200%202.329-.84%203.538-3.429-1.956%200-3.538-1.543-3.538-3.428M3.538%206.857C1.582%206.857%200%205.314%200%203.43%200%201.543%201.6%200%203.556%200%205.51%200%207.11%201.543%207.11%203.429c0%203.788-3.182%206.857-7.111%206.857%200%200%202.329-.84%203.538-3.429%22%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22/%3E%3C/svg%3E\");\n}\n.cdx-plugin-external-settings .quote-tool__button-style--opinion .icon,\n.cdx-plugin-external-settings .quote-tool__button-style--default .icon {\n  height: 10px;\n  margin: auto;\n}\n/**\n * Incut tool\n * =======================\n */\n.incut-tool__text {\n  min-height: 100px;\n}\n.incut-tool__text p {\n  margin: 0.6em 0 !important;\n}\n.incut-tool__text p:last-of-type {\n  margin-bottom: 0 !important;\n}\n.incut-tool__text p:first-of-type {\n  margin-top: 0 !important;\n}\n.incut-tool [contenteditable]:empty::before,\n.incut-tool [contenteditable] p:first-of-type:empty::before {\n  content: attr(data-placeholder);\n  color: #bfbfbf;\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.incut-tool [contenteditable]:focus::before,\n.incut-tool [contenteditable]:focus p:first-of-type:empty::before {\n  opacity: 0.4;\n}\n.incut-tool__button-style--centered .icon,\n.incut-tool__button-style--left .icon {\n  margin-right: 0;\n}\n.incut-tool__button-style--centered .icon {\n  margin-top: 4px;\n  width: 18px;\n  height: 10px;\n}\n.incut-tool__button-style--left .icon {\n  width: 18px;\n  height: 15px;\n  margin-bottom: -5px;\n}\n.incut-tool__icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='18' height='10' viewBox='0 0 18 10' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 5.69V4.31h18v1.38H0zm2-3.793V.517h14v1.38H2zm2 7.586v-1.38h10v1.38H4z' fill='%23000' fill-rule='evenodd'/%3E%3C/svg%3E\");\n}\n.cdx-plugin-external-settings .incut-tool__button-style--centered .icon,\n.cdx-plugin-external-settings .incut-tool__button-style--left .icon {\n  height: 10px;\n  margin: auto;\n}\n/**\n * Toolbar icon\n * ==============================\n */\n.ce-icon-list-bullet {\n  background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2212%22%20viewBox%3D%220%200%2016%2012%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M1.41%204.335c.766%200%201.411.61%201.411%201.38%200%20.768-.625%201.379-1.41%201.379C.625%207.094%200%206.483%200%205.714c0-.768.625-1.379%201.41-1.379zm3.708%202.167V4.926H16v1.576H5.118zM0%201.38C0%20.611.625%200%201.41%200c.766%200%201.411.61%201.411%201.38%200%20.768-.625%201.379-1.41%201.379C.625%202.759%200%202.148%200%201.379zm5.118.788V.591H16v1.576H5.118zM0%2010.05C0%209.281.625%208.67%201.41%208.67c.766%200%201.411.61%201.411%201.38%200%20.768-.625%201.379-1.41%201.379-.786%200-1.411-.611-1.411-1.38zm5.118.788V9.261H16v1.576H5.118z%22%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22/%3E%3C/svg%3E\");\n  background-size: 14px 10px;\n}\n.list-tool {\n  margin: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  line-height: 1.7em;\n}\nol.list-tool {\n  list-style-type: decimal;\n}\nul.list-tool {\n  list-style-type: disc;\n}\n.list-tool__item {\n  display: list-item !important;\n  margin: 0.5em 0;\n  list-style-position: outside;\n  list-style-type: inherit;\n  margin-left: 2.1em;\n  width: auto !important;\n  font-size: inherit !important;\n}\n.list-tool p {\n  margin: 0.6em 0;\n}\n.list-tool p:first-of-type {\n  margin-top: 0;\n}\n.list-tool p:last-of-type {\n  margin-bottom: 0;\n}\n.cdx-plugin-external-settings__item--list .icon {\n  height: 10px;\n  margin: auto;\n}\n/**\n * Instagram Tool\n * --------------\n */\n.instagram-settings {\n  padding: 5px 0;\n}\n.instagram-settings__item {\n  padding: 10px 15px;\n  cursor: pointer;\n  font-size: 13px;\n}\n.instagram-settings__item svg {\n  display: inline-block;\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 16px;\n  height: 16px;\n  vertical-align: text-bottom;\n  margin-right: 1.3em;\n}\n.instagram-settings__item--toggled {\n  color: inherit;\n  font-weight: bold;\n  background-color: #f5f6fa;\n}\n/**\n * Twitter tool & Telegram tool\n * ============================\n */\n.twitter-tool,\n.telegram-tool {\n  max-width: 600px;\n}\n.twitter-tool__widget,\n.telegram-tool__widget {\n  position: relative;\n  margin-bottom: 10px;\n}\n.twitter-tool__widget--loading,\n.telegram-tool__widget--loading {\n  -webkit-box-shadow: inset 0 0 0 1px #e1e8ed;\n  box-shadow: inset 0 0 0 1px #e1e8ed;\n  border-radius: 3px;\n}\n.twitter-tool__widget--loading::before,\n.telegram-tool__widget--loading::before {\n  content: '';\n  display: inline-block;\n  position: absolute;\n}\n.twitter-tool__title,\n.telegram-tool__title {\n  max-width: 600px;\n}\n.twitter-tool__title:empty::before,\n.telegram-tool__title:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.twitter-tool__title:focus::before,\n.telegram-tool__title:focus::before {\n  opacity: 0.4;\n}\n/**\n * Overrides for the Andropov template injected in the Editor\n */\n.ce-block .andropov_tweet a,\n.ce-block .andropov_telegram a {\n  position: static;\n  color: inherit !important;\n  border-bottom: 0 !important;\n  padding-bottom: auto !important;\n}\n.ce-block a.andropov_tweet__logo,\n.ce-block a.andropov_telegram__logo {\n  position: absolute;\n}\n.ce-block a.andropov_tweet__footer,\n.ce-block a.andropov_telegram__footer {\n  padding-bottom: 10px !important;\n}\n/**\n * Instagram Tool\n * ===============\n */\n.instagram-tool {\n  padding: 15px 0;\n}\n.instagram-tool__widget {\n  position: relative;\n  margin-bottom: 10px;\n  background: #fff;\n}\n.instagram-tool__widget--loading {\n  -webkit-box-shadow: inset 0 0 0 1px #e1e8ed;\n  box-shadow: inset 0 0 0 1px #e1e8ed;\n  border-radius: 3px;\n  min-height: 162px;\n}\n.instagram-tool__widget--loading::before {\n  content: '';\n  display: inline-block;\n  position: absolute;\n}\n.instagram-tool__widget iframe {\n  display: block;\n  background-color: #fff;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  margin: 0 0 12px;\n  padding: 0;\n}\n.instagram-tool__title:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.instagram-tool__title:focus::before {\n  opacity: 0.4;\n}\n/**\n * Special Buttons tool\n * =========================\n */\n.special-button__appearance {\n  margin-bottom: 10px;\n}\n.special-button__text {\n  float: left;\n  width: 48% !important;\n  vertical-align: top;\n}\n.special-button__text:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.special-button__text:focus::before {\n  opacity: 0.4;\n}\n.special-button__text-color {\n  float: right;\n  width: 24% !important;\n  margin-left: 8px;\n  vertical-align: top;\n}\n.special-button__text-color:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.special-button__text-color:focus::before {\n  opacity: 0.4;\n}\n.special-button__background-color {\n  float: left;\n  width: 24% !important;\n  margin-left: 12px;\n  vertical-align: top;\n}\n.special-button__background-color:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.special-button__background-color:focus::before {\n  opacity: 0.4;\n}\n.special-button__url:empty::before {\n  content: attr(data-placeholder);\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n}\n.special-button__url:focus::before {\n  opacity: 0.4;\n}\n.special-button-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2215%22%20height%3D%2216%22%20viewBox%3D%220%200%2015%2016%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M3.906%201.347V9.25l-1.51-1.919A1.34%201.34%200%200%200%20.51%207.11a1.35%201.35%200%200%200-.222%201.892s2.743%203.334%203.876%204.924C4.93%2014.998%205.87%2016%207.267%2016h3.219c1.96%200%203.555-1.6%203.555-3.567V7.711c0-.744-.601-1.347-1.343-1.347a1.34%201.34%200%200%200-1.14.64v-.437c0-.744-.602-1.347-1.343-1.347a1.34%201.34%200%200%200-1.14.64v-.303c0-.744-.602-1.347-1.343-1.347a1.34%201.34%200%200%200-1.141.64V1.347C6.59.603%205.99%200%205.248%200c-.741%200-1.342.603-1.342%201.347z%22%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22/%3E%3C/svg%3E\");\n  background-size: 16px 15px;\n}\n.video-tool {\n  position: relative;\n  min-height: 162px;\n  margin: 15px auto;\n}\n.video-tool--loading {\n  -webkit-box-shadow: inset 0 0 0 1px #e1e8ed;\n  box-shadow: inset 0 0 0 1px #e1e8ed;\n  border-radius: 3px;\n}\n.video-tool--loading::before {\n  content: '';\n  display: inline-block;\n  position: absolute;\n}\n/**\n * Warning tool\n * =======================\n */\n.warning-tool__icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17.562 15.723a3.159 3.159 0 0 0 .007-3.197L11.774 2.492A3.148 3.148 0 0 0 9.003.882a3.16 3.16 0 0 0-2.771 1.606L.43 12.534a3.184 3.184 0 0 0 .01 3.215 3.167 3.167 0 0 0 2.765 1.588h11.574a3.187 3.187 0 0 0 2.783-1.614zm-1.259-.725a1.749 1.749 0 0 1-1.528.885H3.201a1.725 1.725 0 0 1-1.51-.866 1.75 1.75 0 0 1-.003-1.765L7.49 3.209a1.717 1.717 0 0 1 1.513-.877c.633 0 1.199.33 1.513.881l5.799 10.042c.31.54.307 1.192-.012 1.743zM9 12.445a.935.935 0 0 0-.925.925c0 .503.422.925.925.925.485 0 .925-.422.903-.903A.903.903 0 0 0 9 12.445zm-.23-6.494c-.44.126-.713.526-.713 1.01.022.293.04.589.063.881l.188 3.32a.678.678 0 0 0 .692.65.692.692 0 0 0 .692-.673c0-.23 0-.44.022-.674.041-.714.086-1.428.126-2.142.022-.462.063-.925.085-1.388 0-.166-.022-.314-.085-.462a.927.927 0 0 0-1.07-.522z' fill='%23000' fill-rule='nonzero'/%3E%3C/svg%3E\");\n  background-size: 18px 18px;\n  background-position-y: 42% !important;\n}\n.warning-tool__title {\n  margin-bottom: 10px;\n}\n.warning-tool__title::-webkit-input-placeholder {\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.warning-tool__title::-moz-placeholder {\n  -moz-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.warning-tool__title:-ms-input-placeholder {\n  -ms-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.warning-tool__title::-ms-input-placeholder {\n  -ms-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.warning-tool__title::placeholder {\n  -webkit-transition: opacity 200ms ease;\n  transition: opacity 200ms ease;\n  color: #bfbfbf;\n}\n.warning-tool__title:focus::-webkit-input-placeholder {\n  opacity: 0.4;\n}\n.warning-tool__title:focus::-moz-placeholder {\n  opacity: 0.4;\n}\n.warning-tool__title:focus:-ms-input-placeholder {\n  opacity: 0.4;\n}\n.warning-tool__title:focus::-ms-input-placeholder {\n  opacity: 0.4;\n}\n.warning-tool__title:focus::placeholder {\n  opacity: 0.4;\n}\n.warning-tool__text {\n  min-height: 150px;\n}\n.warning-tool__text p:not(:first-of-type) {\n  margin: 0.5em 0 !important;\n}\n/**\n * Media tool\n * =======================\n * All styles -> in vue components\n */\n.media-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='17' height='16' viewBox='0 0 17 16'%3E%3Cpath d='M5.671 3.809a1.89 1.89 0 1 0 0 3.78 1.89 1.89 0 0 0 0-3.78zM15.068.028H.958a.945.945 0 0 0-.946.945v13.105c0 .522.424.945.945.945h14.11a.945.945 0 0 0 .945-.945V.973a.944.944 0 0 0-.944-.945zM13.65 13.133H5.996l5.294-5.167 2.832 2.832v1.862a.472.472 0 0 1-.472.473zm-1.587-7.03a.933.933 0 0 0-.78-.403.93.93 0 0 0-.669.271.929.929 0 0 0-.086.106l-7.183 7.056h-.97a.473.473 0 0 1-.472-.472V2.39c0-.261.212-.473.472-.473H13.65c.26 0 .472.212.472.473v5.771l-2.059-2.06z'/%3E%3C/svg%3E\");\n  background-size: 17px 16px;\n  background-position-x: 54% !important;\n}\n/**\n * Code tool\n * =======================\n * All styles -> in vue components\n */\n.code-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='18' height='12' viewBox='0 0 18 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.96 1.567l4.189 4.063-4.19 4.053 1.23 1.567 5-4.841L18 5.63l-.81-.789-5-4.841-1.23 1.567zM.81 4.84l-.81.79.81.778 5 4.84 1.23-1.566L2.853 5.63 7.04 1.567 5.81 0l-5 4.841z' fill='%23000' fill-rule='evenodd'/%3E%3C/svg%3E\");\n  background-size: 18px 12px;\n  background-position-x: 53% !important;\n}\n/**\n * Link tool\n * =======================\n */\n.link-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.065 7.014c.111.248.196.504.254.765.068.301.105.607.105.914a4.113 4.113 0 0 1-.602 2.13 4.111 4.111 0 0 1-.602.774l-.415.414-2.784 2.784A4.1 4.1 0 0 1 4.112 16a4.114 4.114 0 0 1-2.908-7.021L3.993 6.19c-.09.38-.138.767-.135 1.154.001.211.02.422.05.631.038.28.1.559.188.83l-1.532 1.533a2.176 2.176 0 0 0-.642 1.549c0 .585.228 1.136.642 1.549.413.414.964.642 1.549.642.586 0 1.135-.228 1.55-.642l1.529-1.53.587-.586.629-.63.454-.453c.006-.007.01-.016.018-.023.237-.243.4-.53.5-.832.091-.273.126-.557.107-.84a2.168 2.168 0 0 0-.626-1.403 2.168 2.168 0 0 0-1.405-.628c.055-.084.118-.164.192-.238l.4-.4.384-.384.554-.554a4.1 4.1 0 0 1 1.235.845c.366.366.645.787.844 1.234zm3.73-5.81a4.114 4.114 0 0 1 0 5.817L12.008 9.81c.09-.38.138-.767.135-1.154 0-.211-.02-.422-.049-.63-.038-.282-.1-.56-.189-.831l1.533-1.533a2.193 2.193 0 0 0-1.55-3.74c-.585 0-1.135.228-1.549.642l-1.53 1.53-.587.586-.629.63-.453.453c-.007.007-.012.016-.02.023-.236.243-.399.53-.5.833-.09.272-.125.554-.107.837.034.512.236 1.015.627 1.405.379.38.875.593 1.405.628a1.478 1.478 0 0 1-.192.24l-.4.398-.384.385-.554.553a4.097 4.097 0 0 1-1.234-.845 4.087 4.087 0 0 1-.845-1.234 4.139 4.139 0 0 1-.36-1.68A4.116 4.116 0 0 1 5.78 4.405l.415-.415 2.784-2.784A4.1 4.1 0 0 1 11.888 0c1.052 0 2.105.402 2.908 1.205z' fill='%23000' fill-rule='evenodd'/%3E%3C/svg%3E\");\n  background-size: 16px 16px;\n  background-position-x: 53% !important;\n}\nhtml body .ce-redactor a.andropov_link {\n  border: 1px solid rgba(0,0,0,0.15) !important;\n  color: #000 !important;\n  text-decoration: none !important;\n  background: #fff;\n}\nhtml body .ce-redactor a.andropov_link {\n  padding-bottom: 11px;\n}\n/**\n * Andropov tool\n * =======================\n */\n.andropov-tool__icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='14' viewBox='0 0 12 14' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.57 6.246L1 0a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1l10.57-6.246a.876.876 0 0 0 0-1.508zM2 11V3l7 4-7 4z' fill='%23000' fill-rule='nonzero'/%3E%3C/svg%3E\");\n  background-size: 18px 14px;\n  background-position-x: 60%;\n}\n.andropov-tool__input {\n  margin: 15px 0;\n}\n/**\n * Raw tool\n * =======================\n * All styles -> in vue components\n */\n.raw-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='18' height='14' viewBox='0 0 18 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.72 13.285c-1.524-.427-2.285-1.411-2.285-2.951V9.07c0-.893-.377-1.339-1.13-1.339V6.417c.736 0 1.113-.421 1.13-1.263V3.808c0-.783.19-1.415.57-1.898.382-.482.953-.831 1.715-1.047l.355 1.022a1.342 1.342 0 0 0-.73.619c-.165.294-.252.701-.26 1.222v1.333c0 .956-.379 1.627-1.136 2.012.757.39 1.136 1.064 1.136 2.025v1.345c.021.99.351 1.596.99 1.816l-.355 1.028zM5.135 10.1c0-.292.099-.53.295-.711.197-.182.444-.273.74-.273.3 0 .549.09.746.273a.923.923 0 0 1 .295.71.91.91 0 0 1-.292.702c-.195.18-.444.27-.75.27-.3 0-.547-.09-.742-.27a.91.91 0 0 1-.292-.701zm3.003 0c0-.292.098-.53.295-.711.197-.182.443-.273.74-.273.3 0 .548.09.745.273a.923.923 0 0 1 .295.71.911.911 0 0 1-.292.702c-.194.18-.444.27-.749.27-.3 0-.548-.09-.742-.27a.91.91 0 0 1-.292-.701zm2.945 0c0-.292.098-.53.295-.711.197-.182.444-.273.74-.273.3 0 .549.09.745.273a.923.923 0 0 1 .296.71.91.91 0 0 1-.292.702c-.195.18-.445.27-.75.27-.3 0-.547-.09-.742-.27a.91.91 0 0 1-.292-.701zm3.04 2.158c.644-.229.974-.842.99-1.841V9.07c0-.956.388-1.62 1.162-1.993-.774-.372-1.161-1.047-1.161-2.025V3.726c-.017-.986-.347-1.6-.99-1.841l.355-1.022c.758.211 1.327.557 1.707 1.038.381.48.574 1.11.578 1.888v1.365c.017.842.394 1.263 1.13 1.263v1.314c-.753 0-1.13.442-1.13 1.327v1.377c-.034 1.481-.795 2.431-2.285 2.85l-.355-1.028z' fill='%23000'/%3E%3C/svg%3E\");\n  background-size: 18px 14px;\n}\n/**\n * Quiz tool\n * =======================\n * All styles -> in vue components\n */\n.quiz-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='13' height='14' viewBox='0 0 13 14' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.042 5.036h2.96v6.985h-2.96V5.036zM6.012.344h2.97v11.68h-2.97V.344zm-3.968 2.69h2.964v8.99H2.044v-8.99zm10.959 9.987V14H.334A.337.337 0 0 1 0 13.666V.334h1.006v12.687h11.997z' fill='%23000'/%3E%3C/svg%3E\");\n  background-size: 13px 14px;\n}\n/**\n * Delimiter tool\n * =======================\n * All styles -> in vue components\n */\n.delimiter-tool-icon {\n  width: 22px !important;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='22' height='8' viewBox='0 0 22 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2.68 4.36L.027 3.57l.405-1.328 2.654.985-.08-3.024h1.346l-.088 3.068 2.61-.967.404 1.336-2.698.8L6.32 6.82l-1.09.826-1.634-2.53-1.582 2.469-1.099-.8L2.681 4.36zm7.147 0l-2.654-.79.404-1.328 2.654.985-.079-3.024h1.345l-.088 3.068 2.61-.967.405 1.336-2.698.8 1.74 2.381-1.09.826-1.635-2.53L9.16 7.585l-1.098-.8L9.827 4.36zm7.147 0l-2.655-.79.405-1.328 2.654.985-.08-3.024h1.346l-.088 3.068 2.61-.967.404 1.336-2.698.8 1.74 2.381-1.09.826-1.634-2.53-1.582 2.469-1.099-.8 1.767-2.426z' fill='%23000'/%3E%3C/svg%3E\");\n  background-size: 22px 8px;\n}\n/**\n * Audio tool\n * =======================\n * All styles -> in vue components\n */\n.audio-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.332 15.123L4.35 12.096v-6.24l4.983-3.027v12.294zM14.24 5.59c1.524 1.833 1.516 4.805 0 6.645-.233.28-.627.148-.722.068a.515.515 0 0 1-.065-.722c1.223-1.471 1.223-3.863 0-5.334a.51.51 0 0 1 .065-.722.51.51 0 0 1 .722.065zm-12.904.47h1.681v5.74H1.336v-5.74zm8.992-5.002a.67.67 0 0 0-.672.01L3.638 4.726H.666A.665.665 0 0 0 0 5.392v7.076c0 .369.297.666.666.666h2.828l6.158 3.742a.667.667 0 1 0 1.012-.571V1.64a.658.658 0 0 0-.336-.581z' fill='%23000'/%3E%3C/svg%3E\");\n  background-size: 16px 16px;\n}\n/**\n * Person tool\n * =======================\n * All styles -> in vue components\n */\n.person-tool-icon {\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='17' fill='none' viewBox='0 0 16 17'%3E%3Cpath fill='%23000' d='M14.654 5.82456c0-.52631-.0168-1.12281-.0672-1.80702C14.3176.596491 11.4742 0 7.99159 0 4.50894 0 1.66562.596491 1.39642 4.01754c-.05047.68421-.06729 1.28071-.06729 1.80702C.555205 6.19298 0 7.05263 0 8.05263c0 1.21053.807571 2.22807 1.85068 2.40347v1.4737C1.85068 14.1754 4.60042 17 6.77077 17h2.45846c2.15357 0 4.92007-2.8246 4.92007-5.0702v-1.4737C15.1924 10.2807 16 9.2807 16 8.05263c-.0168-1-.572-1.85965-1.346-2.22807zm-.8412 3.38597c-.0841 0-.1177 0-.1346-.01755-.185-.05263-.3701 0-.5215.12281-.1514.12281-.2356.29824-.2356.50877v2.10524c0 1.5439-2.2113 3.807-3.70869 3.807H6.77077c-1.49737 0-3.70873-2.2631-3.70873-3.807V9.82456c0-.19298-.08412-.38596-.23554-.50877-.15142-.12281-.33649-.1579-.52156-.12281-.01682 0-.0673.01755-.13459.01755-.52156 0-.95899-.52632-.95899-1.1579 0-.49123.26919-.91228.63932-1.07017v.1228c0 .35088.26919.63158.60568.63158s.60568-.2807.60568-.63158v-1.2807c0-.50877.33198-.64912.93796-.82456 1.38573-.34643 3.9716-1.65298 4.59498-1.36668.71478.32827.42396 1.63669 1.20261 1.5254C11.4253 4.92606 12.0789 4.1648 12.5 4.5c.3524.28052.4211.81579.4211 1.32456v1.2807c0 .35088.2692.63158.6057.63158s.6057-.2807.6057-.63158v-.1228c.3701.15789.6393.57894.6393 1.07017 0 .64912-.4374 1.1579-.959 1.1579z'/%3E%3C/svg%3E\");\n  background-size: 16px 17px;\n}\n",""]),t.exports=e}}]);