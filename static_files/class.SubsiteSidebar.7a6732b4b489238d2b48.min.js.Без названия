(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1375:function(t,e,s){"use strict";s(957)},1376:function(t,e,s){(e=s(30)(!1)).push([t.i,".subsite-sidebar__contacts[data-v-07eabda5] {\n  padding-bottom: 24px;\n}\n.subsite-sidebar__list[data-v-07eabda5] .v-list-subsites-item {\n  padding: 10px 0;\n}\n.subsite-sidebar__list[data-v-07eabda5] .v-list-subsites-item::before {\n  display: none;\n}\n.subsite-sidebar__list[data-v-07eabda5] .v-subscribe-button {\n  display: none;\n}\n.subsite-sidebar__list[data-v-07eabda5] .v-list-subsites-item__label {\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: 400;\n}\n",""]),t.exports=e},1662:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return y}));var i=s(35),n=s.n(i),a=s(606),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"sidebar",staticClass:"subsite-sidebar"},[s("layout-island",{attrs:{title:t.$gettext("Subscribers"),counter:t.$store.state.counters.subscribers}},[t.subscribersList.length?s("layout-list",{attrs:{items:t.subscribersList,"more-items-label":t.$pgettext("Animate","Show all"),"more-items-url":t.$store.state.detailsTabBaseUri+t.DetailsRoute.Subscribers}}):s("div",{staticClass:"v-island__grayed"},[t._v("\n      "+t._s(t.$store.state.dummy.subscribers)+"\n    ")])],1),t._v(" "),t.subscriptionsList.length||t.$store.state.isMe?s("layout-island",{attrs:{title:t.$gettext("Subscriptions"),counter:t.$store.state.counters.subscriptions}},[t.subscriptionsList.length?s("layout-list",{attrs:{items:t.subscriptionsList,"more-items-label":t.$pgettext("Inanimate","Show all"),"more-items-url":t.$store.state.detailsTabBaseUri+t.DetailsRoute.Subscriptions}}):t._e(),t._v(" "),!t.subscriptionsList.length&&t.$store.state.isMe?s("a",{staticClass:"t-link-inline",attrs:{href:"/subs"}},[s("translate",[t._v("\n        Configure the feed\n      ")])],1):t._e()],1):t._e(),t._v(" "),t.rulesList.length?s("layout-island",{attrs:{title:t.$gettext("Rules")}},[s("layout-list",{attrs:{items:t.rulesList,"is-allowed-html":!0,"more-items-label":t.$pgettext("Inanimate","Show all"),"more-items-url":t.$store.state.detailsTabBaseUri+t.DetailsRoute.Rules}})],1):t._e(),t._v(" "),t.contactsList.length?s("layout-island",{staticClass:"subsite-sidebar__contacts",attrs:{title:t.$gettext("Contacts"),counter:t.contactsList.length}},[s("layout-list-subsites",{staticClass:"subsite-sidebar__list",attrs:{items:t.contactsList,columns:1}})],1):t._e()],1)};l._withStripped=!0;var r=s(20),o=s(528),u=s(593),c=s(590),d=s(161),m=s(570),b=s(616);var p={name:"subsite-sidebar",components:{LayoutIsland:o.a,LayoutList:u.a,LayoutListSubsites:c.a},data:()=>({stickySidebarInstance:null,mutationObserver:null,page:null,pageContent:null}),computed:{subscribersList(){return this.$store.state.subscribers.items},subscriptionsList(){return this.$store.state.subscriptions.items},rulesList(){return this.$store.state.rules},contactsList(){return this.$store.getters[b.a]}},created(){this.DetailsRoute=m.a},mounted(){this.page=this.$el.closest(".l-page"),this.pageContent=this.page?this.page.querySelector(".l-page__content"):null,this.stickySidebarInstance=new d.a({element:this.$refs.sidebar,offset:{top:80,bottom:20},breakpoints:{[`(max-width: ${r.c.TwoColumns}px)`]:!1}}),this.updatePageSidebarOffset(),this.pageContent&&(this.mutationObserver=new MutationObserver(t=>{this.updatePageSidebarOffset()}),this.mutationObserver.observe(this.pageContent,{childList:!0}))},beforeDestroy(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.stickySidebarInstance.destroy()},methods:{updatePageSidebarOffset(){const t=this.pageContent?this.pageContent.querySelector('[air-module="module.feed"]'):null,e=this.pageContent?this.pageContent.querySelector(".feed_header, .ui-sorting"):null,s=!!e&&!e.previousElementSibling;if(!e||!s)return;const i=t.getBoundingClientRect().top-this.pageContent.getBoundingClientRect().top;this.page.style.setProperty("--page-sidebar-offset-top",i+"px"),this.stickySidebarInstance.refresh()}}},_=(s(1375),s(10)),v=Object(_.a)(p,l,[],!1,null,"07eabda5",null);v.options.__file="src/Components/Subsite/vue/subsite-sidebar.vue";var g=v.exports,h=s(123),f=s(771),x=(s(189),s(44)),S=s.n(x),w=s(55);class y{constructor({element:t}){this.wrapper=t,this.container=this.wrapper,this.store=null,this.app=null,this.prepareParams(),this.init()}prepareParams(){const t=this.wrapper.querySelector("textarea");try{const e=t?JSON.parse(t.textContent):{};this.store=Object(f.a)(e)}catch(t){console.error("SubsiteSidebar params prepare:",t)}}init(){n.a.use(S.a,{translations:w,defaultLanguage:window.__i18nLocale}),n.a.use(a.default,{observer:!0}),n.a.directive("click-outside",h.a),this.app=new n.a({el:this.container,store:this.store,render:t=>t(g)});const t=window.Air&&window.Air.get("module.hawk");t&&t.connectVue(n.a)}destroy(){this.app.$popup&&this.app.$popup.close(),this.app&&(this.app.$destroy(),this.app=null),this.store=null}}},564:function(t,e,s){var i=s(608);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(31).default)("3818ac71",i,!1,{})},593:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["v-list","v-list--"+t.type]},[s("div",{staticClass:"v-list__content"},t._l(t.items,(function(e,i){return s(e.url?"a":"div",{key:i,tag:"component",staticClass:"v-list__item",attrs:{href:e.url}},[e.image?s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.getImageUrl(e.image,44),expression:"getImageUrl(item.image, 44)",arg:"background-image"}],staticClass:"v-list__image"}):t._e(),t._v(" "),e.icon?s("div",{staticClass:"v-list__icon"},[s("icon",t._b({},"icon",e.icon,!1))],1):t._e(),t._v(" "),e.details&&t.isShowDetails?s("div",{staticClass:"v-list-details"},[e.details.title?s("div",{staticClass:"v-list-details__title"},[t._v("\n          "+t._s(e.details.title)+"\n        ")]):t._e(),t._v(" "),e.details.text?s("div",{staticClass:"v-list-details__text"},[t._v("\n          "+t._s(e.details.text)+"\n        ")]):t._e(),t._v(" "),e.details.note?s("div",{staticClass:"v-list-details__note"},[t._v("\n          "+t._s(e.details.note)+"\n        ")]):t._e()]):t._e(),t._v(" "),e.label&&t.isShowLabels&&!t.isShowDetails?s("div",{staticClass:"v-list__label"},[t.isAllowedHtml?s("div",{domProps:{innerHTML:t._s(e.label)}}):[t._v("\n          "+t._s(e.label)+"\n        ")]],2):t._e()])})),1),t._v(" "),t.$slots.default?s("div",{staticClass:"v-list__content"},[t._t("default")],2):t._e(),t._v(" "),t.moreItemsLabel?s(t.moreItemsUrl?"a":"div",{tag:"component",staticClass:"v-list__more",attrs:{href:t.moreItemsUrl||!1,target:!!t.moreItemsUrlNewTab&&"_blank"},domProps:{innerHTML:t._s(t.moreItemsLabel)},on:{click:function(e){return t.$emit("more")}}},[t._v("\n    "+t._s(t.moreItemsLabel)+"\n  ")]):t._e()],1)};i._withStripped=!0;var n=s(26),a=s(6),l={name:"layout-list",components:{Icon:n.a},props:{items:{type:Array,default:()=>[]},moreItemsLabel:{type:String,default:""},moreItemsUrl:{type:String,default:""},moreItemsUrlNewTab:{type:Boolean,default:!1},isAllowedHtml:{type:Boolean,default:!1}},data:()=>({}),computed:{isShowImages(){return this.items.some(t=>t.image)},isShowLabels(){return this.items.some(t=>t.label)},isShowDetails(){return this.items.some(t=>t.details&&Object.keys(t.details).length)},type(){return this.isShowDetails?"detailed":this.isShowImages&&!this.isShowLabels?"images":this.isShowLabels&&!this.isShowImages?"text":"default"}},methods:{getImageUrl:(t,e)=>Object(a.formImageUrl)(t,e)}},r=(s(607),s(10)),o=Object(r.a)(l,i,[],!1,null,null,null);o.options.__file="src/Components/Ui/vue/layout/layout-list.vue";e.a=o.exports},607:function(t,e,s){"use strict";s(564)},608:function(t,e,s){(e=s(30)(!1)).push([t.i,".v-list {\n  --image-size: 24px;\n  --image-radius: 6px;\n  --grid-gap: 16px;\n}\n.v-list--default .v-list__label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-list--detailed {\n  --image-size: 44px;\n  --image-radius: 8px;\n  --grid-gap: 0;\n}\n.v-list--detailed .v-list__image {\n  margin-bottom: 12px;\n}\n.v-list--detailed .v-list__item {\n  -ms-flex-align: stretch;\n  align-items: stretch;\n}\n.v-list--detailed .v-list__item:not(:last-child) {\n  margin-bottom: 12px;\n}\n.v-list--detailed .v-list__item:not(:last-child) .v-list-details {\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(0,0,0,0.1);\n}\n.v-list--images {\n  --image-size: 32px;\n  --image-radius: 8px;\n  --grid-gap: 12px;\n}\n.v-list--images .v-list__content {\n  grid-template-columns: repeat(auto-fill, var(--image-size));\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n}\n.v-list__content {\n  display: grid;\n  grid-gap: var(--grid-gap);\n}\n.v-list__item {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  min-width: 0;\n}\n.v-list__image {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: var(--image-size);\n  height: var(--image-size);\n  background-color: #dedede;\n  border-radius: var(--image-radius);\n  -webkit-box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);\n  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n.v-list__image:not(:last-child) {\n  margin-right: 12px;\n}\n.v-list__icon {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: var(--image-size);\n  height: var(--image-size);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.v-list__icon:not(:last-child) {\n  margin-right: 12px;\n}\n.v-list__label a {\n  color: #346eb8;\n  border-bottom: 1px solid #bfd3ed;\n  cursor: pointer;\n}\n.v-list__label a:hover {\n  color: #cd192e;\n  border-bottom: 1px solid #f6b4bc;\n}\n.v-list__label b,\n.v-list__label strong {\n  font-weight: bold;\n}\n.v-list__label i,\n.v-list__label em {\n  font-style: italic;\n}\n.v-list__label mark {\n  background: rgba(255,215,142,0.22);\n  padding: 0.09em 0;\n}\n.v-list__more {\n  color: #346eb8;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin-top: 16px;\n  margin-bottom: -4px;\n  display: block;\n}\n.v-list__more:hover {\n  color: #cd192e;\n}\n.v-list__more svg {\n  margin-left: 9px;\n}\na.v-list__item:hover {\n  color: #346eb8;\n}\n.v-list-details {\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  min-width: 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  aligm-items: flex-start;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.v-list-details__title,\n.v-list-details__text,\n.v-list-details__note {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-list-details__title {\n  font-weight: 500;\n}\n.v-list-details__text {\n  font-size: 14px;\n  line-height: 1.5em;\n}\n.v-list-details__note {\n  font-size: 14px;\n  line-height: 1.45em;\n  color: #595959;\n}\n",""]),t.exports=e},615:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return l}));var i=s(1);const n={link:"link",subsite:"subsite",email:"email",phone:"phone",site:"site",instagram:"instagram",youtube:"youtube",vkontakte:"vkontakte",facebook:"facebook",twitter:"twitter",telegram:"telegram"},a={[n.site]:"v_web",[n.email]:"v_email",[n.phone]:"v_phone",[n.link]:"v_link",[n.subsite]:"v_person",[n.instagram]:"v_instagram",[n.youtube]:"v_youtube",[n.vkontakte]:"v_vkontakte_night",[n.facebook]:"v_facebook_night",[n.twitter]:"v_twitter_night",[n.telegram]:"v_web"},l={[n.link]:Object(i.c)("Link to website or social network"),[n.subsite]:Object(i.c)("Profile link"),[n.email]:Object(i.c)("Email"),[n.phone]:Object(i.c)("With +7, without brackets and spaces")}},616:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));const i="GET_SUBSITE_CONTACTS"},617:function(t,e,s){"use strict";s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));const i="UPDATE_SUBSITE_SUBSCRIPTION_STATES",n="LOAD_MORE_SUBSCRIBERS",a="LOAD_MORE_SUBSCRIPTIONS"},771:function(t,e,s){"use strict";s.d(e,"a",(function(){return x}));var i=s(35),n=s.n(i),a=s(42),l=s(3),r=s(615),o=s(616),u=s(617);n.a.use(a.a);const c={id:0,url:"",name:"",loginedUserId:0,isMe:!1,description:"",subscribers:{items:[],lastId:0,lastSortingValue:null},subscriptions:{items:[],count:0,page:1},rules:[],contacts:[],counters:{},dummy:{},detailsTabBaseUri:""},d={[o.a]:({contacts:t})=>t.some(t=>t.icon&&t.icon.name)?t.map(({icon:t,label:e,url:s})=>({id:e,url:s,label:e,icon:t.name})):t.map(({id:t,name:e,type:s,value:i,label:n})=>{const a={id:t,subtitle:e};return s===r.a.subsite?(a.image=i.image,a.url=i.url,a.label=i.name):(a.icon=r.b[s],a.url=i,a.label=n||i),s===r.a.email&&(a.url="mailto:"+i),a})},m="ADD_SUBSCRIBERS",b="ADD_SUBSCRIPTIONS",p="SET_SUBSCRIPTION_STATE",_="SET_LAST_ID",v="SET_LAST_SORTING_VALUE",g="SET_PAGE",h={[p](t,{name:e,id:s,value:i}){const n=t[e]?t[e].items.find(t=>t.id===s):null;n&&(n.isSubscribed=i)},[m](t,e){t.subscribers.items.push(...e)},[b](t,e){const s=e.filter(e=>!t.subscriptions.items.some(t=>t.id===e.id));t.subscriptions.items.push(...s)},[_](t,{name:e,value:s}){t[e].lastId=s},[v](t,{name:e,value:s}){t[e].lastSortingValue=s},[g](t,{name:e,value:s}){t[e].page=s}},f={[u.c]({commit:t},{id:e,value:s}){t(p,{name:"subscribers",id:e,value:s}),t(p,{name:"subscriptions",id:e,value:s})},[u.b]:({state:t,commit:e})=>new Promise((s,i)=>{const{page:n}=t.subscriptions;n?Object(l.e)({type:"GET",url:"/subsite/subscriptions/"+t.id,data:{page:n}}).then(t=>{e(b,t.items),e(g,{name:"subscriptions",value:t.page}),s()}).catch(i):s()}),[u.a]:({state:t,commit:e})=>new Promise((s,i)=>{const{lastId:n,lastSortingValue:a}=t.subscribers;n?Object(l.e)({type:"GET",url:"/subsite/subscribers/"+t.id,data:{lastId:n,lastSortingValue:a}}).then(t=>{e(m,t.items),e(_,{name:"subscribers",value:t.lastId}),e(v,{name:"subscribers",value:t.lastSortingValue}),s()}).catch(i):s()})};function x(t={}){const e={...c,...t};return new a.a.Store({modules:{},state:e,getters:d,mutations:h,actions:f})}},957:function(t,e,s){var i=s(1376);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(31).default)("45f501bc",i,!1,{})}}]);