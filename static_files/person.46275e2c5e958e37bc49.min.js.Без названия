(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1042:function(t,n,e){var a=e(1582);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(31).default)("6b605636",a,!1,{})},1043:function(t,n,e){var a=e(1584);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(31).default)("f27e7b10",a,!1,{})},1044:function(t,n,e){var a=e(1586);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(31).default)("591faf40",a,!1,{})},1581:function(t,n,e){"use strict";e(1042)},1582:function(t,n,e){(n=e(30)(!1)).push([t.i,".avatar-input[data-v-3129dddf] {\n  position: relative;\n  z-index: 1;\n  cursor: pointer;\n  color: #595959;\n  resize: none;\n}\n.avatar-input[data-v-3129dddf]:hover {\n  color: #fff;\n}\n.avatar-input[data-v-3129dddf]:hover::after {\n  opacity: 1;\n}\n.avatar-input--loading[data-v-3129dddf] {\n  pointer-events: none;\n}\n.avatar-input--loading[data-v-3129dddf]::after,\n.avatar-input--loading .icon[data-v-3129dddf] {\n  display: none;\n}\n.avatar-input--uploaded[data-v-3129dddf] {\n  color: #fff;\n}\n.avatar-input--uploaded .icon[data-v-3129dddf] {\n  visibility: hidden;\n}\n.avatar-input--uploaded:hover .icon[data-v-3129dddf] {\n  visibility: visible;\n  opacity: 1;\n}\n.avatar-input[data-v-3129dddf]::before {\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n.avatar-input input[data-v-3129dddf] {\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0;\n}\n.avatar-input img[data-v-3129dddf] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n.avatar-input[data-v-3129dddf]::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  opacity: 0;\n  z-index: 2;\n}\n.avatar-input .icon[data-v-3129dddf] {\n  opacity: 0.5;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  z-index: 3;\n}\n.avatar-input__loader[data-v-3129dddf] {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  border: 2px solid #dedede;\n  border-top-color: #4683d9;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  margin-top: -15px;\n  margin-left: -15px;\n  -webkit-animation: spin 0.5s infinite linear;\n  animation: spin 0.5s infinite linear;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.avatar-input__remove[data-v-3129dddf] {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  -webkit-box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);\n  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);\n  background-color: #fff;\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  z-index: 4;\n}\n.avatar-input__remove[data-v-3129dddf]::before,\n.avatar-input__remove[data-v-3129dddf]::after {\n  content: '';\n  width: 2px;\n  height: 8px;\n  background: #e52e3a;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -4px;\n  margin-left: -1px;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n.avatar-input__remove[data-v-3129dddf]:after {\n  -webkit-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n",""]),t.exports=n},1583:function(t,n,e){"use strict";e(1043)},1584:function(t,n,e){(n=e(30)(!1)).push([t.i,".text-input[data-v-738af0f3] {\n  width: 100%;\n  overflow: hidden;\n  resize: none;\n}\n.text-input[data-v-738af0f3]:empty::before {\n  content: attr(data-placeholder);\n  color: $color-6;\n  -webkit-transition: opacity 0.2s ease;\n  transition: opacity 0.2s ease;\n  pointer-events: none;\n}\n.text-input[data-v-738af0f3]:focus::before {\n  opacity: 0.4;\n}\n",""]),t.exports=n},1585:function(t,n,e){"use strict";e(1044)},1586:function(t,n,e){(n=e(30)(!1)).push([t.i,".person-tool[data-v-4ecf4c74] {\n  display: -ms-flexbox;\n  display: flex;\n}\n.person-tool__image[data-v-4ecf4c74] {\n  width: 76px;\n  margin-right: 10px;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n}\n.person-tool__fields[data-v-4ecf4c74] {\n  -ms-flex: 1;\n  flex: 1;\n  min-width: 0;\n}\n.person-tool__input[data-v-4ecf4c74]:not(:last-child) {\n  margin-bottom: 8px;\n}\n",""]),t.exports=n},1645:function(t,n,e){"use strict";e.r(n),e.d(n,"PersonMaker",(function(){return C}));var a=e(35),i=e.n(a),o=e(42);i.a.use(o.a);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"person-tool cdx-tool"},[e("avatar-input",{staticClass:"cdx-input person-tool__image",model:{value:t.$store.state.image,callback:function(n){t.$set(t.$store.state,"image",n)},expression:"$store.state.image"}}),t._v(" "),e("div",{staticClass:"person-tool__fields"},[e("text-input",{staticClass:"person-tool__input",attrs:{placeholder:t.nameLabel},on:{submit:t.onEnterPressed},model:{value:t.$store.state.title,callback:function(n){t.$set(t.$store.state,"title",n)},expression:"$store.state.title"}}),t._v(" "),e("text-input",{staticClass:"person-tool__input",attrs:{placeholder:t.occupationLabel},on:{submit:t.onEnterPressed},model:{value:t.$store.state.description,callback:function(n){t.$set(t.$store.state,"description",n)},expression:"$store.state.description"}})],1)],1)};r._withStripped=!0;var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("label",{class:["avatar-input",{"avatar-input--loading":t.isLoading,"avatar-input--uploaded":t.value}]},[t.value?e("img",{attrs:{alt:"",src:t._f("formImageUrl")(t.value.data.uuid,t.size)}}):t._e(),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],attrs:{type:"file",accept:"image/*"},on:{change:t.onSelect}}),t._v(" "),e("icon",{attrs:{name:"ui_photo",width:"25",height:"24"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"avatar-input__remove",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.onRemove.apply(null,arguments)}}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"avatar-input__loader"})],1)};s._withStripped=!0;var d=e(26),l=e(6),p=e(5),u={name:"editor-avatar-input",components:{Icon:d.a},props:{value:{type:[Object,null],required:!0},size:{type:Number,default:76}},data:()=>({isLoading:!1}),methods:{onSelect(t){const{files:n}=t.target;n&&n.length&&!this.isLoading&&(this.isLoading=!0,Object(l.uploadFiles)(n,t=>{if(t&&t.length){const{type:n,data:e}=t[0];this.$emit("input",{type:n,data:e})}else p.error(this.$gettext("File uploading failed"));this.isLoading=!1}))},onRemove(){this.$emit("input",null)}}},c=(e(1581),e(10)),f=Object(c.a)(u,s,[],!1,null,"3129dddf",null);f.options.__file="src/Components/Editor/vue/common/avatar-input.vue";var v=f.exports,m=function(){var t=this.$createElement;this._self._c;return this._m(0)};m._withStripped=!0;var h={name:"editor-text-input",components:{},props:{value:{type:String,required:!0},placeholder:{type:String,default:""}},methods:{input(t){const{target:n}=t;let e=n.innerHTML.trim();0===n.textContent.trim().length&&(e=""),this.$emit("input",e)},keyup(t){const{target:n}=t;0===n.textContent.trim().length&&(n.innerHTML="")},paste(t){setTimeout(()=>{this.input(t)},50)},submit(t){this.$emit("submit",t)}}},g=(e(1583),Object(c.a)(h,m,[function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"cdx-input text-input",attrs:{contenteditable:"true","data-placeholder":t.placeholder},domProps:{innerHTML:t._s(t.value)},on:{input:t.input,keyup:t.keyup,paste:t.paste,keydown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),n.stopPropagation(),t.submit.apply(null,arguments))}}})}],!1,null,"738af0f3",null));g.options.__file="src/Components/Editor/vue/common/text-input.vue";var x={name:"person",components:{AvatarInput:v,TextInput:g.exports},data(){return{nameLabel:this.$gettext("Speaker name"),occupationLabel:this.$gettext("Occupation")}},methods:{onEnterPressed(t){const n=t.target.nextElementSibling;n?this.$root.callEditorApi("focusContenteditable",n):this.$root.callEditorApi("navigateNext")}}},b=(e(1585),Object(c.a)(x,r,[],!1,null,"4ecf4c74",null));b.options.__file="src/Components/Editor/vue/person/person.vue";var _=b.exports,w=(e(189),e(44)),y=e.n(w),k=e(55);let $=null,L=null;class C{constructor({api:t,id:n}){$=t,L=n,this.form=null,this.container=null}makeContainer(){return this.container=document.createElement("div"),this.container}render(t){const n=function(t={}){return new o.a.Store({state:Object.assign({image:null,title:"",description:""},t)})}(t);return this.makeContainer(),i.a.use(y.a,{translations:k,defaultLanguage:window.__i18nLocale}),setTimeout(()=>{this.form=new i.a({el:this.container,store:n,methods:{getData(){return this.$store.state},getBlockId:()=>L,callEditorApi(t,n){Array.isArray(n)?$[t](...n):$[t](n)}},render:t=>t(_)});const t=window.Air&&window.Air.get("module.hawk");t&&t.connectVue(i.a)},200),this.container}save(){return Promise.resolve().then(()=>this.form.getData())}}}}]);